var wAjaxTimeout;dbsfaces={CSS:{MODIFIER:{CLOSABLE:" -closable ",CLOSED:" -closed ",SELECTED:" -selected ",SELECTABLE:" -selectable ",TITLE:" -title ",LABEL:" -label ",ICON:" -icon ",ICONCLOSE:" -iconclose ",DISABLED:" -disabled "}},ID:{DIALOG:"dialog",INPUTTEXT:"inputText"},EVENT:{ON_AJAX_BEGIN:"dbs_ON_AJAX_BEGIN",ON_AJAX_COMPLETE:"dbs_ON_AJAX_COMPLETE",ON_AJAX_SUCCESS:"dbs_ON_AJAX_SUCESS",ON_AJAX_ERROR:"dbs_ON_AJAX_ERROR",ON_ROW_SELECTED:"select.dataTable",ON_TRANSITION_START:"webkitTransitionStart otransitionStart oTransitionStart msTransitionStart transitionstart",ON_TRANSITION_END:"webkitTransitionEnd otransitionEnd oTransitionEnd msTransitionEnd transitionend",ON_ANIMATION_END:"webkitAnimationEnd oanimationEnd msAnimationEnd animationend",ON_ANIMATION_INTERATION:"webkitAnimationIteration animationiteration"},JAVAX:{VIEWSTATE:"javax.faces.ViewState",SOURCE:"javax.faces.source",PARTIAL_EXECUTE:"javax.faces.partial.execute",PARTIAL_RENDER:"javax.faces.partial.render",PARTIAL_AJAX:"javax.faces.partial.ajax"},locale:null,decimalSeparator:null,groupSeparator:null,setLocale:function(e){this.locale=e,this.decimalSeparator=dbsfaces.format.getDecimalSeparator(),this.groupSeparator=dbsfaces.format.getGroupSeparator()}},$(document).on("keydown",function(e){return 13==e.which&&"text"==e.target.type?($(e.target).blur(),!1):(8!=e.which&&46!=e.which||"select-one"!=e.target.type&&"radio"!=e.target.type&&"submit"!=e.target.type&&"checkbox"!=e.target.type)&&void 0}),$(document).ready(function(){dbsfaces.ui.initializeTheme()}),String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},dbsfaces.sound={beep:function(){$("#dbs_beep").remove(),$("body").append('<audio id="dbs_beep" src="sound/alert.mp3" preload autoplay/>')}},dbsfaces.svg={gsvg:function(e,t,a,n,i,s,o,l){var d=dbsfaces.svg.g(e,s,o,l);return dbsfaces.svg.svg(d,null,null,null,null,null,null,null)},g:function(e,t,a,n){var i=dbsfaces.svg.createElement(e,"g",n);return dbsfaces.svg.setDefaultAttrs(i,t,a),i},svg:function(e,t,a,n,i,s,o,l){var d=dbsfaces.svg.createElement(e,"svg",l);return dbsfaces.svg.setDefaultAttrs(d,s,o),d.svgAttr("x",t).svgAttr("y",a).svgAttr("width",n).svgAttr("height",i),d},use:function(e,t,a,n,i){var s=dbsfaces.svg.createElement(e,"use",i);return dbsfaces.svg.setDefaultAttrs(s,a,n),dbsfaces.svg.setAttributeHRef(s,t),s},line:function(e,t,a,n,i,s,o,l){var d=dbsfaces.svg.createElement(e,"line",l);return dbsfaces.svg.setDefaultAttrs(d,s,o),d.svgAttr("x1",t).svgAttr("y1",a).svgAttr("x2",n).svgAttr("y2",i),d},circle:function(e,t,a,n,i,s,o){var l=dbsfaces.svg.createElement(e,"circle",o);return dbsfaces.svg.setDefaultAttrs(l,i,s),l.svgAttr("cx",t).svgAttr("cy",a).svgAttr("r",n),l},rect:function(e,t,a,n,i,s,o,l,d,r){var c=dbsfaces.svg.createElement(e,"rect",r);return dbsfaces.svg.setDefaultAttrs(c,l,d),c.svgAttr("x",t).svgAttr("y",a).svgAttr("rx",s).svgAttr("ry",o).svgAttr("height",i).svgAttr("width",n),c},ellipse:function(e,t,a,n,i,s,o,l){var d=dbsfaces.svg.createElement(e,"ellipse",l);return dbsfaces.svg.setDefaultAttrs(d,s,o),d.svgAttr("cx",t).svgAttr("cy",a).svgAttr("rx",n).svgAttr("ry",i),d},path:function(e,t,a,n,i){var s=dbsfaces.svg.createElement(e,"path",i);return dbsfaces.svg.setDefaultAttrs(s,a,n),s.svgAttr("d",t),s},text:function(e,t,a,n,i,s,o){var l=dbsfaces.svg.createElement(e,"text",o);return dbsfaces.svg.setDefaultAttrs(l,i,s),l.svgAttr("x",t).svgAttr("y",a),l.text(n),l},tspan:function(e,t,a,n,i){var s=dbsfaces.svg.createElement(e,"tspan",i);return dbsfaces.svg.setDefaultAttrs(s,a,n),s.text(t),s},textPath:function(e,t,a,n,i,s){var o=dbsfaces.svg.createElement(e,"textPath",s);return dbsfaces.svg.setDefaultAttrs(o,n,i),o.text(a),dbsfaces.svg.setAttributeHRef(o,t),o},linearGradient:function(e,t,a){var n=dbsfaces.svg.createElement(e,"linearGradient",a);return n.svgAttr("id",t),n},marker:function(e,t,a,n){var i=dbsfaces.svg.createElement(e,"marker",null);return i.svgAttr("id",t).svgAttr("refx",a).svgAttr("refy",n),i},stop:function(e,t,a){var n=dbsfaces.svg.createElement(e,"stop",null);return n.svgAttr("offset",t).svgAttr("stop-color",a),n},createElement:function(e,t,a){var n=$(document.createElementNS("http://www.w3.org/2000/svg",t));if(null!=a)for(var i in a)n.svgAttr(i,a[i]);return e.append(n),n},setDefaultAttrs:function(e,t,a){e.svgAttr("class",t).svgAttr("style",a)},setAttributeHRef:function(e,t){e.get(0).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+t)}},dbsfaces.url={getParams:function(){for(var e={},t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("="),i=n[0].toLowerCase();if(void 0===e[i])e[i]=decodeURIComponent(n[1]);else if("string"==typeof e[i]){var s=[e[i],decodeURIComponent(n[1])];e[i]=s}else e[i].push(decodeURIComponent(n[1]))}return e},setInputsValuesFromParams:function(){var e=dbsfaces.url.getParams();for(var t in e)if(e.hasOwnProperty(t)){var a=document.getElementById(t);null!=a&&(a.value=e[t])}}},dbsfaces.onView={initialize:function(e){e.addClass("-th_onview"),null==$("body").data("onview")&&($(window).resize(function(e){dbsfaces.onView.event()}),$(window).scroll(function(e){dbsfaces.onView.event()}),e.scroll(function(e){dbsfaces.onView.event()})),$("body").data("onview",$(".-th_onview"))},event:function(){var o=$(window);$("body").data("onview").each(function(){var i=$(this);if(0<i.length){var s=i[0].getBoundingClientRect().top+i[0].getBoundingClientRect().height;s<0||i[0].getBoundingClientRect().top>=o.height()?null!=i.data("onview")&&(clearTimeout(i.data("onview")),i.data("onview",null),i.data("onviewTopIn",null),i.data("onviewTopOut",null),i.removeClass("-enter"),i.trigger("viewExit")):null==i.data("onview")?(i.data("onview",!0),i.addClass("-enter"),i.trigger("viewEnter")):(clearTimeout(i.data("onview")),i.data("onview",setTimeout(function(e){null==i.data("onviewTopIn")&&0<i[0].getBoundingClientRect().top?(i.data("onviewTopIn",!0),i.trigger("viewTopIn")):null==i.data("onviewTopOut")&&i[0].getBoundingClientRect().top<0&&(i.data("onviewTopOut",!0),i.trigger("viewTopOut"));var t=1-s/(o.height()+i[0].getBoundingClientRect().height),a=1-i[0].getBoundingClientRect().top/o.height(),n=$.Event("viewScroll",{dbs:!0,source:i,factor:t,factorTop:a});i.trigger(n)},10)))}})}},dbsfaces.component={setHasMessage:function(e){var t=$(e);t.data("hasmessage",!0),t.attr("hasmessage",!0)},createElement:function(e,t){var a=$(document.createElement(e));if(null!=t)for(var n in t)a.attr(n,t[n]);return a}},dbsfaces.ui={initializeTheme:function(){dbsfaces.ui.initializeThemeInput(),dbsfaces.ui.initializeThemeCard()},initializeThemeInput:function(){var e=tinycolor($("body").css("color")),t="";e.setAlpha(.05),t+=".-th_input-data:FOCUS,.-th_input-data-FOCUS {background-color: ",t+=e.toHslString(),t+=";} ",e.setAlpha(.08),t+=".-th_input-data[type=text],",t+=".-th_input-data[type=password], ",t+=".-th_input-data[type=email], ",t+=".-th_input-data[type=search], ",t+=".-th_input-data[type=tel], ",t+=".-th_input-data[type=number], ",t+=".-th_input-data[type=date], ",t+=".-th_input-data[type=week], ",t+=".-th_input-data[type=time], ",t+=".-th_input-data[type=url], ",t+="select.-th_input-data,  ",t+="textarea.-th_input-data, ",t+="span.-th_input-data, ",t+="div.-th_input-data, ",t+="label.-th_input-data, ",t+=".-th_input-suggestion{ ",t+="border: 1px ",t+=e.toHslString(),t+=" solid;",t+="}";var a=document.createElement("style");a.styleSheet?a.styleSheet.cssText=Styles:a.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(a)},initializeThemeCard:function(){},moveToFront:function(e,t){if(null!=e&&void 0!==e){var a,n=e;n instanceof jQuery&&(n=e.get(0)),null!=(a=null==t?n.parentElement:t instanceof jQuery?t.get(0):t)&&a.appendChild(n)}},moveToBack:function(e){if(null!=e&&void 0!==e){var t=e;t instanceof jQuery&&(t=e.get(0)),t.parentElement.insertBefore(t,t.parentElement.childNodes[0])}},recreate:function(e){if(null!=e&&void 0!==e){var t=e;t instanceof jQuery&&(t=e.get(0));var a=t.childElementCount;t.parentElement.insertBefore(t,t.parentElement.childNodes[a])}},getRectangle:function(e){var t=e;e instanceof jQuery||(t=$(e));var a=t.offset();return{top:a.top,left:a.left,height:t.outerHeight(),width:t.outerWidth()}},isInsideRectangle:function(e,t,a){return e>a.left&&e<a.left+a.width&&t>a.top&&t<a.top+a.height},isOverlappingRectagle:function(e,t){return!!(dbsfaces.ui.isInsideRectangle(e.left,e.top,t)||dbsfaces.ui.isInsideRectangle(e.left+e.width,e.top,t)||dbsfaces.ui.isInsideRectangle(e.left,e.top+e.height,t)||dbsfaces.ui.isInsideRectangle(e.left+e.width,e.top+e.height,t))},focusOnFirstInput:function(e){e instanceof jQuery||(xE=$(e)),$(document.activeElement).blur();var t=e.find("input:first, select:first, textarea:first");0!=t.length&&t[0].focus()},selectAll:function(e){var t=e;e instanceof jQuery&&(t=e[0]),setTimeout(function(){dbsfaces.ui.selectRange(t,0,t.value.length)},1)},selectNone:function(e){dbsfaces.ui.selectRange(e,0,0)},selectEnd:function(e){var t=e;e instanceof jQuery&&(t=e[0]),null!=t.value&&dbsfaces.ui.selectRange(t,t.selectionStart,t.value.length)},selectRange:function(e,t,a){var n=e;e instanceof jQuery&&(n=e[0]),"email"!=$(n).attr("type")&&n.__proto__.hasOwnProperty("selectionStart")&&n.setSelectionRange(t,a)},disableBackgroundInputs:function(e){var t=e;e instanceof jQuery||(t=$(e));var a=dbsfaces.util.jsid(t[0].id);$(".-th_action").not(a+" .-th_action").attr("disabled",!0),$(".dbs_menu").not(a+" .dbs_menu").attr("disabled",!0),$("input").not('[type="hidden"]').not(a+" input").attr("disabled",!0),$("button").not(a+" button").attr("disabled",!0),$("select").not(a+" select").attr("disabled",!0),$(".dbs_nav").not(a+" nav").attr("disabled",!0),$("a").not(a+" a").attr("disabled",!0),$("textarea").not(a+" textarea").attr("disabled",!0),dbsfaces.ui.enableForegroundInputs(t)},enableForegroundInputs:function(e){var t=e;e instanceof jQuery||(t=$(e)),t.find(".-th_action").not(".-disabled").attr("disabled",null),t.find(".dbs_menu").not(".-disabled").attr("disabled",null),t.find("input").not(".-disabled").attr("disabled",null),t.find("a").not(".-disabled").attr("disabled",null),t.find("button").not(".-disabled").attr("disabled",null),t.find("select").not(".-disabled").attr("disabled",null),t.find(".dbs_nav").not(".-disabled").attr("disabled",null),t.find("textarea").not(".-disabled").attr("disabled",null)},cssAllBrowser:function(e,t,a){var n=e;n instanceof jQuery||(n=$(e)),t=t.trim(),a=a.trim(),n.css("-webkit-"+t,a).css("-moz-"+t,a).css("-ms-"+t,a).css("-o-"+t,a).css(t,a)},cssFilterDropShadow:function(e,t){var a="drop-shadow("+t+")";dbsfaces.ui.cssFilter(e,a)},cssFilterBlur:function(e,t){var a="blur("+t+"px)";dbsfaces.ui.cssFilter(e,a)},cssFilterOpacity:function(e,t){var a="opacity("+t+")";dbsfaces.ui.cssFilter(e,a)},cssFilter:function(e,t){dbsfaces.ui.cssAllBrowser(e,"filter",t)},cssTransform:function(e,t){dbsfaces.ui.cssAllBrowser(e,"transform",t)},cssTransition:function(e,t){dbsfaces.ui.cssAllBrowser(e,"transition",t)},cssAnimation:function(e,t){dbsfaces.ui.cssAllBrowser(e,"animation",t)},getTransform:function(e){var t=e;t instanceof jQuery&&(t=$(e).get(0));var a=window.getComputedStyle(t,null);return a.getPropertyValue("-webkit-transform")||a.getPropertyValue("-moz-transform")||a.getPropertyValue("-ms-transform")||a.getPropertyValue("-o-transform")||a.getPropertyValue("transform")||"erro"},getTransformZ:function(e){var t=this.getTransformMatrix(e);return null==t||""==t?0:(""==(t=t.slice(4,5))&&(t=0),parseFloat(t))},getTransformX:function(e){var t=this.getTransformMatrix(e);return null==t||""==t?0:(""==(t=t.slice(2,3))&&(t=0),parseFloat(t))},getTransformY:function(e){var t=this.getTransformMatrix(e);return null==t||""==t?0:(""==(t=t.slice(3,4))&&(t=0),parseFloat(t))},getTransformMatrix3d:function(e){var t=this.getTransformMatrix(e);return null==t?"":t.slice(2,5)},getTransformMatrix:function(e){var t=dbsfaces.ui.getTransform(e);return t=t.match(/matrix(?:(3d)\(-{0,1}\d+\.?\d*(?:, -{0,1}\d+\.?\d*)*(?:, (-{0,1}\d+\.?\d*))(?:, (-{0,1}\d+\.?\d*))(?:, (-{0,1}\d+\.?\d*)), -{0,1}\d+\.?\d*\)|\(-{0,1}\d+\.?\d*(?:, -{0,1}\d+\.?\d*)*(?:, (-{0,1}\d+\.?\d*))(?:, (-{0,1}\d+\.?\d*))\))/)},aspectRatio:function(e,t,a){var n=t/a,i=e.width(),s=e.height();return i/s<n?i/t:s/a},getAllEvents:function(e){var t=[];for(var a in e)0===a.indexOf("on")&&t.push(a.slice(2));return t.join(" ")},recreateElement:function(e){var t=e;e instanceof jQuery||(t=$(e));var a=t.clone(!0);return t.before(a),t.remove(),a},getTimeFromTextLength:function(e){var t=e.length;return t=t/2*200},pvIsParentFixed:function(e){var t=e;t instanceof jQuery&&(t=e.get(0));var a=t.parentElement;return null!=a&&("fixed"==window.getComputedStyle(a).getPropertyValue("position")||dbsfaces.ui.pvIsParentFixed(a))},ajaxTriggerClick:function(e){0!=$(e.source).length&&"success"==e.status&&$(e.source).trigger("click")},ajaxTriggerLoaded:function(e){0!=$(e.source).length&&"success"==e.status&&$(e.source).trigger("loaded")},ajaxShowLoading:function(e){var t=e;t instanceof jQuery||(t=$(e)),t.off(dbsfaces.EVENT.ON_AJAX_BEGIN),t.on(dbsfaces.EVENT.ON_AJAX_BEGIN,function(e){dbsfaces.ui.showLoading("main",!0)}),t.off(dbsfaces.EVENT.ON_AJAX_COMPLETE),t.on(dbsfaces.EVENT.ON_AJAX_COMPLETE,function(e){window.clearTimeout(wAjaxTimeout),wAjaxTimeout=window.setTimeout(function(e){dbsfaces.ui.showLoadingError("main")},1e3)}),t.off(dbsfaces.EVENT.ON_AJAX_SUCCESS),t.on(dbsfaces.EVENT.ON_AJAX_SUCCESS,function(e){window.clearTimeout(wAjaxTimeout),dbsfaces.ui.showLoading("main",!1)})},showLoading:function(e,t){var a=dbsfaces.util.jsid(e+"_loading");t?0==$(a).length&&$("body").append("<span id='"+a.replace("#","")+"' class='-loading -large'/>"):0<$(a).length&&$(a).remove()},showLoadingError:function(e){var t=dbsfaces.util.jsid(e+"_loading");$(t).fadeOut(2e3,function(){$(t).remove(),$(e).removeClass("-ajaxBegin")})},pointerEventToXY:function(e){var t={x:0,y:0};if("touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type){var a=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=a.pageX-$(window).scrollLeft(),t.y=a.pageY-$(window).scrollTop()}else"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(t.x=e.clientX,t.y=e.clientY);return t},getRect:function(e){var t={width:0,height:0,top:0,bottom:0,left:0,right:0,x:0,y:0};if(null==e||void 0===e||0==e.length)return null;var a=e;a instanceof jQuery&&(a=e[0]);var n=a.getBoundingClientRect();return t.width=n.width,t.height=n.height,t.top=n.top-$(window).scrollTop(),t.bottom=n.bottom,t.left=n.left-$(window).scrollLeft(),t.right=n.right,t.x=n.x,t.y=n.y,t},getPosition:function(e){var t=e;t instanceof jQuery&&(t=e[0]);var a=t.getBoundingClientRect(),n=document.body,i=document.documentElement,s=window.pageYOffset||i.scrollTop||n.scrollTop,o=window.pageXOffset||i.scrollLeft||n.scrollLeft,l=i.clientTop||n.clientTop||0,d=i.clientLeft||n.clientLeft||0,r=a.top+s-l,c=a.left+o-d;return{top:Math.round(r),left:Math.round(c)}}},dbsfaces.util={exists:function(e){return!dbsfaces.util.isEmpty(e)&&0<$(e).length},getNotNull:function(e,t){return null==e?t:e},getNotEmpty:function(e,t){return dbsfaces.util.isEmpty(e)?t:e},isUndefined:function(e){return void 0===e},getNotUndefined:function(e,t){return dbsfaces.util.isUndefined(e)?t:e},isEmpty:function(e){return null==e||(""==e||!!dbsfaces.util.isUndefined(e))},trigger:function(e,t){if(dbsfaces.util.exists(t)&&!dbsfaces.util.isEmpty(e)){var a=$.Event(e,{dbs:!0});return $(t).trigger(a),a}return alert("Parametros inválidos! pId="+t+" pEventName="+e+" dbsFaces.trigger"),!1},isiOS:function(){var e=navigator.userAgent.toLowerCase();return!!(e.match(/iphone/i)||e.match(/ipod/i)||e.match(/ipad/i))},isAndroid:function(){return!!navigator.userAgent.toLowerCase().match(/android/i)},isBlackBerry:function(){var e=navigator.userAgent.toLowerCase();return!(!e.match(/blackberry/i)&&!e.match(/bb/i))},isKindle:function(){var e=navigator.userAgent.toLowerCase();return!(!e.match(/kindle/i)&&!e.match(/kf/i))},isMobile:function(){return!!(this.isiOS()||this.isBlackBerry()||this.isKindle()||this.isAndroid())},supports:function(e){var t=document.createElement("div"),a="Khtml Ms O Moz Webkit".split(" "),n=a.length;if(e in t.style)return!0;for(e=e.replace(/^[a-z]/,function(e){return e.toUpperCase()});n--;)if(a[n]+e in t.style)return!0;return!1}},dbsfaces.util.jsid=function(e){return null==e||void 0===e?"":(0<(e=(e=(e=e.trim().replace(/^(:)/,"")).replace(/\\:/g,":")).replace(/:/g,"\\:")).length&&"#"!=e.charAt(0)&&(e="#"+e),e)},dbsfaces.date={isDate:function(e,t,a,n,i,s){t-=1;var o=new Date(e,t,a,n,i,s);return o.getDate()!=a?"":o.getMonth()!=t?"":o.getFullYear()!=e?"":o}},dbsfaces.math={PICircle:2*Math.PI,PICircleFactor:2*Math.PI/100,round:function(e,t){if(!isNaN(e)){var a=Math.pow(10,t),n=Number(Math.round(e*a).toPrecision(16));return(n=Math[n<0?"ceil":"floor"](n))/a}},trunc:function(e,t){if(!isNaN(e)){var a=Math.pow(10,t),n=Number((e*a).toPrecision(16));return(n=Math[n<0?"ceil":"floor"](n))/a}},circlePointAngle:function(e,t,a){if(!isNaN(a)&&!isNaN(t)&&null!=a){(a%=360)<0&&(a=360+a);var n=dbsfaces.math.PICircle*(a/360);return dbsfaces.math.circlePoint(e,t,n)}},circlePoint:function(e,t,a){var n={};return n.x=dbsfaces.math.round(e.x+t*Math.sin(a),6),n.y=dbsfaces.math.round(e.y-t*Math.cos(a),6),n},angleFromTreePoints:function(e,t,a){var n=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2)),i=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2)),s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return 0==n&&0==i&&0==s?0:Math.acos((i*i+n*n-s*s)/(2*i*n))*(180/Math.PI)},rightTriangleVertexAngle:function(e,t){return Math.asin(t/e)*(180/Math.PI)},circleLength:function(e,t){return dbsfaces.math.PICircle*e*(t/360)},circleLineIntersection:function(e,t,a,n){var i={x:0,y:0},s={x:0,y:0},o=Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)),l=(n.x-a.x)/o,d=(n.y-a.y)/o,r=l*(e.x-a.x)+d*(e.y-a.y),c={x:r*l+a.x,y:r*d+a.y},u=Math.sqrt(Math.pow(c.x-e.x,2)+Math.pow(c.y-e.y,2));if(u<t){var h=Math.sqrt(Math.pow(t,2)-Math.pow(u,2));return i.x=(r-h)*l+a.x,i.y=(r-h)*d+a.y,s.x=(r+h)*l+a.x,s.y=(r+h)*d+a.y,{point1:i,point2:s}}return u==t?{point1:c,point2:c}:null},getBits:function(e){for(var t=0,a=[],n=e,i=e;0<i;){if(1&n){var s=Math.pow(2,t);i-=s,a.push(s)}n=e>>++t}return a},distanceBetweenTwoPoints:function(e,t,a,n){var i,s;return null==a?(i=e.x-t.x,s=e.y-t.y):(i=e-a,s=t-n),Math.sqrt(i*i+s*s)},sign:function(e){return 0<e?1:e<0?-1:0}},dbsfaces.number={isNumber:function(e){return!isNaN(dbsfaces.number.parseFloat(e))&&isFinite(e)},sizeInBytes:function(e){if(void 0!==e){var t=e.trim().toUpperCase(),a=t.indexOf("KB"),n=1024;if(-1==a&&(-1!=(a=t.indexOf("MB"))?n*=n:-1!=(a=t.indexOf("GB"))?n*=n:-1!=(a=t.indexOf("TB"))?n*=n:(-1==(a=t.indexOf("B"))&&(a=t.length),n=1)),t=t.substr(0,a),dbsfaces.number.isNumber(t))return t*n}return 0},getOnlyNumber:function(e){return e.replace(/[^-\d\.]/g,"")},parseFloat:function(e){return Number(e)===e?e:"string"==typeof e||e instanceof String?(e=(e=e.replaceAll(dbsfaces.groupSeparator,"")).replaceAll(dbsfaces.decimalSeparator,"."),parseFloat(e)):void 0}},dbsfaces.format={number:function(e,t,a){e=dbsfaces.number.parseFloat(e),e=dbsfaces.math.round(e,t);var n={minimumFractionDigits:t,useGrouping:!0};return void 0!==a&&(n.useGrouping=a),e.toLocaleString(dbsfaces.locale,n)},numberSimplify:function(e,t){void 0===t&&(t=2);var a=dbsfaces.number.parseFloat(e),n=Math.sign(a)||1,i=(a=Math.abs(a),dbsfaces.math.round(a,0).toString().length);if(0!=i){var s=a/Math.pow(10,i-1-(i-1)%3),o="";return 15<i?o=" quatri":12<i?o=" tri":9<i?o=" bi":6<i?o=" mi":3<i?o=" mil":s=a,s*=n,dbsfaces.format.number(s,t)+o}},getDecimalSeparator:function(){return 0<=dbsfaces.format.number(1.1,1).indexOf(".")?".":","},getGroupSeparator:function(){return 0<=dbsfaces.format.number(1.1,1).indexOf(".")?",":"."},splitNumber:function(e){var t={int:"",dec:""};if(null!=e){var a=dbsfaces.number.parseFloat(e),n=Math.abs(a);t.int=parseInt(n),t.dec=String(dbsfaces.math.round(n-t.int,2)).substring(2),0<t.dec.length&&(t.dec=dbsfaces.decimalSeparator+t.dec),a<0&&(t.int="-"+t.int)}return t},mask:function(e,t,a){if(null==e||null==a)return"";if(""==t)return e;for(var n,i="",s=e,o=0,l=0;l<t.length;l++){var d=t.substring(l,l+1).toUpperCase();if("9"==d||"A"==d){for(n=!1;o<s.length;){var r=s.charAt(o);if(o++,/[0-9A-Za-z]/.test(r)){i+=r,n=!0;break}}n||(i+=a)}else i+=d}return i}},dbsfaces.string={fromCharCode:function(e){return String.fromCharCode(96<=e&&e<=105?e-48:e)},repeat:function(e,t){return Array(t+1).join(e)}},dbsfaces.ajax={request:function(e,t,a,n,i,s,o,l){if(null!=e){e=dbsfaces.util.jsid(e);var d=$(e),r=d.closest("form");if(0!=r.length){var c=r.attr("action");if(null!=c){null!=o&&"undefined"!=o||(o=0),null!=l&&"undefined"!=l||(l=0);var u=r.serialize();u+="&"+dbsfaces.JAVAX.SOURCE+"="+d[0].id,u+="&"+dbsfaces.JAVAX.PARTIAL_AJAX+"=true",u+="&"+dbsfaces.JAVAX.PARTIAL_EXECUTE+"="+d[0].id,null!=t&&(u+=" "+(t=(t=t.replace("@this",d[0].id)).replace("@form",r[0].id))),null!=a&&(a=(a=a.replace("@this",d[0].id)).replace("@form",r[0].id),u+="&"+dbsfaces.JAVAX.PARTIAL_RENDER+"="+a),"undefined"!=s&&null!=s&&(u+="&params="+s);var h={};h.source=e;var f={url:c,async:!0,type:"POST",cache:!1,timeout:0,crossDomain:!0,data:u,dataType:"xml",xhr:function(){var e=new XMLHttpRequest;return e.onprogress=this.onprogress,e.addEventListener("readystatechange",function(e){n&&"function"==typeof n&&(h.type="event",h.status="statechange",h.readyState=e.target.readyState,n(h))},!1),e},beforeSend:function(e){e.setRequestHeader("Faces-Request","partial/ajax")},error:function(e,t,a){console.log("erro"),i&&"function"==typeof i&&(h.type="error",h.status=t,i(h))},complete:function(e,t){n&&"function"==typeof n&&(h.type="event",h.status=t,n(h))},success:function(e,t,a){dbsfaces.ajax.response(e),n&&"function"==typeof n&&(h.type="event",h.status=t,n(h))},global:!1};0<o?(clearTimeout(d.data("pushtimeout")),d.data("pushtimeout",setTimeout(function(e){$.ajax(f)},o))):$.ajax(f)}}}},response:function(e){xUpdates=$(e).find("update");for(var t=0;t<xUpdates.length;t++){var a=xUpdates.eq(t),n=a.attr("id"),i=a.text(),s=$(dbsfaces.util.jsid(n));s.replaceWith(i),s.trigger("loaded"),(s=$(dbsfaces.util.jsid(n))).hasClass("-posUpdate")&&(s.css("opacity","1"),s.on(dbsfaces.EVENT.ON_TRANSITION_END,function(e){$(e.target).removeClass("-posUpdate")}))}},onprogress:function(e){}},dbsfaces.onajax=function(e,t){xEle=$(e.source),0!=xEle.length&&("begin"==e.status?(xEle.addClass("-ajaxBegin"),xEle.trigger(dbsfaces.EVENT.ON_AJAX_BEGIN,t)):"complete"==e.status?xEle.trigger(dbsfaces.EVENT.ON_AJAX_COMPLETE,t):"success"==e.status&&(xEle.removeClass("-ajaxBegin"),xEle.trigger(dbsfaces.EVENT.ON_AJAX_SUCCESS,t)))},dbsfaces.onajaxerror=function(e){return xEle=$(e.source),xEle.removeClass("-ajaxBegin"),xEle.trigger(dbsfaces.EVENT.ON_AJAX_ERROR),!1},null==dbsfaces.locale&&dbsfaces.setLocale(window.navigator.language),dbs_accordion=function(e){var t=!1;$(window).resize(function(){0==t&&(t=!0,0,$(document).find("div.dbs_accordion_section.-opened")&&dbsfaces.accordion.contentSectionOpened($(document).find("div.dbs_accordion"),!0),t=!200)}),$("div.dbs_accordion_section-container > .-cover, div.dbs_accordion_section-caption").click(function(){var e=$(this).closest("div.dbs_accordion_section"),t="#"+$(e).closest("div.dbs_accordion").attr("id");t=dbsfaces.util.jsid(t),$(e).hasClass("-opened")?$(t).children("div.dbs_accordion_section").removeClass("-closed").removeClass("-opened").addClass("-normal"):$(e).hasClass("-closed")?($(t).children("div.dbs_accordion_section.-opened").removeClass("-opened").addClass("-closed"),$(e).removeClass("-closed").addClass("-opened")):$(e).hasClass("-normal")&&($(e).removeClass("-normal").addClass("-opened"),$(t).children("div.dbs_accordion_section.-normal").removeClass("-normal").addClass("-closed")),dbsfaces.accordion.contentSectionOrganize(t)})},dbsfaces.accordion={contentSectionOpened:function(e,t){var a=parseInt($(e).css("height"));42<a&&(a=a-42+"px"),t?($(e).children("div.dbs_accordion_section.-opened").animate({height:a},wsAnimationTime),$(e).children("div.dbs_accordion_section").hasClass("-normal")||$(e).find("div.dbs_accordion_section-container > .-cover").animate({height:0},wsAnimationTime)):$(e).children("div.dbs_accordion_section.-opened").height(a)},contentSectionOrganize:function(e){$(e).find("div.dbs_accordion_section.-closed .-caption").css("color","rgb(130,130,130)"),$(e).children("div.dbs_accordion_section.-closed").animate({height:"21px"},wsAnimationTime),$(e).children("div.dbs_accordion_section").hasClass("-normal")&&($(e).children("div.dbs_accordion_section.-normal").animate({height:"33.4%"},wsAnimationTime),$(e).find("div.dbs_accordion_section-container > .-cover").animate({height:"100%"},wsAnimationTime)),dbsfaces.accordion.contentSectionOpened(e,!0),$(e).find("div.dbs_accordion_section.-normal .-caption, div.dbs_accordion_section.-opened .-caption").css("color","")}},dbs_button=function(e){dbsfaces.ui.ajaxShowLoading(e)},dbsfaces.button={},dbs_chart=function(e,t,a,n){var i=$(e);dbsfaces.setLocale(n),dbsfaces.chart.initialize(i,t,a),i.on("mouseleave",function(e){return i=$(this),dbsfaces.chart.selectChartValue(i.data("data"),null),e.stopImmediatePropagation(),!1})},dbsfaces.chart={initialize:function(e,t,a){var n=dbsfaces.chart.pvInitializeData(e,t,a);dbsfaces.chart.pvInitializeChartValues(n),dbsfaces.chart.pvInitializeLayout(n)},pvInitializeData:function(e,t,a){var n=e.closest(".dbs_charts"),i={dom:{self:e,parent:n,childrenData:[],caption:null,captionText:null,chart:e.children(".-chart"),values:e.find(".-chart > .-values"),info:e.children(".-info"),minChartValueData:null,maxChartValueData:null,maxDisplayValueChartValueData:null,maxLabelChartValueData:null,path:null,links:null,relationalCaptions:null,hoverChartValueData:null,hoverLinkChartValueData:null,delta:null,deltaHandle1Data:null,deltaHandle2Data:null,deltaInfo:null,deltaPerc:null,deltaPercInt:null,deltaPercDec:null,deltaValue:null,deltaLabel:null,deltaCircle:null,movingDeltaHandleData:null,leftDeltaHandleData:null,rightDeltaHandleData:null},type:n.attr("type"),index:0,width:null,height:null,totalValue:0,medValue:null,originalValues:t,relationalCaptions:a,relationalCaptionsCount:1,relationships:[],color:e.attr("color"),colorInverted:null,colorLight:null,currentColorInverted:tinycolor(n.css("color")).invertLightness().setAlpha(1).toString(),findPointTimeout:null,valueDecimalPlaces:parseInt(e.attr("vdp")),valuePrefix:e.attr("vpf"),valueSufix:e.attr("vsf"),isPerc:"%"==e.attr("vsf"),showDelta:e.hasClass("-showDelta"),globalSequence:0,hoverLink:!1};return void 0===i.color&&(i.color=null),void 0===i.valuePrefix&&(i.valuePrefix=""),void 0===i.valueSufix&&(i.valueSufix=""),null==i.relationalCaptions&&(i.relationalCaptions=[]),e.data("data",i),i},pvInitializeChartValues:function(s){if(s.dom.values.empty(),s.dom.childrenData=[],s.dom.maxChartValueData=null,s.dom.minChartValueData=null,s.dom.maxDisplayValueChartValueData=null,s.dom.maxLabelChartValueData=null,s.relationships=[],s.relationalCaptionsCount=1,s.totalValue=0,(s.medValue=0)<s.originalValues.length){for(var e=0;e<s.originalValues.length;e++){s.originalValues[e].value=dbsfaces.math.round(s.originalValues[e].value,s.valueDecimalPlaces);var o=s.originalValues[e];o.displayValue=void 0===o.displayValue||""==o.displayValue?o.value:o.displayValue,"pie"==s.type?s.totalValue+=Math.abs(o.value):s.totalValue+=o.value;var t=[];void 0===o.label?t.push(e):t=o.label.split(/\s*;\s*/),s.relationalCaptionsCount=Math.max(s.relationalCaptionsCount,t.length);var l=[];t.forEach(function(e,t){for(var a=null,n=e.trim(),i=0;i<s.dom.childrenData.length;i++)if(s.dom.childrenData[i].relationalGroupIndex==t&&s.dom.childrenData[i].label==n){a=s.dom.childrenData[i];break}null==a&&(a=dbsfaces.chartValue.initialize(s,e,t,o),s.dom.childrenData.push(a)),a.originalValues.push(o),a.value+=o.value,a.displayValue=s.valuePrefix,""==s.valuePrefix.valueSufix||"%"==s.valuePrefix.valueSufix?a.displayValue+=dbsfaces.format.number(a.value,s.valueDecimalPlaces):a.displayValue+=dbsfaces.format.numberSimplify(a.value,s.valueDecimalPlaces),a.displayValue+=s.valueSufix,(null==s.dom.minChartValueData||a.value<s.dom.minChartValueData.value)&&(s.dom.minChartValueData=a),(null==s.dom.maxChartValueData||a.value>s.dom.maxChartValueData.value)&&(s.dom.maxChartValueData=a),(null==s.dom.maxDisplayValueChartValueData||a.displayValue.length>s.dom.maxDisplayValueChartValueData.displayValue.length)&&(s.dom.maxDisplayValueChartValueData=a),(null==s.dom.maxLabelChartValueData||a.label.length>s.dom.maxLabelChartValueData.label.length)&&(s.dom.maxLabelChartValueData=a),l.push(a)});for(var a=0;a<l.length-1;a++)for(var n=dbsfaces.chart.pvInitializeChartValuesAddKeyToBinaryKey("",l[a].key),i=a+1;i<l.length;i++){for(var d=dbsfaces.chart.pvInitializeChartValuesAddKeyToBinaryKey(n,l[i].key),r=null,c=0;c<s.relationships.length;c++)if(s.relationships[c].key==d){r=s.relationships[c];break}null==r&&(r={key:d,total:0},s.relationships.push(r)),r.total+=o.value}}s.medValue=s.totalValue*s.relationalCaptionsCount/s.dom.childrenData.length,"pie"==s.type&&dbsfaces.chart.pvInitializeChartValuesSort(s)}},pvInitializeChartValuesSort:function(e){"pie"==e.type&&e.dom.childrenData.sort(function(e,t){var a=t.relationalGroupIndex-e.relationalGroupIndex;return 0==a&&(a=t.value-e.value),a})},pvInitializeChartValuesAddKeyToBinaryKey:function(e,t){var a=t-e.length+1;0<a&&(e=dbsfaces.string.repeat("0",a)+e);var n=e.length-t-1,i=n+1;return e=e.substr(0,n)+"1"+e.substring(i)},pvInitializeLayout:function(e){"line"!=e.type&&0==e.dom.childrenData.length||"line"==e.type&&e.dom.childrenData.length<2||0!=e.dom.childrenData.length&&(e.width=e.dom.chart[0].getBoundingClientRect().width,e.height=e.dom.chart[0].getBoundingClientRect().height,dbsfaces.chart.pvInitializeLayoutChartValueCreateElement(e),dbsfaces.chart.pvInitializeLayoutDelta(e),"line"==e.type?dbsfaces.chart.pvInitializeLayoutChartLine(e):"pie"==e.type?dbsfaces.chart.pvInitializeLayoutChartPie(e):e.type,dbsfaces.chart.pvInitializeLayoutCreateRelationalCaptions(e))},pvInitializeLayoutChartValueCreateElement:function(a){var n=0,i=0;null!=a.dom.values&&a.dom.values.remove(),a.dom.values=dbsfaces.svg.g(a.dom.chart,"-values",null,null),a.dom.childrenData.forEach(function(e,t){i!=e.relationalGroupIndex&&(n=0),e.index=t,dbsfaces.chart.pvInitializeLayoutChartValuesCreateDom(a,e),0!=t&&t!=a.dom.childrenData.length-1||e.dom.self.addClass("-showLabel"),"pie"==a.type?n+=Math.abs(e.value):n+=e.value,e.totalValue=n,i=e.relationalGroupIndex}),a.dom.minChartValueData.dom.self.addClass("-min"),a.dom.maxChartValueData.dom.self.addClass("-max")},pvInitializeLayoutChartValuesCreateDom:function(i,e){dbsfaces.chartValue.initializeLayoutCreateDom(i,e),dbsfaces.ui.moveToBack(e.dom.point),"pie"!=i.type&&"bar"!=i.type||(e.dom.self.on("mousemove touchmove touchstart",function(e){var t=null;if("touchmove"==e.type){var a=e.originalEvent.changedTouches[0],n=document.elementFromPoint(a.clientX,a.clientY);t=$(n).closest(".dbs_chartValue").data("data")}else t=$(this).data("data");return null!=t&void 0!==t&&dbsfaces.chart.selectChartValue(i,t),e.stopImmediatePropagation(),!1}),e.dom.self.on("mouseup",function(e){var t=$(this).data("data");return dbsfaces.chart.pvActivateHoverLink(t.dom.parent.data("data")),e.stopImmediatePropagation(),e.preventDefault(),!1}))},pvInitializeLayoutCreateRelationalCaptions:function(i){"pie"==i.type&&i.relationalCaptions.forEach(function(e,t){var a=i.dom.self[0].id+":relationalPath_"+t;dbsfaces.svg.path(i.dom.relationalCaptions,null,"-path",null,{id:a});var n=dbsfaces.svg.text(i.dom.relationalCaptions,null,null,null,"-caption",null,{relationalGroupIndex:t,fill:i.currentColor});dbsfaces.svg.textPath(n,a,e,null,null,{startOffset:"50%"})})},pvInitializeLayoutChartLineDeltaHandle:function(e,t){var a=dbsfaces.svg.g(e.dom.delta,"-handle",null,{handle:t});return dbsfaces.chart.pvInitializeLayoutChartLineDeltaHandleData(e,a,t)},pvInitializeLayoutChartLineDeltaHandleData:function(e,t,a){var n={dom:{self:t,rect:dbsfaces.svg.rect(t,null,null,null,null,null,null,"-rect",null,null),handle:dbsfaces.chart.pvInitializeLayoutChartLineCreateHandle(e,t),chartValueData:null},number:a};return t.data("data",n),n},pvInitializeLayoutChartLineCreateHandle:function(t,e){var a=dbsfaces.svg.svg(e,null,null,"1.5em","1.5em","-handle","overflow: visible;",{viewBox:"0 0 16 16"});return dbsfaces.svg.circle(a,"0","0",null,"-touch",null,{r:"16",fill:"transparent"}),dbsfaces.svg.rect(a,"-3","-8","6","16","2","2","-rect",null,{fill:t.currentColorInverted,stroke:"currentColor","stroke-width":"1px"}),dbsfaces.svg.line(a,"-1","-4","-1","4","-line",null,{stroke:"currentColor","stroke-width":"1px"}),dbsfaces.svg.line(a,"1","-4","1","4","-line",null,{stroke:"currentColor","stroke-width":"1px"}),e.on("mousedown touchstart",function(e){return dbsfaces.chart.setMovingDeltaHandleData(t,$(this).data("data")),e.stopImmediatePropagation(),!1}),e.on("mousemove touchmove",function(e){if("mousemove"!=e.originalEvent.type||0!=e.which)return dbsfaces.chart.chartLinefindPoint(e,t),e.stopImmediatePropagation(),!1;dbsfaces.chart.setMovingDeltaHandleData(t,null)}),t.dom.self.on("mouseup touchend",function(e){return dbsfaces.chart.setMovingDeltaHandleData(t,null),e.stopImmediatePropagation(),!1}),t.dom.self.on("mouseleave",function(e){dbsfaces.chart.setMovingDeltaHandleData(t,null)}),a},pvInitializeLayoutDelta:function(e){"line"==e.type&&(!e.showDelta||e.dom.childrenData.length<2)||(null!=e.dom.delta&&e.dom.delta.remove(),e.dom.delta=dbsfaces.svg.g(e.dom.chart,"-delta",null,null),e.dom.deltaInfo=dbsfaces.svg.g(e.dom.delta,"-info",null,null),e.dom.deltaPerc=dbsfaces.svg.text(e.dom.deltaInfo,null,null,null,"-perc",null,null),e.dom.deltaPercInt=dbsfaces.svg.tspan(e.dom.deltaPerc,null,"-int",null,null),e.dom.deltaPercDec=dbsfaces.svg.tspan(e.dom.deltaPerc,null,"-dec",null,null),"line"==e.type?(e.deltaHandle1Data=dbsfaces.chart.pvInitializeLayoutChartLineDeltaHandle(e,1),e.dom.leftDeltaHandleData=e.deltaHandle1Data,e.deltaHandle2Data=dbsfaces.chart.pvInitializeLayoutChartLineDeltaHandle(e,2),e.dom.rightDeltaHandleData=e.deltaHandle2Data):"pie"==e.type&&(e.dom.deltaCircle=dbsfaces.svg.circle(e.dom.delta,null,null,null,"-circle",null,null),e.dom.deltaValue=dbsfaces.svg.text(e.dom.deltaInfo,null,null,null,"-value",null,null),e.dom.deltaLabel=dbsfaces.svg.text(e.dom.deltaInfo,null,null,null,"-label",null,null),dbsfaces.ui.moveToBack(e.dom.deltaCircle),e.dom.delta.on("mousedown touchstart",function(e){return dbsfaces.chart.pvActivateHoverLink($(this).closest(".dbs_chart").data("data")),e.stopImmediatePropagation(),!1}),dbsfaces.ui.moveToFront(e.dom.values)),dbsfaces.chart.pvShowDelta(e,null))},pvInitializeLayoutChartLine:function(a){null!=a.dom.path&&a.dom.path.remove(),a.dom.path=dbsfaces.svg.path(a.dom.chart,null,"-path","stroke:"+a.color,null),dbsfaces.ui.moveToBack(a.dom.path),a.dom.self.on("mousemove touchmove touchstart",function(e){var t=$(this);return t.hasClass("-selected")&&(clearTimeout(a.findPointTimeout),a.findPointTimeout=setTimeout(function(){dbsfaces.chart.chartLinefindPoint(e,t.data("data"))},5)),e.stopImmediatePropagation(),!1})},pvInitializeLayoutChartPie:function(e){null!=e.dom.links&&e.dom.links.remove(),e.dom.links=dbsfaces.svg.g(e.dom.chart,"-links",null,null),dbsfaces.ui.moveToBack(e.dom.links),null!=e.dom.relationalCaptions&&e.dom.relationalCaptions.remove(),e.dom.relationalCaptions=dbsfaces.svg.g(e.dom.chart,"-relationalCaptions",null,null),dbsfaces.ui.moveToBack(e.dom.relationalCaptions)},pvShowDelta:function(e,t){"line"==e.type?dbsfaces.chart.pvShowDeltaChartLine(e,t):"pie"==e.type?dbsfaces.chart.pvShowDeltaChartPie(e,t):e.type},pvShowDeltaChartPie:function(e,t){e.hoverLink?e.dom.hoverLinkChartValueData=dbsfaces.chart.pvHoverLink(e,t,e.dom.hoverLinkChartValueData):e.dom.hoverChartValueData=dbsfaces.chart.pvHover(e,t,e.dom.hoverChartValueData)},pvShowDeltaChartLine:function(e,t){if(null!=e.dom.movingDeltaHandleData){var a=e.dom.parent.data("data");if(null!=a&&a.showDelta){var n;if(dbsfaces.chart.pvHover(e,null,e.dom.rightDeltaHandleData.dom.chartValueData),dbsfaces.chart.pvHover(e,null,e.dom.leftDeltaHandleData.dom.chartValueData),e.dom.movingDeltaHandleData.dom.chartValueData=t,e.dom.movingDeltaHandleData==e.dom.rightDeltaHandleData?t.x<parseFloat(e.dom.leftDeltaHandleData.dom.handle.svgAttr("x"))&&(e.dom.rightDeltaHandleData=e.dom.leftDeltaHandleData,e.dom.leftDeltaHandleData=e.dom.movingDeltaHandleData):t.x>parseFloat(e.dom.rightDeltaHandleData.dom.handle.svgAttr("x"))&&(e.dom.leftDeltaHandleData=e.dom.rightDeltaHandleData,e.dom.rightDeltaHandleData=e.dom.movingDeltaHandleData),null!=e.dom.leftDeltaHandleData.dom.chartValueData)(n=e.dom.leftDeltaHandleData.dom.chartValueData.x-a.infoWidth)<0&&(n=0),e.dom.leftDeltaHandleData.dom.rect.svgAttr("width",n),e.dom.leftDeltaHandleData.dom.rect.svgAttr("x",a.infoWidth),dbsfaces.chart.pvHover(e,e.dom.leftDeltaHandleData.dom.chartValueData,null);if(null!=e.dom.rightDeltaHandleData.dom.chartValueData)(n=a.width-e.dom.rightDeltaHandleData.dom.chartValueData.x+a.infoWidth)<0&&(n=0),e.dom.rightDeltaHandleData.dom.rect.svgAttr("width",n),e.dom.rightDeltaHandleData.dom.rect.svgAttr("x",e.dom.rightDeltaHandleData.dom.chartValueData.x),dbsfaces.chart.pvHover(e,e.dom.rightDeltaHandleData.dom.chartValueData,null);e.dom.movingDeltaHandleData.dom.handle.svgAttr("x",t.x);var i=dbsfaces.chart.pvCalcDeltaChartLine(e);dbsfaces.chart.pvShowDeltaPerc(e,i)}}},pvShowDeltaChartPieValues:function(e,t,a,n){null==t&&(1==e.dom.childrenData.length?(n=e.dom.childrenData[0].label,a=e.dom.childrenData[0].value,t="100%"):a=n=null),dbsfaces.chart.pvShowDeltaPerc(e,t),dbsfaces.chart.pvShowDeltaValue(e,a,n)},pvShowDeltaValue:function(e,t,a){var n,i=a;null==t?(n=e.valuePrefix+dbsfaces.format.number(e.totalValue,e.valueDecimalPlaces)+e.valueSufix,dbsfaces.math.round(e.dom.deltaCircle[0].getBoundingClientRect().width/n.length*1.1,1)):(null==i&&(i=""),n=e.valuePrefix+dbsfaces.format.number(t,e.valueDecimalPlaces)+e.valueSufix),e.dom.deltaValue.text(n),null!=e.dom.deltaLabel&&e.dom.deltaLabel.text(i)},pvShowDeltaPerc:function(e,t){if(null==t)e.dom.deltaPercInt.text(""),e.dom.deltaPercDec.text("");else{var a=dbsfaces.format.splitNumber(t);e.dom.deltaPercInt.text(a.int),e.dom.deltaPercDec.text(a.dec+"%")}},pvHoverLink:function(e,t,a){if(0!=e.relationships.length){if(null!=a){if(null!=t&&a==t)return t;a.dom.self.removeClass("-hoverLink"),e.dom.self.removeClass("-hoverLink"),"pie"==e.type&&(n=e.dom.links.children(".-linkHover")).removeClass("-hover")}var n;if(null!=t&&1<e.dom.childrenData.length)if(e.dom.self.addClass("-hoverLink"),"pie"==e.type)if(t.dom.self.addClass("-hoverLink"),0<(n=e.dom.links.children(".-linkHover[key='"+t.key+"'][b='"+e.dom.hoverChartValueData.key+"']")).length){n.svgAddClass("-hover");var i=n.data("data");dbsfaces.chart.pvSetDeltaColor(e,t,t.dom.self.css("color"),t.colorInverted),dbsfaces.chart.pvShowDeltaChartPieValues(e,i.perc,i.value,t.label)}else dbsfaces.chart.pvShowDeltaChartPieValues(e,t.perc,t.value,t.label);return t}},pvHover:function(e,t,a){if(null!=a){if(null!=t&&a==t)return t;a.dom.self.removeClass("-hover"),e.dom.self.removeClass("-hover"),e.dom.parent.removeClass("-hover"),"pie"==e.type&&(e.dom.links.children(".-hover").removeClass("-hover"),e.dom.values.children(".-link").removeClass("-link"),dbsfaces.chart.pvSetDeltaColor(e,t,"",""))}if(null!=t&&1<e.dom.childrenData.length){if(e.dom.self.addClass("-hover"),t.dom.self.addClass("-hover"),e.dom.parent.addClass("-hover"),"line"==e.type||"bar"==e.type)dbsfaces.ui.moveToFront(t.dom.self);else if("pie"==e.type){e.dom.links.children(".-link[b='"+t.key+"']").each(function(){var t=$(this);t.addClass("-hover"),e.dom.childrenData.forEach(function(e){e.key==t.attr("key")&&e.dom.self.addClass("-link")})}),dbsfaces.chart.pvSetDeltaColor(e,t,t.dom.self.css("color"),t.colorInverted),dbsfaces.chart.pvShowDeltaChartPieValues(e,t.perc,t.value,t.label)}}else"pie"==e.type&&dbsfaces.chart.pvShowDeltaChartPieValues(e,null);return e.showDelta&&dbsfaces.ui.recreate(e.dom.delta),t},pvSetDeltaColor:function(e,t,a,n){e.showDelta&&(e.dom.deltaInfo.svgAttr("color",n),e.hoverLink?e.dom.deltaCircle.svgAttr("stroke",a):(e.dom.delta.css("color",a),e.dom.deltaCircle.svgAttr("stroke",tinycolor(e.dom.parent.css("color")).invertLightness().setAlpha(1).toString())))},pvActivateHoverLink:function(e){e.dom.self.toggleClass("-hoverLink"),e.hoverLink=e.dom.self.hasClass("-hoverLink"),e.hoverLink||dbsfaces.chart.selectChartValue(e,null)},pvCalcDeltaChartLine:function(e){if(null==e.dom.rightDeltaHandleData.dom.chartValueData||null==e.dom.rightDeltaHandleData.dom.chartValueData)return null;var t,a=e.dom.leftDeltaHandleData.dom.chartValueData.value,n=e.dom.rightDeltaHandleData.dom.chartValueData.value;return null==e.dom.parent.data("data")||0==e.isPerc&&(0==a||0==n||dbsfaces.math.sign(a)!=dbsfaces.math.sign(n))?null:(e.isPerc?(t=n-a,t*=100):(t=a<0?a/n:n/a,t=100*((t=dbsfaces.math.round(t,4))-1)),dbsfaces.format.number(t,2))},chartLinefindPoint:function(e,t){if(!(t.dom.childrenData.length<2)){t.dom.parent.data("data"),t.dom.path[0];for(var a,n,i,s,o=dbsfaces.ui.pointerEventToXY(e),l=dbsfaces.math.round(o.x-t.dom.self.offset().left+$(window).scrollLeft()-parseFloat(t.dom.self.css("padding-left")),1),d=0,r=t.dom.childrenData.length-1,c=Math.round((r-d)/2),u=t.dom.childrenData[d],h=t.dom.childrenData[r],f=null;r-d!=1&&(u.x!=l||h.x!=l);)c=Math.max(Math.trunc(c/2),1),void 0!==t.dom.childrenData[d+1]&&(a=t.dom.childrenData[d+1].x),void 0!==t.dom.childrenData[d-1]&&(n=t.dom.childrenData[d-1].x),void 0!==t.dom.childrenData[r+1]&&(i=t.dom.childrenData[r+1].x),void 0!==t.dom.childrenData[r-1]&&(s=t.dom.childrenData[r-1].x),a<=l?d+=c:l<n&&(d-=c),l<=s?r-=c:i<l&&(r+=c),u=t.dom.childrenData[d],h=t.dom.childrenData[r];f=Math.abs(u.x-l)<Math.abs(h.x-l)?u:h,dbsfaces.chart.selectChartValue(t,f)}},selectChartValue:function(e,t){if(e.hoverLink){if(e.dom.hoverLinkChartValueData==t)return}else if(e.dom.hoverChartValueData==t)return;e.showDelta?dbsfaces.chart.pvShowDelta(e,t):e.dom.hoverChartValueData=dbsfaces.chart.pvHover(e,t,e.dom.hoverChartValueData),e.dom.parent.trigger("change",e)},setMovingDeltaHandleData:function(e,t){null==t?null!=e.dom.movingDeltaHandleData&&(e.dom.self.removeClass("-moving"),e.dom.movingDeltaHandleData.dom.self.removeClass("-selected")):(e.dom.self.addClass("-moving"),t.dom.self.addClass("-selected")),e.dom.movingDeltaHandleData=t},addChartValue:function(e,t,a,n,i,s,o,l){if(null!=e&&void 0!==e&&0!=e.length){var d=e.data("data");if(void 0!==d&&void 0!==t&&null!=t){void 0!==a&&null!=a||(a=t.toString()),void 0!==n&&null!=n||(n=a),void 0!==i&&null!=i||(i=""),void 0!==s&&null!=s||(s=""),void 0!==o&&null!=o||(o=""),void 0!==l&&null!=l||(l="");var r=JSON.parse('{ "value":'+t+', "label":"'+a+'", "displayValue":"'+n+'", "tooltip":"'+i+'", "color":"'+s+'", "styleClass":"'+o+'", "style":"'+l+'"}');d.originalValues.push(r)}}},refresh:function(e){var t=e.data("data");void 0!==t&&(dbsfaces.chart.pvInitializeChartValues(t),dbsfaces.chart.pvInitializeLayout(t))},clear:function(e){var t=e.data("data");void 0!==t&&(t.originalValues=[],null!=t.dom.path&&t.dom.path.remove())}},dbs_charts=function(t){dbsfaces.charts.initialize($(t));$(window).resize(function(e){dbsfaces.charts.resize($(t))})},dbsfaces.charts={initialize:function(e){var t=dbsfaces.charts.pvInitializeData(e);return dbsfaces.charts.pvInitializeLayout(t),dbsfaces.charts.pvInitializeAnalizeValues(t),dbsfaces.charts.pvInitializeDraw(t),t.dom.container.removeClass("-hide"),t},pvInitializeData:function(e){var t={dom:{self:e,childrenData:null,container:e.children(".-container"),caption:null,childrenCaption:null,footer:null,charts:null,childrenCaptionContainer:null,minChartValueData:null,maxChartValueData:null,maxDisplayValueChartValueData:null,maxLabelChartValueData:null,chartValuesByIndex:[]},type:e.attr("type"),showLabel:e.hasClass("-showLabel"),showValue:e.hasClass("-showValue"),showDelta:e.hasClass("-showDelta"),showAnimation:e.hasClass("-showAnimation"),width:null,height:null,scaleX:null,scaleY:null,pointWhiteSpace:0,infoWidth:0,infoHeight:0,infoFontSize:0,diameter:0,center:{x:0,y:0},arcWidth:0,arcSpace:5e-4,arcFator:null,pointRadius:0,pointLinkRadius:0,pointLinkWidth:0,relationalCaptionsCount:1,globalSequencesCount:0,currentColorInverted:tinycolor(e.css("color")).invertLightness().setAlpha(1).toString(),refreshTimeout:null,resizeTimeout:null};return e.data("data",t),t.dom.caption=t.dom.container.children(".-caption"),t.dom.childrenCaption=t.dom.container.children(".-childrenCaption"),t.dom.charts=t.dom.container.children(".-charts"),t.dom.footer=t.dom.container.children(".-footer"),t.dom.childrenCaptionContainer=t.dom.childrenCaption.children(".-container"),t.dom.childrenData=[],t.dom.charts.children(".dbs_chart").each(function(e){$(this).data("data").index=e,t.dom.childrenData.push($(this).data("data"))}),t},pvInitializeLayout:function(e){dbsfaces.charts.pvInitializeLayoutCreateChildrenCaption(e)},pvInitializeLayoutCreateChildrenCaption:function(n){n.dom.childrenCaptionContainer.empty(),n.dom.childrenData.length<2&&n.dom.childrenCaption.css("display","none"),0<n.dom.childrenData.length&&(n.dom.childrenData.forEach(function(e){var t=$(document.createElement("div"));t.addClass("-caption -th_col").attr("id",e.dom.self[0].id+"_caption").attr("chartid",e.dom.self[0].id);var a=$(document.createElement("div"));a.addClass("-text").text(e.dom.self.attr("caption")),t.append(a),e.dom.caption=t,e.dom.captionText=a,n.dom.childrenCaptionContainer.append(t)}),dbsfaces.charts.selectChart(n,n.dom.childrenData[0].dom.self[0].id),n.dom.childrenCaptionContainer.children().on("mousedown touchstart",function(e){dbsfaces.charts.selectChart(n,$(this).attr("chartid")),e.stopImmediatePropagation(),e.preventDefault()}))},pvInitializeAnalizeValues:function(n){if(n.dom.minChartValueData=null,n.dom.maxChartValueData=null,n.dom.maxDisplayValueChartValueData=null,n.dom.maxLabelChartValueData=null,n.relationalCaptionsCount=1,0<n.dom.childrenData.length){var i=0,s=0;if(n.dom.childrenData.forEach(function(e,t){if(("line"!=e.type&&0<e.dom.childrenData.length||"line"==e.type&&1<e.dom.childrenData.length)&&((null==n.dom.minChartValueData||e.dom.minChartValueData.value<n.dom.minChartValueData.value)&&(n.dom.minChartValueData=e.dom.minChartValueData),(null==n.dom.maxChartValueData||e.dom.maxChartValueData.value>n.dom.maxChartValueData.value)&&(n.dom.maxChartValueData=e.dom.maxChartValueData),(null==n.dom.maxDisplayValueChartValueData||e.dom.maxDisplayValueChartValueData.displayValue.length>n.dom.maxDisplayValueChartValueData.displayValue.length)&&(n.dom.maxDisplayValueChartValueData=e.dom.maxDisplayValueChartValueData),(null==n.dom.maxLabelChartValueData||e.dom.maxLabelChartValueData.label.length>n.dom.maxLabelChartValueData.label.length)&&(n.dom.maxLabelChartValueData=e.dom.maxLabelChartValueData),(null==n.relationalCaptionsCount||e.relationalCaptionsCount>n.relationalCaptionsCount)&&(n.relationalCaptionsCount=e.relationalCaptionsCount),e.originalValues.length>s&&(s=e.originalValues.length),0==t)){var a=e.dom.chart.getDim();n.height=a.height,n.width=a.width,i=e.totalValue}}),null!=n.dom.minChartValueData&&null!=n.dom.maxChartValueData)if("line"==n.type||"bar"==n.type){if(n.showLabel)0<n.dom.maxChartValueData.dom.infoLabel.css("font-size").length?n.infoHeight=Math.round(1.2*parseFloat(n.dom.maxChartValueData.dom.infoLabel.css("font-size")),0):n.infoHeight=0;n.showValue&&(n.infoWidth=Math.round(1.2*n.dom.maxDisplayValueChartValueData.dom.infoValue[0].getBoundingClientRect().width,0)),n.width-=n.infoWidth,n.height-=n.infoHeight,n.dom.minChartValueData.dom.self.addClass("-showValue"),n.dom.maxChartValueData.dom.self.addClass("-showValue"),"line"==n.type&&s--,n.scaleX=n.width/s,"bar"==n.type&&(n.pointWhiteSpace=.1*n.scaleX,n.scaleX-=n.pointWhiteSpace),n.scaleY=n.dom.maxChartValueData.value-n.dom.minChartValueData.value,0<n.scaleY&&(n.scaleY=-n.height/n.scaleY)}else if("pie"==n.type){n.arcFator=dbsfaces.math.PICircleFactor/n.relationalCaptionsCount,1<n.relationalCaptionsCount&&(n.arcFator-=n.arcSpace),n.diameter=Math.min(n.width,n.height),n.infoWidth=0;var a=n.diameter/n.relationalCaptionsCount/i*1.3;n.dom.maxDisplayValueChartValueData.dom.infoLabel.css("font-size","");var o=parseFloat(n.dom.container.css("font-size")),e=Math.max(n.dom.maxDisplayValueChartValueData.dom.infoLabel[0].getComputedTextLength(),n.dom.maxLabelChartValueData.dom.infoLabel[0].getComputedTextLength()),l=dbsfaces.math.trunc(n.diameter/7.5/e,2);1<l&&(l=1),n.dom.childrenData.forEach(function(e){e.dom.delta.css("font-size",l+"em"),e.dom.childrenData.forEach(function(e){e.dom.infoLabel.css("font-size",dbsfaces.math.trunc(Math.min(a*e.value*l,o*l),1)+"px");var t=1.1*e.dom.infoLabel[0].getComputedTextLength();t>n.infoWidth&&(n.infoWidth=t)})}),n.infoHeight=0}}else n.height=n.dom.charts[0].getBoundingClientRect().height,n.width=n.dom.charts[0].getBoundingClientRect().width},pvInitializeDraw:function(n){n.globalSequencesCount=0,n.dom.childrenData.forEach(function(a){if("line"!=n.type&&0<a.dom.childrenData.length||"line"==n.type&&1<a.dom.childrenData.length){if(n.height<5||n.width<5)throw new Error(n.dom.self[0].id+"\t"+a.dom.childrenData.length+":Dimensões mínimas são 5px,5px. \t Dimensões estão com "+n.width+"px, "+n.height+"px");if(a.globalSequence=n.globalSequencesCount+1,n.center.x=n.width/2,n.center.y=n.height/2,"pie"==n.type&&dbsfaces.charts.pvInitializeDrawInitializePie(n,a),a.dom.childrenData.forEach(function(e,t){"line"==n.type?dbsfaces.charts.pvInitializeDrawChartLine(n,a,e):"pie"==n.type?dbsfaces.charts.pvInitializeDrawChartPie(n,a,e):"bar"==n.type&&dbsfaces.charts.pvInitializeDrawChartBar(n,a,e),n.globalSequencesCount++,e.globalSequence=n.globalSequencesCount}),dbsfaces.charts.pvInitializeDrawDelta(n,a),"line"==n.type&&n.showAnimation){var e=a.dom.path[0].getTotalLength();a.dom.path.css("stroke-dasharray",e).css("stroke-dashoffset",e)}else"pie"==n.type?dbsfaces.charts.pvInitializeDrawRelationships(n,a):n.type}}),dbsfaces.charts.pvInitializeDrawSetColor(n)},pvInitializeDrawInitializePie:function(i,s){i.infoHeight=0,1<s.relationalCaptions.length&&s.relationalCaptions.forEach(function(e,t){var a=s.dom.self[0].id+":relationalPath_"+t,n=$(dbsfaces.util.jsid(a));i.infoHeight=parseInt(n.css("font-size"))/1.5,dbsfaces.charts.pvDrawArc(i,s,n,i.diameter/2-i.infoHeight/3,0,t,0,100,!0)});var e=parseFloat(s.dom.deltaCircle.css("stroke-width"))+1;i.arcWidth=i.infoWidth,i.pointRadius=i.diameter/2-i.infoHeight,i.pointLinkRadius=i.pointRadius-i.arcWidth,i.pointLinkWidth=i.pointLinkRadius/3+e,s.dom.deltaCircle.svgAttr("cx",i.center.x),s.dom.deltaCircle.svgAttr("cy",i.center.y),s.dom.deltaCircle.svgAttr("r",Math.max(i.pointLinkRadius-i.pointLinkWidth+e,.1)),dbsfaces.chart.pvShowDeltaValue(s,null,null),dbsfaces.ui.recreate(s.dom.delta)},pvInitializeDrawChartBarGroupByIndex:function(e,t){t.index>e.dom.chartValuesByIndex.length-1&&e.dom.chartValuesByIndex.push([]),e.dom.chartValuesByIndex[t.index].push(t)},pvInitializeDrawChartBar:function(e,t,a){var n,i,s,o,l,d,r,c,u,h;dbsfaces.charts.pvInitializeDrawChartBarGroupByIndex(e,a),n=e.infoWidth+e.pointWhiteSpace*a.index,i=e.infoHeight,s=-e.dom.maxChartValueData.value*e.scaleY+i,n+=e.scaleX*a.index+e.scaleX/2,i+=(a.value-e.dom.maxChartValueData.value)*e.scaleY,l=n-e.scaleX/e.dom.childrenData.length*t.index,l+=e.scaleX/e.dom.childrenData.length/2,i=dbsfaces.math.round(i,0),n=dbsfaces.math.round(n,0),0<i?xLength=i:i<0?xLength=-i:(xLength=1,s=-.5),a.x=l,a.y=i,o="M"+l+","+s,o+="L"+l+","+xLength,a.dom.point.svgAttr("d",o).svgAttr("stroke-width",e.scaleX/e.dom.childrenData.length),o=null;var f,p="fill:"+e.currentColorInverted;e.showLabel&&(d=a.dom.infoLabel[0].getBoundingClientRect().width,r=e.infoHeight,c=1.1*d,(n-=f=d/2)+d>e.width+e.infoWidth?n-=n+d-(e.width+e.infoWidth):n<e.infoWidth&&(n=e.infoWidth),a.dom.infoLabel.svgAttr("x",n).svgAttr("y",".7em"),a.dom.infoLabelBox.svgAttr("width",c).svgAttr("height",r).svgAttr("x",n-.05*c).svgAttr("y","-.2em").svgAttr("style",p)),e.showValue&&(h=.9*e.infoWidth,i+(f=(u=a.dom.infoValue.height())/2)>e.height+e.infoHeight?i-=i+f-(e.height+e.infoHeight):i-f<e.infoHeight&&(i+=f),a.dom.infoValue.svgAttr("x",.8*e.infoWidth).svgAttr("y",i),a.dom.infoValueBox.svgAttr("width",h).svgAttr("height",u).svgAttr("x",0).svgAttr("y",i-u/2).svgAttr("style",p)),e.showLabel&&e.showValue?(o="M"+a.x+","+e.infoHeight,o+="L"+a.x+","+a.y,o+="L"+e.infoWidth+","+a.y):e.showLabel?(o="M"+a.x+","+a.y,o+="L"+a.x+","+e.infoHeight):e.showValue&&(o="M"+a.x+","+a.y,o+="L"+e.infoWidth+","+a.y),a.dom.infoPath.svgAttr("d",o)},pvInitializeDrawChartLine:function(e,t,a){var n,i,s=e.infoWidth,o=e.infoHeight;s+=a.index*e.scaleX,o+=(a.value-e.dom.maxChartValueData.value)*e.scaleY,o=dbsfaces.math.round(o,0),s=dbsfaces.math.round(s,0),a.x=s,a.y=o,a.dom.point.svgAttr("cx",s).svgAttr("cy",o),n=0==a.index?"M":t.dom.path.svgAttr("d")+"L",n+=s+","+o,t.dom.path.svgAttr("d",n),n=null;var l,d,r,c=0,u=0,h="fill:"+e.currentColorInverted;e.showLabel&&(i=a.dom.infoLabel[0].getBoundingClientRect().width,c=e.infoHeight,u=1.2*i,(s-=r=i/2)+i>e.width+e.infoWidth?s-=s+i-(e.width+e.infoWidth):s<e.infoWidth&&(s=e.infoWidth),a.dom.infoLabel.svgAttr("x",s).svgAttr("y",".7em"),a.dom.infoLabelBox.svgAttr("width",u).svgAttr("height",c).svgAttr("x",s-.1*u).svgAttr("y","-.2em").svgAttr("style",h)),e.showValue&&(d=e.infoWidth,o+(r=(l=a.dom.infoValue.height())/2)>e.height+e.infoHeight?o-=o+r-(e.height+e.infoHeight):o-r<e.infoHeight&&(o+=r),a.dom.infoValue.svgAttr("x",d-4).svgAttr("y",o),a.dom.infoValueBox.svgAttr("width",d).svgAttr("height",l).svgAttr("x",-.1*u).svgAttr("y",o-l/2).svgAttr("style",h)),e.showLabel&&e.showValue?(n="M"+a.x+","+e.infoHeight,n+="L"+a.x+","+a.y,n+="L"+e.infoWidth+","+a.y):e.showLabel?(n="M"+a.x+","+a.y,n+="L"+a.x+","+e.infoHeight):e.showValue&&(n="M"+a.x+","+a.y,n+="L"+e.infoWidth+","+a.y),a.dom.infoPath.svgAttr("d",n)},pvInitializeDrawChartPie:function(e,t,a){a.perc=Math.abs(a.value)/t.totalValue*100,99.99<a.perc&&(a.perc=100);var n=0;0<a.index&&a.relationalGroupIndex==t.dom.childrenData[a.index-1].relationalGroupIndex&&(n=t.dom.childrenData[a.index-1].totalValue/t.totalValue*100);var i=dbsfaces.charts.pvDrawArc(e,t,a.dom.point,e.pointRadius,e.arcWidth,a.relationalGroupIndex,n,a.perc,!1);a.arcInfo=i,a.x=i.internalPoint.x,a.y=i.internalPoint.y,dbsfaces.ui.cssAllBrowser(a.dom.self,"transform-origin",i.externalPoint.x+"px "+i.externalPoint.y+"px");var s=dbsfaces.charts.pvDrawArc(e,t,a.dom.pointLink,e.pointLinkRadius+1,e.pointLinkWidth,a.relationalGroupIndex,n,a.perc,!1);dbsfaces.ui.cssAllBrowser(a.dom.pointLink,"transform-origin",s.externalPoint.x+"px "+s.externalPoint.y+"px");var o="translate("+i.internalPoint.x+" "+i.internalPoint.y+") rotate("+(i.degrees-90)+")",l=parseFloat(a.dom.infoPerc.attr("x")),d=parseFloat(a.dom.infoLabel.attr("x")),r=" scale(-1, -1)";return 180<i.degrees&&(a.dom.infoValues.addClass("-invert"),a.dom.infoPercBox.attr("transform",r),o+=r,d="-"+Math.abs(d),l="-"+Math.abs(l)),a.dom.info.attr("transform",o),a.dom.infoLabel.attr("x",d),a.dom.infoValue.attr("x",d),a.dom.infoPerc.attr("x",l).attr("v",a.perc),!0},pvInitializeDrawDelta:function(e,t){if("line"==t.type){if(e.showDelta){dbsfaces.chart.setMovingDeltaHandleData(t,t.dom.leftDeltaHandleData),dbsfaces.chart.selectChartValue(t,t.dom.childrenData[0]),dbsfaces.chart.setMovingDeltaHandleData(t,null),dbsfaces.chart.setMovingDeltaHandleData(t,t.dom.rightDeltaHandleData),dbsfaces.chart.selectChartValue(t,t.dom.childrenData[t.dom.childrenData.length-1]),dbsfaces.chart.setMovingDeltaHandleData(t,null);var a=(e.height+e.infoHeight)/2,n=(e.width+e.infoWidth)/2;t.dom.leftDeltaHandleData.dom.handle.svgAttr("y",a),t.dom.leftDeltaHandleData.dom.rect.svgAttr("y",e.infoHeight),t.dom.leftDeltaHandleData.dom.rect.svgAttr("height",e.height),t.dom.rightDeltaHandleData.dom.handle.svgAttr("y",a),t.dom.rightDeltaHandleData.dom.rect.svgAttr("y",e.infoHeight),t.dom.rightDeltaHandleData.dom.rect.svgAttr("height",e.height),t.dom.deltaPerc.svgAttr("y",a),t.dom.deltaPerc.svgAttr("x",n)}}else"pie"==t.type&&t.dom.deltaInfo.svgAttr("transform","translate("+e.center.x+" "+e.center.y+")")},pvInitializeDrawRelationships:function(d,r){r.dom.links.empty(),r.relationships.forEach(function(e){for(var t=e.total/r.totalValue*100,a=d.arcFator*t,n=dbsfaces.charts.pvGetKeys(e.key),i=0;i<n.length-1;i++)for(var s=dbsfaces.charts.pvGetChartValueDataFromKey(r,n[i]),o=i+1;o<n.length;o++){var l=dbsfaces.charts.pvGetChartValueDataFromKey(r,n[o]);dbsfaces.charts.pvInitializeDrawRelationshipsArc(d,r,s,a,n[i],n[o],e.total,t),dbsfaces.charts.pvInitializeDrawRelationshipsArc(d,r,l,a,n[o],n[i],e.total,t)}})},pvInitializeDrawRelationshipsArc:function(e,t,a,n,i,s,o,l){var d;d=a.arcInfo.endAngle-a.arcInfo.startAngle,d-=n,d/=2;var r=dbsfaces.math.circlePoint(e.center,a.arcInfo.internalRadius-1,a.arcInfo.startAngle+d),c=dbsfaces.math.circlePoint(e.center,a.arcInfo.internalRadius-1,a.arcInfo.startAngle+d+n),u="",h=null;u="M"+r.x+","+r.y,u+="A"+(a.arcInfo.internalRadius-1)+","+(a.arcInfo.internalRadius-1)+" 0 "+a.arcInfo.big+" "+a.arcInfo.direction+" "+dbsfaces.math.round(c.x,2)+","+dbsfaces.math.round(c.y,2),u+="L"+e.center.x+","+e.center.y,u+="L"+r.x+","+r.y,u+="Z",h=dbsfaces.svg.path(t.dom.links,u,"-link",null,{key:i,b:s}),dbsfaces.math.distanceBetweenTwoPoints(r.x,r.y,c.x,c.y)<.5?(h.svgAttr("stroke-width",.3),h.svgAttr("stroke","currentColor")):(h.svgAttr("stroke-width","none"),h.svgAttr("stroke","none")),dbsfaces.ui.cssAllBrowser(h,"transform-origin",e.center.x+"px "+e.center.y+"px"),r=dbsfaces.math.circlePoint(e.center,a.arcInfo.internalRadius-.5,a.arcInfo.startAngle+d),c=dbsfaces.math.circlePoint(e.center,a.arcInfo.internalRadius-.5,a.arcInfo.startAngle+d+n),u="M"+r.x+","+r.y,u+="A"+(a.arcInfo.internalRadius-.5)+","+(a.arcInfo.internalRadius-.5)+" 0 "+a.arcInfo.big+" "+a.arcInfo.direction+" "+dbsfaces.math.round(c.x,2)+","+dbsfaces.math.round(c.y,2),(h=dbsfaces.svg.path(t.dom.links,u,"-linkHover",null,{key:i,b:s})).data("data",{value:o,perc:l})},pvGetKeys:function(e){for(var t=[],a=0;a<e.length;a++)"1"==e.substr(e.length-a-1,1)&&t.push(a);return t},pvGetChartValueDataFromKey:function(e,t){for(var a=0;a<e.dom.childrenData.length;a++)if(e.dom.childrenData[a].key==t)return e.dom.childrenData[a]},pvInitializeDrawSetColor:function(i){i.dom.childrenData.forEach(function(n){if("line"!=i.type&&0<n.dom.childrenData.length||"line"==i.type&&1<n.dom.childrenData.length){var e=dbsfaces.charts.pvSetColor(i,n,!0);n.colorTransparent=tinycolor(e.toString()).setAlpha(.5).toString(),n.colorInverted=tinycolor(e.toString()).invertLightness().setAlpha(1).toString(),null!=n.dom.caption&&(n.dom.captionText.css("color",e),n.dom.caption.css("background-color",e).css("color",n.colorInverted)),n.dom.childrenData.forEach(function(e,t){var a=dbsfaces.charts.pvSetColor(i,e,!1);e.colorInverted=tinycolor(a).invertLightness().setAlpha(1).toString(),"pie"==n.type&&(n.dom.self.find("> .-chart > .-links > [key='"+e.key+"']").svgAttr("color",a),e.dom.info.attr("fill",e.colorInverted))})}})},pvSetColor:function(e,t,a){var n,i=t.color;return""==i||null==i?(t.dom.self.css("color",""),i=tinycolor(t.dom.self.css("color")),n=a||null==t.dom.parent.data("data").color?t.globalSequence/e.globalSequencesCount:t.index/t.dom.parent.data("data").dom.childrenData.length,n*=20,i.isDark()?i.lighten(n):i.darken(n)):i=tinycolor(i),t.dom.self.css("color",i),i},pvDrawArc:function(e,t,a,n,i,s,o,l,d){var r={startAngle:null,endAngle:null,centerAngle:null,degrees:0,externalRadius:null,centerRadius:null,internalRadius:null,externalPoint:null,centerPoint:null,internalPoint:null,direction:1,big:0},c=l,u=o;if(99.99<c&&(c=99.99999),r.startAngle=u*e.arcFator,r.startAngle+=e.arcFator*s*100,r.startAngle+=e.arcSpace*(s+1)*100,r.startAngle-=e.arcSpace/2*100,r.endAngle=r.startAngle+c*e.arcFator,r.centerAngle=r.startAngle+(r.endAngle-r.startAngle)/2,r.externalRadius=n,r.centerRadius=r.externalRadius-i/2,r.internalRadius=r.externalRadius-i,r.degrees=dbsfaces.math.round(r.centerAngle/Math.PI*180,2),r.externalPoint=dbsfaces.math.circlePoint(e.center,r.externalRadius,r.centerAngle),r.internalPoint=dbsfaces.math.circlePoint(e.center,r.internalRadius,r.centerAngle),r.centerPoint=dbsfaces.math.circlePoint(e.center,r.centerRadius,r.centerAngle),d&&90<r.degrees&&r.degrees<270){var h=r.endAngle;r.endAngle=r.startAngle,r.startAngle=h,r.direction=0}var f=dbsfaces.math.circlePoint(e.center,r.centerRadius,r.startAngle),p=dbsfaces.math.circlePoint(e.center,r.centerRadius,r.endAngle);r.endAngle-r.startAngle>Math.PI&&(r.big=1);var m="";return m+="M"+f.x+","+f.y,m+="A"+r.centerRadius+","+r.centerRadius+" 0 "+r.big+" "+r.direction+" "+p.x+","+p.y,a.svgAttr("d",m),a.css("stroke-width",i),a.data("sw",parseFloat(i)+1),r},resize:function(e){null!=e&&void 0!==e&&0!=e.length&&(e.data("data").dom.container.addClass("-hide"),dbsfaces.charts.refresh(e))},refresh:function(e){if(null!=e&&void 0!==e&&0!=e.length){var t=e.data("data");void 0!==t&&(t.dom.container.addClass("-hide"),clearTimeout(t.refreshTimeout),t.refreshTimeout=setTimeout(function(){t.dom.childrenData.forEach(function(e){dbsfaces.chart.refresh(e.dom.self)}),dbsfaces.charts.pvInitializeAnalizeValues(t),dbsfaces.charts.pvInitializeDraw(t),t.dom.container.removeClass("-hide"),t.showAnimation&&(t.dom.charts.removeClass("-showAnimation"),setTimeout(function(){t.dom.charts.addClass("-showAnimation")},0))},1))}},selectChart:function(e,t){e.dom.childrenCaptionContainer.children().removeClass("-selected"),e.dom.childrenData.forEach(function(e){e.dom.self.removeClass("-selected")});var a=$(dbsfaces.util.jsid(t)),n=$(dbsfaces.util.jsid(t+"_caption"));a.addClass("-selected"),n.addClass("-selected"),dbsfaces.ui.moveToFront(a)}},dbs_chartValue=function(e){$(e)},dbsfaces.chartValue={initialize:function(e,t,a,n){return dbsfaces.chartValue.pvInitializeData(e,t,a,n)},pvInitializeData:function(e,t,a,n){var i={dom:{self:null,parent:e.dom.self,point:null,pointLink:null,pointDif:null,info:null,infoValues:null,infoLabel:null,infoLabelBox:null,infoValue:null,infoValueBox:null,infoPath:null,infoPerc:null,infoPercInt:null,infoPercDec:null,infoPercBox:null},key:e.dom.childrenData.length,index:null,value:0,displayValue:"",label:t.trim(),relationalGroupIndex:a,originalValues:[],style:n.style,styleClass:n.styleClass,x:null,y:null,color:n.color,colorInverted:null,perc:null,totalValue:0,globalSequence:0,arcInfo:null};return void 0===i.color&&(i.color=null),void 0===i.style&&(i.style=null),void 0===i.styleClass&&(i.styleClass=null),i},initializeLayoutCreateDom:function(e,t){t.dom.self=dbsfaces.svg.g(e.dom.values,"dbs_chartValue -"+e.type,null,{index:t.index,relationalGroupIndex:t.relationalGroupIndex}),t.dom.self.addClass(t.styleClass),t.dom.self.attr("style",t.style),t.dom.self.data("data",t),t.dom.info=dbsfaces.svg.g(t.dom.self,"-info",null,null),"line"==e.type?(t.dom.point=dbsfaces.svg.circle(t.dom.self,null,null,null,"-point",null,{r:".3em"}),t.dom.infoPath=dbsfaces.svg.path(t.dom.info,null,"-path",null,null),t.dom.infoLabelBox=dbsfaces.svg.rect(t.dom.info,null,null,null,null,".2em",".2em","-labelBox",null,null),t.dom.infoValueBox=dbsfaces.svg.rect(t.dom.info,null,null,null,null,".2em",".2em","-valueBox",null,null),t.dom.infoLabel=dbsfaces.svg.text(t.dom.info,null,null,t.label,"-label",null,null),t.dom.infoValue=dbsfaces.svg.text(t.dom.info,null,null,t.displayValue,"-value",null,null)):"bar"==e.type?(t.dom.point=dbsfaces.svg.path(t.dom.self,null,"-point",null,null),t.dom.pointDif=dbsfaces.svg.path(t.dom.self,null,"-pointDif",null,null),t.dom.infoPath=dbsfaces.svg.path(t.dom.info,null,"-path",null,null),t.dom.infoLabelBox=dbsfaces.svg.rect(t.dom.info,null,null,null,null,".2em",".2em","-labelBox",null,null),t.dom.infoValueBox=dbsfaces.svg.rect(t.dom.info,null,null,null,null,".2em",".2em","-valueBox",null,null),t.dom.infoLabel=dbsfaces.svg.text(t.dom.info,null,null,t.label,"-label",null,null),t.dom.infoValue=dbsfaces.svg.text(t.dom.info,null,null,t.displayValue,"-value",null,null)):"pie"==e.type&&(t.dom.point=dbsfaces.svg.path(t.dom.self,null,"-point",null,{stroke:"currentColor",fill:"none"}),t.dom.pointLink=dbsfaces.svg.path(t.dom.self,null,"-pointLink",null,{stroke:"currentColor",fill:"none"}),t.dom.infoValues=dbsfaces.svg.g(t.dom.info,"-values",null,null),t.dom.infoLabel=dbsfaces.svg.text(t.dom.infoValues,"1",null,t.label,"-label",null,null),t.dom.infoValue=dbsfaces.svg.text(t.dom.infoValues,"0.1em",".8em",t.displayValue,"-value",null,null),1==e.dom.childrenData.length&&t.dom.infoValues.addClass("-hide"),t.dom.infoPercBox=dbsfaces.svg.rect(t.dom.infoValues,"7em","-1em","1em","1em",".2em",".2em","-percBox",null,null),t.dom.infoPerc=dbsfaces.svg.text(t.dom.infoValues,"7.4em",".2em",null,"-perc",null,null),t.dom.infoPercInt=dbsfaces.svg.tspan(t.dom.infoPerc,null,"-int",null,null),t.dom.infoPercDec=dbsfaces.svg.tspan(t.dom.infoPerc,null,"-dec",null,null)),dbsfaces.ui.moveToBack(t.dom.point)}},dbs_checkbox=function(e){$(e+"> .-th_input").on("mouseup touchend",function(e){var t=$(this).find("> .-input > input");dbsfaces.checkbox.setValue(t)})},dbsfaces.checkbox={setValue:function(e){if(null!=e&&void 0!==e){var t=e;t instanceof jQuery||(t=$(e));var a=!t[0].hasAttribute("checked");t[0].checked=a,t.attr("checked",a),t.closest(".-th_input").attr("checked",a),t.trigger("change")}}},dbs_combobox=function(t){$(t).focusin(function(){$(t+" > .-container > .-th_input-data").addClass("-th_input-data-FOCUS")}),$(t).focusout(function(){$(t+" > .-container > .-th_input-data").removeClass("-th_input-data-FOCUS")}),$(t+" > .-container > .-th_input-data > select").keydown(function(e){dbsfaces.combobox.copyText(t,this)}),$(t+" > .-container > .-th_input-data > select").keyup(function(e){dbsfaces.combobox.copyText(t,this)}),$(t+" > .-container > .-th_input-data > select").change(function(e){dbsfaces.combobox.copyText(t,this)})},dbsfaces.combobox={copyText:function(e,t){var a=t.options[t.selectedIndex].text;$(e+" > .-container > .-th_input-data > .-data").get(0).firstChild.textContent=a},triggerChange:function(e){$(e+"-data").trigger("change")}},dbs_componenttree=function(e){var n,i;$(e+" > .-container li > .-label").click(function(e){var t=$(this).attr("key");dbsfaces.componenttree.select(e,this,t)}),$(e+" > .-container > .-caption li > .-label .-closable").click(function(t){if(i&&$(this).hasClass("-i_add"))return clearTimeout(n),$(this).closest(".-label").parent().find(".-label").each(function(){dbsfaces.componenttree.showNode($(this))}),i=!1,t.stopImmediatePropagation(),!1;i=!0;var a=this;n=setTimeout(function(){i=!1;var e=$(a).closest(".-label");return dbsfaces.componenttree.showNode(e),t.stopImmediatePropagation(),!1},300)}),$(e+" > .-container li > .-label").mouseenter(function(e){var t=dbsfaces.util.jsid($(this).closest(".dbs_componenttree").get(0).id),a=dbsfaces.util.jsid($(this).get(0).id);a=a.replace("-extrainfo",""),$(t+" > .-container li.-hover").removeClass("-hover"),$(a+"-extrainfo").parent().addClass("-hover"),$(a).parent().addClass("-hover")})},dbsfaces.componenttree={showNode:function(e){var t=dbsfaces.util.jsid($(e).attr("id")+"-extrainfo"),a=$(t).siblings(".-content").children("div"),n=$(e).siblings(".-content").children("div");dbsfaces.componenttree.setExpandedIds(e),$(e).children("div").children(".-closable").toggleClass("-small -i_add"),$(e).children("div").children(".-closable").toggleClass("-small -i_subtract"),$(a).animate({height:"toggle"},100,function(){}),$(n).animate({height:"toggle"},100,function(){$(n).outerHeight()<2&&$(n).css("overflow","visible")})},select:function(e,t,a){var n=$(t).closest(".dbs_componenttree").get(0).id,i=dbsfaces.util.jsid(n+":selection-input");dbsfaces.util.jsid(n+":selection-submit");$(i).val(a),jsf.ajax.request(e,"update",{execute:n,onevent:dbsfaces.onajax,onerror:dbsfaces.onajaxerror}),$(n).trigger("click")},setExpandedIds:function(e){var t=" "+$(e).attr("key")+" ",a=$(e).closest(".dbs_componenttree").get(0);if(void 0!==a){var n=a.id,i=dbsfaces.util.jsid(n+":expandedIds"),s=" "+$(i).val()+" ";s=-1==s.indexOf(t)?s+" "+$.trim(t):s.replaceAll(t,""),s=" "+$.trim(s)+" ",$(i).val(s)}}},dbs_crudDialog=function(e){var t=0;t=$(e+"> .-caption").outerHeight(),t+=$(e+"> .-toolbar").outerHeight(),$(e).css("padding-bottom",t+"px")},dbsfaces.crudDialog={setBackgroundColor:function(e,t){dbsfaces.crudDialog.setBackgroundColorStyleClass(xCrudId,xRadioId),$(dbsfaces.util.jsid(xCrudId+":dialog:"+xRadioId)+" input:radio").off("change.cor"),$(dbsfaces.util.jsid(xCrudId+":dialog:"+xRadioId)+" input:radio").on("change.cor",function(){dbsfaces.crudDialog.setBackgroundColorStyleClass(xCrudId,xRadioId)})},setBackgroundColorStyleClass:function(e,t){$(dbsfaces.util.jsid(e+":dialog:"+t+"1")).is(":checked")?dbsfaces.crudDialog.getBackgroundComponent(e).addClass("dbs_back_gradient_orange").removeClass("dbs_back_gradient_blue").removeClass("dbs_back_gradient_white"):$(dbsfaces.util.jsid(e+":dialog:"+t+"0")).is(":checked")&&dbsfaces.crudDialog.getBackgroundComponent(e).addClass("dbs_back_gradient_blue").removeClass("dbs_back_gradient_orange").removeClass("dbs_back_gradient_white")},getBackgroundComponent:function(e){return dbsfaces.dialog.getBackgroundComponent(e+":dialog")},closeEsc:function(e){var t;if(!e){if(!window.event)return;e=window.event}if("number"==typeof e.keyCode)t=e.keyCode;else if("number"==typeof e.which)t=e.which;else{if("number"!=typeof e.charCode)return;t=e.charCode}if(27==t){var a=$(".dbs_crudDialog [id$='dialog:btCancel']").last();0==a.length&&(a=$(".dbs_crudDialog [id$='dialog:btClose']").last()),0<a.length&&a.click()}}},dbs_crudModal=function(e){var t=0;t=$(e+"> .-caption").outerHeight(),t+=$(e+"> .-toolbar").outerHeight(),$(e).css("padding-bottom",t+"px")},dbsfaces.crudModal={setBackgroundColor:function(e,t){dbsfaces.crudModal.setBackgroundColorStyleClass(xCrudId,xRadioId),$(dbsfaces.util.jsid(xCrudId+":modal:"+xRadioId)+" input:radio").off("change.cor"),$(dbsfaces.util.jsid(xCrudId+":modal:"+xRadioId)+" input:radio").on("change.cor",function(){dbsfaces.crudModal.setBackgroundColorStyleClass(xCrudId,xRadioId)})},setBackgroundColorStyleClass:function(e,t){$(dbsfaces.util.jsid(e+":modal:"+t+"1")).is(":checked")?dbsfaces.crudModal.getBackgroundComponent(e).addClass("dbs_back_gradient_orange").removeClass("dbs_back_gradient_blue").removeClass("dbs_back_gradient_white"):$(dbsfaces.util.jsid(e+":modal:"+t+"0")).is(":checked")&&dbsfaces.crudModal.getBackgroundComponent(e).addClass("dbs_back_gradient_blue").removeClass("dbs_back_gradient_orange").removeClass("dbs_back_gradient_white")},getBackgroundComponent:function(e){return dbsfaces.modal.getBackgroundComponent(e+":modal")},closeEsc:function(e){var t;if(!e){if(!window.event)return;e=window.event}if("number"==typeof e.keyCode)t=e.keyCode;else if("number"==typeof e.which)t=e.which;else{if("number"!=typeof e.charCode)return;t=e.charCode}if(27==t){var a=$(".dbs_crudModal [id$='modal:btCancel']").last();0==a.length&&(a=$(".dbs_crudModal [id$='modal:btClose']").last()),0<a.length&&a.click()}}},dbs_crudTable=function(t){var a=t+" > .-container > .dbs_dataTable > .-container > .-content > table  > tbody > tr > .-checkbox",n=t+" > .-container > .dbs_dataTable.-formStyle_Table > .-container > .-content > table  > tbody > tr";$(a).click(function(e){$(this).children(".dbs_checkbox").off(dbsfaces.EVENT.ON_AJAX_SUCCESS).on(dbsfaces.EVENT.ON_AJAX_SUCCESS,function(e){jsf.ajax.request(this,"update",{render:$(t).attr("id")+":crudTableMessages "+$(t).attr("id")+":dataTable:toolbar",onevent:dbsfaces.onajax,onerror:dbsfaces.onajaxerror})}),$(a+" > .dbs_checkbox").off(dbsfaces.EVENT.ON_AJAX_COMPLETE).on(dbsfaces.EVENT.ON_AJAX_COMPLETE,function(e){window.clearTimeout(wAjaxTimeout),e.stopImmediatePropagation(),dbsfaces.ui.showLoading("main",!1)})}),$(n).keydown(function(e){9==e.which||19==e.which||20==e.which||16==e.which||17==e.which||18==e.which||33==e.which||34==e.which||35==e.which||36==e.which||91==e.which||92==e.which||93==e.which||111<e.which&&e.which<186||dbsfaces.crudTable.rowEdit(e,t,$(this))}),$(dbsfaces.util.jsid(t+":dataTable:btInserir")).on(dbsfaces.EVENT.ON_AJAX_SUCCESS,function(e){dbsfaces.crudTable.setCellFocus($(n).last(),1)})},dbsfaces.crudTable={rowEdit:function(e,t,a){if($(e.target).hasClass("-th_input-data")){var n=a.children(".-C1").children("input[type='hidden']");if(40==e.which)if(0==a.next().length)if("true"==n.val())return void $(dbsfaces.util.jsid(t+":dataTable:btInserir")).click();if(13==e.which)return void $(dbsfaces.util.jsid(t+":dataTable:btOk")).click();if(27==e.which)return void $(dbsfaces.util.jsid(t+":dataTable:btCancelar")).click();var i=$(e.target).closest("td");if(37==e.which||39==e.which||40==e.which||38==e.which){var s=i.get(0).cellIndex,o=a;return 40==e.which?o=a.next():38==e.which?o=a.prev():37==e.which?s++:39==e.which&&s--,void(s==i.get(0).cellIndex&&o==a||dbsfaces.crudTable.setCellFocus(o,s))}0<n.length&&n.val("true")}},setCellFocus:function(e,t){if(null!=e&&0<e.length){var a=e.children("td:eq("+t+")");dbsfaces.ui.focusOnFirstInput(a)}},setGridFocus:function(e){$(dbsfaces.util.jsid(e+":dataTable:foo")).focus()}},dbs_crudView=function(e){},dbsfaces.crudView={},dbs_dataTable=function(s){var t,o=dbsfaces.dataTable.initialize($(s));o.dom.tbody.find("> tr:first");dbsfaces.util.isMobile(),dbsfaces.dataTable.showOverflowShadow(o.dom.table),o.dom.container.on("select",function(e){return!1}),o.dom.table.scroll(function(){dbsfaces.dataTable.showOverflowShadow($(this))}),o.dom.self.mouseout(function(e){dbsfaces.dataTable.rowFocusRemove(o)}),o.dom.rows.off("mouseover.datatable"),o.dom.rows.on("mouseover.datatable",function(e){dbsfaces.dataTable.rowFocusAdd(o,$(this))}),o.dom.rows.focusin(function(e){this!=t&&(t=this,dbsfaces.dataTable.rowSelect(o,$(this)))}),o.dom.rows.click(function(e){$(e.target).hasClass("-th_input-data:not(.-readOnly)")||$(e.target).is("input:not(.-readOnly)")?dbsfaces.dataTable.headFocusAdd(o):o.dom.input.focus().click(),this!=t&&(t=this,dbsfaces.dataTable.rowSelect(o,$(this)))}),o.dom.rows.dblclick(function(e){if(!$(s).hasClass("-formStyle_Table")){var t=$(this).find("td > .-selectOne");return 0<t.length&&(e.stopImmediatePropagation(),e.preventDefault(),dbsfaces.dataTable.headFocusRemove(o),dbsfaces.dataTable.rowFocusRemove(o),dbsfaces.dataTable.rowDeselect(o),t.click()),!1}}),o.dom.input.click(function(e){return e.stopImmediatePropagation(),o.dom.self.trigger("click"),!1}),o.dom.input.on("select",function(e){return!1}),o.dom.input.keydown(function(e){if(40==e.keyCode||38==e.keyCode)return dbsfaces.dataTable.moveToNextOrPreviousRow(o,e.keyCode),!1}),o.dom.input.focusin(function(e){o.dom.tbody.find("> tr.-selected");dbsfaces.dataTable.headFocusAdd(o),e.stopPropagation()}),o.dom.input.focusout(function(e){dbsfaces.dataTable.headFocusRemove(o),e.stopPropagation(),o.dom.self.trigger("blur")}),o.dom.table.scroll(function(e){dbsfaces.dataTable.adjustWidth(s,this)}),o.dom.filter.find(" > .-button > .dbs_button").on("click",function(e){t=null,dbsfaces.dataTable.rowSelect(o,t)}),o.dom.table.find(" > thead > tr > th.-sort").on("click",function(e){var t=$(s+"\\:sortcolumn"),a=$(s+"\\:sortdirection"),n=a.attr("value"),i=t.attr("value");i!=$(this).attr("sortColumn")?(i=$(this).attr("sortColumn"),n="A"):"A"==n?n="D":"D"==n?n="A":""==n&&(n="A"),t.attr("value",i),a.attr("value",n),o.dom.sort.click()}),dbsfaces.ui.ajaxShowLoading(s+".dbs_dataTable")},dbsfaces.dataTable={initialize:function(e){var t=dbsfaces.dataTable.initializeData(e);return dbsfaces.dataTable.initializeLayout(t),t},initializeData:function(e){var t={dom:{self:e,container:null,content:null,header:null,input:null,table:null,tbody:null,rows:null,focus:null}};return t.dom.container=t.dom.self.children(".-container"),t.dom.content=t.dom.container.children(".-content"),t.dom.input=t.dom.container.children("input.-foo"),t.dom.sort=t.dom.container.children(".-sort"),t.dom.header=t.dom.container.children(".-header"),t.dom.filter=t.dom.header.children(".-filter"),t.dom.table=t.dom.content.children("table"),t.dom.tbody=t.dom.table.children("tbody"),t.dom.rows=t.dom.tbody.children("tr"),e.data("data",t),t},initializeLayout:function(e){var t=15;t+=e.dom.filter.find(" > .-input").outerWidth(),t+=e.dom.filter.find(" > .-button").outerWidth(),e.dom.self.css("min-width",t+"px"),dbsfaces.dataTable.pvAdjustContent(e),dbsfaces.dataTable.pvPositionOnSelectedRow(e)},focus:function(e){var t=$(dbsfaces.util.jsid(e.source.id)+" > .-container > .-content > table > tbody");if(dbsfaces.onajax(e),"complete"==e.status)jQuery.data(e.source,"wScrollTop",t.scrollTop());else if("success"==e.status){void 0!==jQuery.data(e.source,"wScrollTop")&&t.scrollTop(jQuery.data(e.source,"wScrollTop")),$(dbsfaces.util.jsid(e.source.id)+" > .-container > input.-foo").focus()}},rowSelect:function(e,t){if(e.dom.self.hasClass("-selectable")){if(dbsfaces.dataTable.rowFocusRemove(e),dbsfaces.dataTable.rowDeselect(e),null!=t){var a=t.attr("index");e.dom.input.val(a),e.dom.input.attr("value",a),t.addClass("-selected")}e.dom.self.trigger(dbsfaces.EVENT.ON_ROW_SELECTED,t)}},rowDeselect:function(e){e.dom.rows.filter(".-selected").removeClass("-selected")},rowFocusAdd:function(e,t){dbsfaces.dataTable.rowFocusRemove(e),e.dom.focus=t,e.dom.focus.addClass("-focus")},rowFocusRemove:function(e){null!=e.dom.focus&&(e.dom.focus.removeClass("-focus"),e.dom.focus=null)},headFocusAdd:function(e){e.dom.table.find(" > thead > tr").addClass("-focus")},headFocusRemove:function(e){e.dom.table.find(" > thead > tr").removeClass("-focus")},moveToNextOrPreviousRow:function(e,t){var a,n=0,i=e.dom.rows,s=e.dom.tbody;if(0==i.filter(".-selected").length?a=i.first():40==t?0==(a=i.filter(".-selected").next()).length?a=i.last():n=1:38==t&&(0==(a=i.filter(".-selected").prev()).length?a=i.first():n=-1),0<a.length&&(dbsfaces.dataTable.rowSelect(e,a),0!=n)){var o=s.scrollTop()+a.position().top+a.outerHeight(),l=s.scrollTop()+a.outerHeight();(s.scrollTop()+s.outerHeight()<o||o<l)&&(n<0?s.scrollTop(o-a.outerHeight()):s.scrollTop(o-s.outerHeight()))}},showOverflowShadow:function(e){if(0!=e.length){var t=e.get(0).scrollWidth-e.get(0).clientWidth;0==e.get(0).scrollLeft?(e.removeClass("-scrollLeft"),e.removeClass("-scrollLeftRight"),0<t&&e.addClass("-scrollRight")):e.get(0).scrollLeft==t?(e.removeClass("-scrollRight"),e.removeClass("-scrollLeftRight"),0<e.get(0).scrollLeft&&e.addClass("-scrollLeft")):t<e.get(0).scrollWidth&&(e.removeClass("-scrollLeft"),e.removeClass("-scrollRight"),e.addClass("-scrollLeftRight"))}},adjustWidth:function(e,t){},pvPositionOnSelectedRow:function(e){var t=e.dom.rows.filter(".-selected");0<t.length&&t.parent().scrollTop(t.position().top-t.height()-t.parent().offset().top)},pvAdjustContent:function(e){var t=e.dom.header.actual("outerHeight");e.dom.content.css("margin-top","-"+t+"px").css("padding-top",t+"px")}},dbs_dialog=function(e){},dbs_dialogContent=function(s){var o=$(s),a=dbsfaces.dialog.initialize(o);if(a.dom.self.on("close",function(){dbsfaces.dialog.pvClose(a)}),a.dom.self.on("open",function(){dbsfaces.dialog.pvOpen(a)}),a.dom.self.on("stopTimeout",function(){dbsfaces.dialog.stopTimeout(a)}),a.dom.self.on("startTimeout",function(){dbsfaces.dialog.startTimeout(a)}),$(s+" > .-container > .-th_action").on("mousedown touchstart",function(e){if(!o.attr("disabled"))return dbsfaces.dialog.show(o),!1}),a.dom.mask.on("mousedown touchstart",function(e){e.stopImmediatePropagation(),e.preventDefault(),o.attr("disabled")||0!=a.dom.bthandle.length&&dbsfaces.dialog.show(o)}),0==o.children().length){var e=$("body").data("dbs_dialogs");void 0!==e&&$(dbsfaces.util.jsid(e.pop())).trigger("close.dialog")}"mod"!=a.type&&a.dom.content.touchwipe({wipeLeft:function(){return dbsfaces.dialog.wipe(a,"l")},wipeRight:function(){return dbsfaces.dialog.wipe(a,"r")},wipeUp:function(){return dbsfaces.dialog.wipe(a,"u")},wipeDown:function(){return dbsfaces.dialog.wipe(a,"d")},onStart:function(){dbsfaces.dialog.scrollStart(a)},onMove:function(e,t){dbsfaces.dialog.scroll(a,e,t)},min_move_x:25,min_move_y:25,preventDefaultEvents:!0}),a.dom.footer_toolbar.keydown(function(e){if("msg"==a.type&&null!=a.dom.btyes&&0<a.dom.btyes.length)return a.dom.btyes.click(),!1}),a.dom.content.on(dbsfaces.EVENT.ON_TRANSITION_END,function(e){if(o.hasClass("-closed")){if(o.trigger("closed.dialog"),a.dom.container.removeClass("-opened").addClass("-closed"),"msg"==a.type&&null!=a.dom.btyes&&0<a.dom.btyes.length)return a.dom.btyes.click(),!1}else a.dom.container.removeClass("-closed").addClass("-opened"),o.trigger("opened.dialog")}),a.dom.bthandle.on("mousedown touchstart",function(e){o.attr("disabled")||("0"==a.closeTimeout?dbsfaces.dialog.show(o):a.time=(new Date).getTime())}),a.dom.bthandle.on("mouseup touchend",function(e){if(!o.attr("disabled")&&"0"!=a.closeTimeout)return(new Date).getTime()-a.time<200?dbsfaces.dialog.show(o):o.trigger("stopTimeout"),!1}),$(s+" .-th_action.-closeDialog").on(dbsfaces.EVENT.ON_AJAX_SUCCESS,function(e){var t=$(this);if(t.closest(".dbs_dialog")==$(s)&&!o.hasClass("-closed")){if(t.data("hasmessage")){var a=$("body").data("dbs_dialogs");void 0===a&&(a=[]);for(var n=!1;a[0];){if(a[0]==o[0].id){n=!0;break}i++}return n||a.push(o[0].id),void $("body").data("dbs_dialogs",a)}return dbsfaces.dialog.show(o),e.stopImmediatePropagation(),!1}}),a.dom.bthandle.on(dbsfaces.EVENT.ON_TRANSITION_END,function(e){return dbsfaces.dialog.show(o),!1}),"mod"==a.type&&(dbsfaces.dialog.dragOff(a),a.dom.header.on("mousedown.dialog",function(e){var t={left:a.dom.content.offset().left,top:a.dom.content.offset().top,width:a.dom.content.outerWidth(),height:a.dom.content.outerHeight()};1===e.which&&(dbsfaces.dialog.dragOff(a),a.dom.header.on("mousemove.dialog",{pX:e.clientX,pY:e.clientY,pPosOld:t},function(e){return a.dom.content.css("margin",""),a.dom.content.css("left",e.data.pPosOld.left+(e.clientX-e.data.pX)+"px"),a.dom.content.css("top",e.data.pPosOld.top+(e.clientY-e.data.pY)+"px"),a.dom.content.addClass("-moving"),!1}))}),a.dom.header.on("mouseleave.dialog",function(e){dbsfaces.dialog.dragOff(a)}),$(window).on("dragstart",function(e){dbsfaces.dialog.dragOff(a)}),$(window).on("mouseup.dialog",function(e){dbsfaces.dialog.dragOff(a)})),$(window).resize(function(e){var t=$(s).data("data");clearTimeout(t.resizeTimeout),dbsfaces.dialog.resize($(s).data("data"))}),a.dom.self.css("visibility",""),a.opened&&dbsfaces.dialog.show($(s))},dbsfaces.dialog={initialize:function(e){var t=dbsfaces.dialog.pvInitializeData(e);return dbsfaces.dialog.pvInitializeLayout(t),dbsfaces.dialog.pvInitializeCloseTimeout(t),t},pvInitializeData:function(e){var t={dom:{self:e,parent:e.parent().closest(".dbs_dialog"),container:e.children(".-container"),content:null,icon:null,icon_content:null,mask:null,mask_content:null,sub_container:null,divscroll:null,sub_content:null,header:null,header_content:null,header_content_left:null,header_content_right:null,header_caption:null,header_caption_label:null,header_caption_icon:null,header_action_icon:null,footer:null,footer_content:null,footer_toolbar:null,bthandle:null,btyes:null},type:e.attr("type"),closeTimeout:dbsfaces.util.getNotEmpty(e.attr("ct"),"0"),contentAligment:dbsfaces.util.getNotEmpty(e.attr("ca"),""),time:null,padding:null,position:e.attr("p"),opened:e.attr("o"),resizeTimeout:null};t.dom.content=t.dom.container.children(".-content"),t.dom.icon=t.dom.container.children(".-icon"),t.dom.icon_content=t.dom.icon.children(".-content"),t.dom.mask=t.dom.container.children(".-mask"),t.dom.mask_content=t.dom.mask.children(".-content"),t.dom.sub_container=t.dom.content.children(".-sub_container"),t.dom.divscroll=t.dom.sub_container.children("div"),t.dom.sub_content=t.dom.divscroll.find("> div > .-sub_content"),t.dom.buttons=t.dom.sub_content.children().not("script"),t.dom.header=t.dom.content.children(".-header"),t.dom.header_content=t.dom.header.children(".-content"),t.dom.header_content_left=t.dom.header_content.children(".-left"),t.dom.header_content_right=t.dom.header_content.children(".-right"),t.dom.header_caption=t.dom.header_content.children(".-caption"),t.dom.header_caption_label=t.dom.header_caption.children(".-label"),t.dom.header_caption_icon=t.dom.header_caption.children(".-icon"),t.dom.header_action_icon=t.dom.header_content.find(".-action"),t.dom.footer=t.dom.content.children(".-footer"),t.dom.footer_content=t.dom.footer.children(".-content"),t.dom.footer_toolbar=t.dom.footer.children(".-toolbar"),t.dom.bthandle=t.dom.content.children(".-bthandle"),t.padding=parseFloat(t.dom.sub_content.css("padding")),e.data("data",t);var a=null;return"msg"==t.type&&1==t.dom.footer_toolbar.length&&null!=(a=dbsfaces.util.getNotEmpty(t.dom.footer_toolbar.children("[id$='btyes']"),null))&&0!=parseInt(a.css("width"))&&(a=null),t.dom.btyes=a,t},pvDialogBtnLayout:function(e){if(0!=e.dom.buttons.length){var t,a,n,i,s,o={x:0,y:0},l={x:0,y:0},d=dbsfaces.math.round(1.2*Math.max(e.dom.icon[0].getBoundingClientRect().width,e.dom.icon[0].getBoundingClientRect().height),2),r=d,c=dbsfaces.math.round(1.1*Math.max(e.dom.icon[0].getBoundingClientRect().width,e.dom.icon[0].getBoundingClientRect().height),2),u=0,h=1,f=!0,p={x:0,y:0},m={x:window.innerWidth,y:0},g={x:0,y:window.innerHeight},v={x:window.innerWidth,y:window.innerHeight},b=[{point1:p,point2:m},{point1:m,point2:v},{point1:v,point2:g},{point1:g,point2:p}],C=e.dom.icon_content.css("padding");""==C&&(C=e.dom.icon_content.css("padding-top")),o.x=dbsfaces.math.round(e.dom.icon[0].getBoundingClientRect().left+e.dom.icon[0].getBoundingClientRect().width/2,2),o.y=dbsfaces.math.round(e.dom.icon[0].getBoundingClientRect().top+e.dom.icon[0].getBoundingClientRect().height/2,2),dbsfaces.ui.cssAllBrowser(e.dom.content,"transform-origin",e.dom.icon[0].getBoundingClientRect().width/2+"px "+e.dom.icon[0].getBoundingClientRect().height/2+"px"),l.x=window.innerWidth/2,l.y=window.innerHeight/2;for(var y=0;y<400;)if(i=[],y++,s=dbsfaces.math.circlePointAngle(o,r,0),f=!0,b.forEach(function(e){null!=(t=dbsfaces.math.circleLineIntersection(o,r,e.point1,e.point2))&&(t.point1.x<p.x||t.point1.x>m.x||t.point1.y<p.y||t.point1.y>v.y?f=!1:i.push(t.point1),t.point2.x<p.x||t.point2.x>m.x||t.point2.y<p.y||t.point2.y>v.y?f=!1:i.push(t.point2))}),0!=i.length&&(i.sort(function(e,t){var a=dbsfaces.math.distanceBetweenTwoPoints(s,e),n=dbsfaces.math.distanceBetweenTwoPoints(s,t),i=dbsfaces.math.round(a-n,5);return 0==i&&e.y==t.y&&(i=0==e.y?t.x-e.x:e.x-t.x),i}),u=dbsfaces.math.angleFromTreePoints(s,i[0],o),i[0].x<=s.x&&(u=-u),h=dbsfaces.math.angleFromTreePoints(i[0],i[1],o),f&&(h=360-h)),a=dbsfaces.math.circleLength(r,h)/e.dom.buttons.length,0!=i.length||360==h)if(Math.trunc(a)<Math.trunc(c))r+=r/2;else{if(!(Math.trunc(a)>Math.trunc(c)))break;if(!(d<r))break;r-=r/2}else{if(!(h<360))break;if(h+=1,Math.trunc(a)<Math.trunc(c))360<(h+=h/2)&&(h=360);else{if(!(Math.trunc(a)>Math.trunc(c)))break;(h-=h/2)<0&&(h=1)}u=h/2}n=h/e.dom.buttons.length,Math.trunc(o.x)>Math.trunc(l.x)&&(n=-n),u+=n/2,e.dom.buttons.each(function(){var e=$(this),t=dbsfaces.math.circlePointAngle({x:0,y:0},r,u);e.css("left",t.x+"px"),e.css("top",t.y+"px"),e.css("padding",C),u+=n})}},pvInitializeLayout:function(e){var t;"btn"==e.type&&dbsfaces.dialog.pvDialogBtnLayout(e),e.dom.container.css("opacity","");var a=tinycolor(e.dom.content.css("color")).isDark();a?(0<e.dom.header_caption_icon.length&&e.dom.header_caption_icon.addClass("-dark"),e.dom.content.addClass("-dark").removeClass("-light"),e.dom.mask_content.addClass("-light").removeClass("-dark")):(0<e.dom.header_caption_icon.length&&e.dom.header_caption_icon.removeClass("-dark"),e.dom.content.addClass("-light").removeClass("-dark"),e.dom.mask_content.addClass("-dark").removeClass("-light")),0<e.dom.header_action_icon.length&&(e.dom.header_action_icon.css("background-color",e.dom.header_content.css("color")),e.dom.header_action_icon.css("border-top-left-radius",e.dom.content.css("border-top-left-radius")),a?(e.dom.header_action_icon.addClass("-light"),e.dom.header_action_icon.removeClass("-dark")):(e.dom.header_action_icon.addClass("-dark"),e.dom.header_action_icon.removeClass("-light"))),"mod"!=e.type&&(t=a?"rgba(0,0,0,.1)":"rgba(255,255,255,.1)",e.dom.bthandle.css("border-color",t).css("background-color",t));var n=2*e.padding;0<e.dom.header_caption_label.children().length&&(n+=e.dom.header_caption_label[0].clientWidth),e.dom.sub_content.css("min-width",n)},pvInitializeCloseTimeout:function(e){if("0"!=e.closeTimeout){var t=5;"a"==e.closeTimeout&&(t=dbsfaces.ui.getTimeFromTextLength(e.dom.sub_content.text())/1e3),dbsfaces.ui.cssTransition(e.dom.bthandle,"width "+t+"s linear, height "+t+"s linear")}},stopTimeout:function(e){e.dom.bthandle.addClass("-stopped")},startTimeout:function(e){e.dom.bthandle.removeClass("-stopped")},scroll:function(e,t,a){var n=e.dom.divscroll;n.scrollLeft(n.data("scrollx")+t),n.scrollTop(n.data("scrolly")+a)},scrollStart:function(e){var t=e.dom.divscroll;t.data("scrollx",t.scrollLeft()),t.data("scrolly",t.scrollTop())},wipe:function(e,t){return 0!=e.dom.bthandle.length&&(("nav"==e.type||"msg"==e.type&&null!=e.dom.btyes)&&("t"==e.position&&"u"==t||"b"==e.position&&"d"==t||"l"==e.position&&"l"==t||"r"==e.position&&"r"==t||"c"==e.position)&&(dbsfaces.dialog.show(e.dom.self),!0))},resize:function(e){void 0!==e&&(e.dom.self.hasClass("-closed")||dbsfaces.dialog.pvAjustLayout(e),"btn"==e.type&&dbsfaces.dialog.pvDialogBtnLayout(e))},show:function(e){if(void 0!==e&&0!=e.length){var t=e.data("data");e.hasClass("-closed")?dbsfaces.dialog.pvOpen(t):dbsfaces.dialog.pvClose(t)}},setMsg:function(e,t,a){var n=e.data("data"),i=n.dom.header_caption_icon.children("div"),s=n.dom.header_caption_label,o=dbsfaces.dialog.pvMsgTypeGetData(t);n.dom.sub_content.text(a),dbsfaces.dialog.pvInitializeCloseTimeout(n),i.attr("class",""),i.addClass(o.iconClass),s.text(o.caption)},pvMsgTypeGetData:function(e){if(null==e||void 0===e)return null;var t={caption:null,iconClass:null,question:null};return"a"==(e=e.trim().toLowerCase())?(t.caption="Sobre",t.iconClass="-i_information",t.question=!1):"s"==e?(t.caption="Sucesso",t.iconClass="-i_sucess",t.question=!1):"i"==e?(t.caption="Informação",t.iconClass="-i_information",t.question=!1):"t"==e?(t.caption="Importante",t.iconClass="-i_important",t.question=!0):"w"==e?(t.caption="Atenção",t.iconClass="-i_warning",t.question=!1):"c"==e?(t.caption="Confirmar",t.iconClass="-i_question_confirm",t.question=!0):"g"==e?(t.caption="Ignorar",t.iconClass="-i_question_ignore",t.question=!0):"p"==e?(t.caption="Proibido",t.iconClass="-i_forbidden",t.question=!1):"e"==e&&(t.caption="Erro",t.iconClass="-i_error",t.question=!1),t},pvOpen:function(e){$(document.activeElement).blur(),setTimeout(function(){dbsfaces.dialog.pvAjustLayout(e),e.dom.self.removeClass("-closed"),e.dom.self.attr("disabled")||(dbsfaces.ui.disableBackgroundInputs(e.dom.self),dbsfaces.dialog.pvFreeze(e,!0),"msg"==e.type&&null!=e.dom.btyes&&0<e.dom.btyes.length?e.dom.btyes[0].focus():dbsfaces.ui.focusOnFirstInput(e.dom.self))},1)},pvClose:function(e){e.dom.self.addClass("-closed"),$(":focus").blur(),dbsfaces.dialog.startTimeout(e),0==e.dom.parent.length?(dbsfaces.ui.enableForegroundInputs($("body")),dbsfaces.dialog.pvFreeze(e.dom.self,!1),e.dom.self.attr("disabled",null)):(e.dom.parent.attr("disabled",null),dbsfaces.ui.enableForegroundInputs(e.dom.parent))},pvFreeze:function(t,e){e?($("html").addClass("dbs_dialog-freeze"),$(".dbs_dialog-freeze").on("touchstart touchmove",function(e){if($.contains(t.dom.self[0],e.originalEvent.srcElement.classList))return!1})):($("html").removeClass("dbs_dialog-freeze"),$(".dbs_dialog-freeze").off("touchstart touchmove"))},pvAjustLayout:function(e){dbsfaces.util.isMobile()&&("mod"==e.type||"nav"==e.type||"msg"==e.type&&"c"!=e.dom.self.attr("p"))&&e.dom.self.attr("cs","s");var t=0;0<e.dom.header_content.length&&(e.dom.header_content.css("height",""),t+=dbsfaces.ui.getRect(e.dom.header_content).height,0<e.dom.header_content_left.length&&(t=Math.max(t,dbsfaces.ui.getRect(e.dom.header_content_left).height)),0<e.dom.header_content_right.length&&(t=Math.max(t,dbsfaces.ui.getRect(e.dom.header_content_right).height)),"b"==e.position&&0<e.dom.bthandle.length&&(t+=dbsfaces.ui.getRect(e.dom.bthandle).height),e.dom.header_content.css("height",t));var a=0;if(0<e.dom.footer.length&&(a+=dbsfaces.ui.getRect(e.dom.footer).height),"t"==e.position&&0<e.dom.bthandle.length&&(a+=dbsfaces.ui.getRect(e.dom.bthandle).height),"b"==e.contentAligment?e.dom.sub_container.css("padding-bottom",t).css("padding-top",a):e.dom.sub_container.css("padding-top",t).css("padding-bottom",a),"msg"==e.type&&e.dom.sub_container.css("padding-left",parseFloat(e.dom.sub_container.css("padding-right"))+e.dom.header_caption_icon[0].clientWidth),e.contentAligment,"mod"==e.type&&("s"==e.dom.self.attr("cs")?e.dom.content.css("left",0).css("top",0):e.dom.content.css("left",window.innerWidth/2-e.dom.content[0].clientWidth/2).css("top",window.innerHeight/2-e.dom.content[0].clientHeight/2)),e.dom.mask_content.css("top","-"+e.dom.icon[0].getBoundingClientRect().top+"px").css("left","-"+e.dom.icon[0].getBoundingClientRect().left+"px"),0<e.dom.header_content.length){var n=e.dom.header_content[0].clientHeight;0<e.dom.header_action_icon.length&&e.dom.header_action_icon.css("width",n).css("height",n)}},dragOff:function(e){e.dom.content.removeClass("-moving"),e.dom.header.off("mousemove.dialog")}},dbs_fileUpload=function(s,i){var o=$(s).find("input[type='file']"),l=$(s).find("[id$='btCancel']"),d=$(s).find("[id$='btStart']"),r=$(s).find(".-message"),c=new Array,u=0;function h(){l.children(".-progress").remove(),l.attr("disabled","disabled"),o.get(0).value="",d.show(),l.hide()}function f(e){l.hide()}function p(e){l.attr("disabled","")}function m(e){y("Erro de timeout"),h(),$(s).trigger("timeout")}function g(e){var t=Math.round(e.loaded/e.total*100);l.children(".-progress").css("height",t+"%")}function v(e){y("Erro na transmissão"),h(),$(s).trigger("error")}function b(e){y("Transferencia interrompida"),h(),$(s).trigger("abort")}function C(e){var t,a,n;try{a=e.target.readyState,t=e.target.status,statusText=e.target.statusText}catch(e){return}if(4==a){if("200"!=t)y(statusText);else{if(statusText="Upload finalizado",0==c.length)statusText+=" com sucesso!";else{if(1==c.length)statusText+="! O arquivo "+c[0]+" não foi baixado por exceder";else{statusText+="! Os arquivos ";for(var i=0;i<c.length;i++)0!=i&&(statusText+=","),statusText+=c[i];statusText+=" não foram baixados por excederem"}statusText+=" o tamanho máximo permitido."}n=statusText,r.text(n),r.removeClass("-error"),r.fadeIn(200).delay(dbsfaces.ui.getTimeFromTextLength(n)).fadeOut(200)}h(),$(s).trigger("load")}}function y(e){r.text(e),r.addClass("-error"),r.fadeIn(200).delay(dbsfaces.ui.getTimeFromTextLength(e)).fadeOut(200)}function w(){r.hide()}o.on("change.fileUpload",function(e){!function(e){if(""==o.get(0).value)return;w(),c.length=0;var t=new FormData,a=o.attr("maxSize");a=void 0!==a?dbsfaces.number.sizeInBytes(a):-1;for(var n=0;n<o.get(0).files.length;n++)a<0||o.get(0).files[n].size<=a?t.append(o.get(0).files[n].name,o.get(0).files[n]):c.push(o.get(0).files[n].name);(u=new XMLHttpRequest).upload.addEventListener("loadstart",f,!1),u.upload.addEventListener("progress",g,!1),u.upload.addEventListener("load",p,!1),u.upload.addEventListener("abort",b,!1),u.upload.addEventListener("error",v,!1),u.upload.addEventListener("timeout",m,!1),u.addEventListener("readystatechange",C,!1),u.open("POST",i,!0),u.send(t),d.hide(),l.show()}()}),l.on("click.fileUpload",function(e){u.open("POST",i,!0),h(),y("Upload cancelado!"),$(s).trigger("cancel")}),d.on("click.fileUpload",function(e){h(),l.children(".-progress").remove(),l.prepend("<div class='-progress'/>"),w(),o.click()})},dbs_floatbutton=function(e){},dbsfaces.floatButton={},dbs_group=function(e){},dbs_inputDate=function(e){$(e+" input").focusin(function(e){dbsfaces.ui.selectAll(this)}),$(e+" > .-container > .-th_input-data").focusin(function(){$(this).addClass("-th_input-data-FOCUS")}),$(e+" > .-container > .-th_input-data > .-day").focusout(function(){var e=dbsfaces.inputDate.getInputDateDay($(this));$(this).val(e)}),$(e+" > .-container > .-th_input-data > .-month").focusout(function(){var e=dbsfaces.inputDate.getInputDateMonth($(this));$(this).val(e)}),$(e+" > .-container > .-th_input-data > .-year").focusout(function(){var e=dbsfaces.inputDate.getInputDateYear($(this));$(this).val(e)}),$(e+" > .-container > .-th_input-data > .-hour").focusout(function(){var e=dbsfaces.inputDate.getInputDateHour($(this));$(this).val(e)}),$(e+" > .-container > .-th_input-data > .-minute").focusout(function(){var e=dbsfaces.inputDate.getInputDateMinute($(this));$(this).val(e)}),$(e+" > .-container > .-th_input-data > .-second").focusout(function(){var e=dbsfaces.inputDate.getInputDateSecond($(this));$(this).val(e)}),$(e+" > .-container > .-th_input-data").focusout(function(){$(this).removeClass("-th_input-data-FOCUS"),""==dbsfaces.inputDate.getIsValid($(this).parent())?$(this).addClass("-error"):$(this).removeClass("-error")}),$(e+" > .-container > .-th_input-data > input").keydown(function(e){var t="";if(!dbsfaces.inputDate.isValidKey(e))return e.preventDefault(),!1;var a=$(this).get(0).selectionEnd-$(this).get(0).selectionStart,n=dbsfaces.string.fromCharCode(e.which);if(0==a&&dbsfaces.number.isNumber(dbsfaces.string.fromCharCode(e.which))){var i=dbsfaces.inputDate.getInputDateDay($(this)),s=dbsfaces.inputDate.getInputDateMonth($(this)),o=dbsfaces.inputDate.getInputDateYear($(this));if($(this).hasClass("-day")?i+=n:$(this).hasClass("-month")&&(s+=n),""==dbsfaces.date.isDate(o,s,i,0,0,0)&&""!=i&&""!=s&&""!=o)return void e.preventDefault()}if(9!=e.which||e.shiftKey){if(191==e.which)return t=$(this).nextAll("input:first"),void e.preventDefault();if(t.length)return e.preventDefault(),void t.focus();var l=0;38==e.which?(l=1,e.preventDefault()):40==e.which&&(l=-1,e.preventDefault()),0!=l&&($(this).hasClass("-day")?dbsfaces.inputDate.addDate($(this),"day",l):$(this).hasClass("-month")?dbsfaces.inputDate.addDate($(this),"month",l):$(this).hasClass("-year")&&dbsfaces.inputDate.addDate($(this),"year",l))}}),$(e+" > .-container > .-th_input-data > input").keyup(function(e){var t="";if(0==$(this).get(0).selectionEnd-$(this).get(0).selectionStart&&dbsfaces.number.isNumber(dbsfaces.string.fromCharCode(e.which))&&2==$(this).val().length)t=$(this).nextAll("input:first");37!=e.which||e.shiftKey?(39==e.which&&!e.shiftKey||47==e.which)&&(t=$(this).nextAll("input:first")):t=$(this).prevAll("input:first"),t.length&&(e.preventDefault(),t.focus())})},dbsfaces.inputDate={isValidKey:function(e){return!e.altKey&&!e.ctrlKey&&!!(9==e.which||8==e.which||13==e.which||37==e.which||38==e.which||39==e.which||40==e.which||46==e.which||47==e.which||191==e.which||96<=e.which&&e.which<=105||!e.shiftKey&&dbsfaces.number.isNumber(dbsfaces.string.fromCharCode(e.which)))},addDate:function(e,t,a){var n=e.parent(),i=parseInt(dbsfaces.inputDate.getInputDateDay(e),10),s=parseInt(dbsfaces.inputDate.getInputDateMonth(e),10),o=parseInt(dbsfaces.inputDate.getInputDateYear(e),10);"day"==t?i+=a:"month"==t?s+=a:"year"==t&&(o+=a),""!=dbsfaces.date.isDate(o,s,i,0,0,0)&&("day"==t?$(n).children(".-day").val(i):"month"==t?$(n).children(".-month").val(s):"year"==t&&$(n).children(".-year").val(o))},getInputDateValue:function(e){var t=$(e).find(".-th_input-data > .-day"),a=dbsfaces.inputDate.getInputDateDay(t),n=dbsfaces.inputDate.getInputDateMonth(t),i=dbsfaces.inputDate.getInputDateYear(t);return dbsfaces.date.isDate(i,n,a,0,0,0)},getIsValid:function(e){var t=$(e).find(".-th_input-data > .-day"),a=dbsfaces.inputDate.getInputDateDay(t),n=dbsfaces.inputDate.getInputDateMonth(t),i=dbsfaces.inputDate.getInputDateYear(t);return""==a&&""==n&&""==i||""!=dbsfaces.inputDate.getInputDateValue(e)},getInputDateDay:function(e){var t=e.parent(),a=$(t).children(".-day").val();return dbsfaces.inputDate.leadingZero(a)},getInputDateMonth:function(e){var t=e.parent(),a=$(t).children(".-month").val();return dbsfaces.inputDate.leadingZero(a)},getInputDateYear:function(e){var t=e.parent(),a=$(t).children(".-year").val();return""!=a&&(dbsfaces.number.isNumber(a)?(a=parseInt(a,10))<70?a+=2e3:a<100?a+=1900:a<1e3&&(a+=2e3):a=""),a},getInputDateHour:function(e){var t=e.parent(),a=$(t).children(".-hour").val();return dbsfaces.inputDate.leadingZero(a)},getInputDateMinute:function(e){var t=e.parent(),a=$(t).children(".-minute").val();return dbsfaces.inputDate.leadingZero(a)},getInputDateSecond:function(e){var t=e.parent(),a=$(t).children(".-second").val();return dbsfaces.inputDate.leadingZero(a)},leadingZero:function(e){return""!=e&&(dbsfaces.number.isNumber(e)?(e=parseInt(e,10))<10&&(e="0"+e):e=""),e}},dbs_inputMask=function(e,t,a,n,i){var s=$(t);dbsfaces.inputMask.initialize($(e),s,a,n,i)},dbsfaces.inputMask={initialize:function(e,t,a,n,i){var s={dom:{self:e,inputData:t},dbsmask:null};dbsfaces.util.isMobile()||t.attr("pattern",null);s.dbsmask=t.dbsmask({parentDom:e,type:"fixed",mask:a,maskEmptyChr:n,decimalPlaces:0,separateThousand:!1,maxLength:a.length}),e.data("data",s)},setValue:function(e,t){e.data("data").dbsmask.pvSetValue(t)}},dbs_inputNumber=function(e,t,a,n,i,s,o,l,d){dbsfaces.setLocale(d);var r=$(t);dbsfaces.inputNumber.initialize($(e),r,a,n,i,s,o,l)},dbsfaces.inputNumber={initialize:function(e,t,a,n,i,s,o,l){var d={dom:{self:e,inputData:t},dbsmask:null};dbsfaces.util.isMobile(),d.dbsmask=t.dbsmask({parentDom:e,type:"number",maskEmptyChr:s?"0":"",decimalPlaces:dbsfaces.number.parseFloat(a),onFocusSelectAll:n,separateThousand:i,maxLength:dbsfaces.number.parseFloat(t.attr("maxlength")),minValue:dbsfaces.number.parseFloat(o),maxValue:dbsfaces.number.parseFloat(l)}),e.data("data",d)},setValue:function(e,t){e.data("data").dbsmask.pvSetValue(t)}},dbs_inputPhone=function(e){$(e+" input").focusin(function(e){dbsfaces.ui.selectAll(this)}),$(e+" > .-container > .-th_input-data").focusin(function(){$(this).addClass("-th_input-data-FOCUS")}),$(e+" > .-container > .-th_input-data").focusin(function(){$(this).addClass("-th_input-data-FOCUS")}),$(e+" > .-container > .-th_input-data").focusout(function(){$(this).removeClass("-th_input-data-FOCUS")}),$(e+" > .-container > .-th_input-data > .-number").focusin(function(e){$(this).val(dbsfaces.number.getOnlyNumber($(this).val()))}),$(e+" > .-container > .-th_input-data > input").keydown(function(e){var t="";return dbsfaces.inputPhone.isValidKey(e)?9!=e.which||e.shiftKey?109==e.which?(t=$(this).nextAll("input:first"),void e.preventDefault()):t.length?(e.preventDefault(),void t.focus()):void 0:void 0:(e.preventDefault(),!1)}),$(e+" > .-container > .-th_input-data > .-ddd").keyup(function(e){dbsfaces.inputPhone.nextField($(this),2,e)}),$(e+" > .-container > .-th_input-data > .-ddi").keyup(function(e){dbsfaces.inputPhone.nextField($(this),3,e)})},dbsfaces.inputPhone={isValidKey:function(e){return!e.altKey&&!e.ctrlKey&&!!(9==e.which||8==e.which||13==e.which||37==e.which||38==e.which||39==e.which||40==e.which||46==e.which||47==e.which||109==e.which||96<=e.which&&e.which<=105||!e.shiftKey&&dbsfaces.number.isNumber(dbsfaces.string.fromCharCode(e.which)))},leadingZero:function(e){return""!=e&&(dbsfaces.number.isNumber(e)?(e=parseInt(e,10))<10&&(e="0"+e):e=""),e},nextField:function(e,t,a){var n="";if(0==e.get(0).selectionEnd-e.get(0).selectionStart&&dbsfaces.number.isNumber(dbsfaces.string.fromCharCode(a.which))&&e.val().length==t)n=e.nextAll("input:first");37!=a.which||a.shiftKey?(39==a.which&&!a.shiftKey||47==a.which)&&(n=e.nextAll("input:first")):n=e.prevAll("input:first"),n.length&&(a.preventDefault(),n.focus())}},dbs_inputText=function(e){var t=!1,a=!1,n=dbsfaces.inputText.initialize($(e));n.dom.inputData.focusin(function(e){t=!1,dbsfaces.ui.selectAll(this)}),n.dom.inputData.focus(function(e){n.dom.suggestion.addClass("-th_input-data-FOCUS")}),n.dom.inputData.blur(function(e){n.dom.suggestion.removeClass("-th_input-data-FOCUS"),n.time=+new Date,dbsfaces.inputText.hideList(n),t?(a=!0,e.stopPropagation(),e.stopImmediatePropagation()):dbsfaces.inputText.validateNullText(n)}),n.dom.inputData.keydown(function(e){if(dbsfaces.inputText.isSuggestion(n))if(13!=e.which&&39!=e.which||$(this).get(0).selectionEnd!=$(this).val().length)40==e.which||38==e.which?dbsfaces.inputText.isSuggestion(n)&&(e.preventDefault(),e.stopPropagation(),"none"==n.dom.list.css("display")?dbsfaces.inputText.showList(n):dbsfaces.dataTable.moveToNextOrPreviousRow(n.dom.dataTable.data("data"),e.which)):(dbsfaces.inputText.isValidKey(e)&&dbsfaces.inputText.clearSuggestion(n),8==e.which&&dbsfaces.ui.selectEnd($(this)));else if(e.stopImmediatePropagation(),dbsfaces.inputText.acceptSuggestion(n),13==e.which)return dbsfaces.inputText.hideList(n),!1}),n.dom.inputData.on("paste",function(e){dbsfaces.inputText.requestSuggestion(n)}),n.dom.inputFind.on("click",function(e){return"none"==n.dom.list.css("display")?(dbsfaces.inputText.showList(n),n.dom.inputData.focus()):dbsfaces.inputText.hideList(n),!1}),n.dom.submit.on(dbsfaces.EVENT.ON_AJAX_BEGIN,function(e){t=!0,n.dom.input.append("<div class='-loading'></div>"),n.dom.inputFind.hide(),e.stopImmediatePropagation()}),n.dom.submit.on(dbsfaces.EVENT.ON_AJAX_SUCCESS,function(e){t=!1,a&&dbsfaces.inputText.pvTriggerBlur(n),n.dom.input.children(".-loading").remove(),n.dom.inputFind.show(),dbsfaces.inputText.fixLayout(n),dbsfaces.inputText.showFirstSuggestion(n),e.stopImmediatePropagation()}),n.dom.input.keyup(function(e){dbsfaces.inputText.isValidKey(e)&&dbsfaces.inputText.requestSuggestion(n)}),n.dom.input.on(dbsfaces.EVENT.ON_ROW_SELECTED,".-list",function(e,t){dbsfaces.inputText.suggestionReceived(n,t,!0)}),n.dom.input.on("click",".-list",function(e){n.dom.inputData.focus(),n.dom.self.css("opacity","0"),setTimeout(function(){n.dom.list.hide()},300)}),dbsfaces.inputText.validateNullText(n),dbsfaces.inputText.fixLayout(n)},dbsfaces.inputText={initialize:function(e){return dbsfaces.inputText.initializeData(e)},initializeData:function(e){var t=dbsfaces.util.jsid(e[0].id),a={dom:{self:e,input:$(t+" > .-container > .-input"),inputData:$(t+"-data"),inputFind:null,suggestion:$(t+"-suggestion"),suggestionKey:$(t+"-suggestion-key"),list:$(t+"-list"),dataTable:$(t+"-dataTable"),submit:$(t+"-submit")},type:e.attr("type"),nullText:null,time:+new Date,timeout:null};return a.dom.inputFind=a.dom.input.children(".-i_find"),a.nullText=a.dom.suggestionKey.attr("nulltext"),e.data("data",a),a},requestSuggestion:function(e){dbsfaces.inputText.clearSuggestion(e);var t=e.dom.inputData.val().trim();dbsfaces.inputText.pvIsNullText(e,t)||(0==e.time?e.time=+new Date:(xDelay=+new Date-e.time,e.time=+new Date,xDelay<550&&window.clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.dom.submit.click()},550)))},clearSuggestion:function(e){e.dom.suggestion.val(""),e.dom.suggestionKey.attr("key",""),""!=e.dom.suggestionKey.val()&&(e.dom.suggestionKey.val(""),dbsfaces.inputText.pvTriggerChange(e)),dbsfaces.inputText.pvValidate(e)},acceptSuggestion:function(e){var t=e.dom.suggestion.val().trim();e.dom.suggestionKey.val()!=e.dom.suggestionKey.attr("key")&&(e.dom.suggestionKey.val(e.dom.suggestionKey.attr("key")),e.dom.inputData.val(t),dbsfaces.inputText.pvTriggerChange(e)),dbsfaces.inputText.pvValidate(e)},suggestionReceived:function(e,t,a){var n=$(t);if(0<n.length){var i=n.find("td .-key"),s=n.children("td.-dv"),o=$(s).text().trim(),l=$(i).text().trim(),d=e.dom.inputData.val().trim();if(!a){var r=o.substr(0,d.length);if(r.toUpperCase()!=d.toUpperCase())return void dbsfaces.inputText.clearSuggestion(e);e.dom.inputData.val(r)}e.dom.suggestionKey.attr("key",l),e.dom.suggestion.val(o),(a||d==o)&&dbsfaces.inputText.acceptSuggestion(e)}else dbsfaces.inputText.clearSuggestion(e)},showFirstSuggestion:function(e){var t=e.dom.dataTable.find("tbody").find("tr:first");dbsfaces.inputText.suggestionReceived(e,t,!1)},pvValidate:function(e){if(dbsfaces.inputText.isSuggestion(e)){var t=e.dom.suggestion.val().trim(),a=e.dom.inputData.val();dbsfaces.inputText.pvIsNullText(e,a)?dbsfaces.inputText.pvRemoveError(e):t==a?dbsfaces.inputText.pvRemoveError(e):dbsfaces.inputText.pvAddError(e)}},pvIsNullText:function(e,t){return""==t||t==e.nullText},validateNullText:function(e){dbsfaces.inputText.isSuggestion(e)&&(""==e.dom.inputData.val()&&e.dom.inputData.val(e.nullText))},pvTriggerChange:function(e){e.dom.inputData.trigger("change")},pvTriggerBlur:function(e){wBlur=!1,e.dom.inputData.trigger("blur"),dbsfaces.inputText.validateNullText(e)},isValidKey:function(e){return!(9==e.which||12==e.which||13==e.which||16==e.which||17==e.which||18==e.which||27==e.which||34==e.which||35==e.which||36==e.which||36==e.which||37==e.which||38==e.which||39==e.which||40==e.which||91==e.which||33==e.which||112<=e.which&&e.which<=130||e.ctrlKey||e.altKey)},pvRemoveError:function(e){e.dom.suggestion.removeClass("-error"),e.dom.inputData.removeClass("-error")},pvAddError:function(e){e.dom.suggestion.addClass("-error"),e.dom.inputData.addClass("-error")},fixLayout:function(e){var t=dbsfaces.util.jsid(e.dom.self[0].id);if(e.dom.list=$(t+"-list"),e.dom.dataTable=$(t+"-dataTable"),0!=e.dom.dataTable.length){e.dom.dataTable.find("tbody:first").attr("tabindex","-1"),e.dom.dataTable.find("input:first.-foo").attr("tabindex","-1");var a=e.dom.inputData.outerWidth();e.dom.dataTable.find("thead:first").css("min-width",a),e.dom.dataTable.find("tbody:first").css("min-width",a)}},isSuggestion:function(e){return 0<e.dom.list.length},showList:function(e){dbsfaces.inputText.isSuggestion(e)&&e.dom.list.css("opacity","1").show()},hideList:function(e){dbsfaces.inputText.isSuggestion(e)&&(e.dom.list.css("opacity","0"),setTimeout(function(){e.dom.list.hide()},100))},letterCase:function(e,t,a,n){if(!a.metaKey&&65<=a.which&&a.which<=90){if("proper"!=n&&"upperfirst"!=n)return;if(!dbsfaces.inputText.isSuggestion(e)&&void 0!==t.attr("maxlength")&&t.val().length>=parseInt(t.attr("maxlength")))return;var i=t.val(),s=i.length,o=i.length;t[0].__proto__.hasOwnProperty("selectionStart")&&(s=t[0].selectionStart,o=t[0].selectionEnd);var l=s+1,d=0;if("upper"==n)d=0;else if("lower"==n)d=32;else if("proper"==n){if(0!=s){var r=i.substr(s-1,1);" "!=r&&""!=r&&(d=32)}}else if("upperfirst"==n&&0!=s&&0!=o)return;a.preventDefault(),i=i.substring(0,s)+String.fromCharCode(a.which+d)+i.substring(o),t.val(i),dbsfaces.ui.selectRange(t,l,l)}}},dbs_menu=function(a){dbsfaces.menu.initialize($(a)),window.addEventListener("resize",function(e){"auto"==$(a).attr("type")&&dbsfaces.menu.setTypeAuto($(a))}),$(a+" .dbs_menuitem:not([disabled])").on("mouseenter",function(e){var t=$(this);0<$(a+"[class~=-menu_float]").length&&dbsfaces.menu.setOpened(t,!0)}),$(a+" .dbs_menuitem:not([disabled])").on("mouseleave",function(e){var t=$(this);0<$(a+"[class~=-menu_float]").length&&dbsfaces.menu.setOpened(t,!1)}),$(a+" .dbs_menuitem:not([disabled])").on("click",function(e){var t=$(this);if(0<$(a+"[class~=-menu_scroll]").length)return dbsfaces.menu.setOpened(t,!t.hasClass("-opened")),!1})},dbsfaces.menu={initialize:function(e){dbsfaces.menu.setTypeAuto(e),dbsfaces.menu.initializeLayout(e)},initializeLayout:function(e){dbsfaces.menu.initializeMenuItem(e),dbsfaces.menu.initializeLayoutEraseOrphans(e)},initializeMenuItem:function(e){e.find(".dbs_menuitem").each(function(){dbsfaces.menu.initializeMenuItemData(e,$(this)),dbsfaces.menu.pvSetChildrenIcon($(this)),dbsfaces.menu.pvSetMenuItemHeight($(this)),dbsfaces.menu.setOpened($(this),$(this).hasClass("-opened"))})},initializeMenuItemData:function(e,t){t.data("menu",e),t.data("type",e.attr("type")),t.data("parent",t.parent().closest(".dbs_menuitem")),t.data("submenu",t.children(".-submenu")),t.data("container",t.data("submenu").children(".-container")),t.data("content",t.data("container").children(".-content")),t.data("childrenIcon",t.find(" > .-caption > .-content > .-childrenIcon")),"scroll"==t.data("type")?t.data("delay",150):t.data("delay",0)},initializeLayoutEraseOrphans:function(e){e.find(".dbs_menuitemSeparator").each(function(){var e=$(this),t=e.next();0==t.length?e.remove():t.hasClass("dbs_menuitemSeparator")&&e.remove()})},setTypeAuto:function(e){"auto"==e.attr("type")&&(768<$(document).width()?(e.removeClass("-menu_scroll"),e.addClass("-menu_float")):(e.removeClass("-menu_float"),e.addClass("-menu_scroll")))},setOpened:function(e,t){if(0!=e.data("submenu").length){if(t){var a=e.data("container"),n=e.data("content");e.addClass("-opened"),a.finish(),a.animate({height:n[0].getBoundingClientRect().height},e.data("delay"),"linear",function(){a.css("overflow","visible"),0<e.data("parent").length&&e.data("parent").data("container").css("height","auto")})}else{a=e.data("container"),n=e.data("content");a.finish(),a.animate({height:0},e.data("delay"),"linear",function(){a.css("overflow",""),e.removeClass("-opened")})}dbsfaces.menu.pvShowChildrenIcon(e,t)}},pvShowChildrenIcon:function(e,t){var a=e.data("childrenIcon");0<a.length&&(t?a.removeClass("-c").addClass("-o"):a.removeClass("-o").addClass("-c"),dbsfaces.menu.pvSetChildrenIcon(e))},pvSetChildrenIcon:function(e){var t,a,n=e.data("childrenIcon");e.data("menu");"scroll"==e.data("type")?(t="-i_navigate_down",a="-i_navigate_up"):(t="-i_add",a="-i_subtract"),n.hasClass("-c")?n.removeClass(a).addClass(t):n.removeClass(t).addClass(a)},pvSetMenuItemHeight:function(e){if(0!=e.length){e.data("submenu");if(0!=e.data("container").length)e.data("content")[0].getBoundingClientRect().height}}},dbs_messageList=function(t){var a=function(e){0!=$(t+" > .-container > .-list").length&&$(t+" > .-container > .-list").addClass("-opened")},e=function(e){0!=$(t+" > .-container > .-list").length&&$(t+" > .-container > .-list").removeClass("-opened")};$(t+" > .-container > .-list > .-content > .-message > .-container > .-button > .dbs_button > .-i_delete").click(function(e){a(),$(t).off("mouseleave.messagelist"),dbsfaces.messageList.excluir(this)}),$(t+" > .-container > .-list > .-content > .-message > .-container > .-button > .dbs_button > .-i_delete").hover(function(e){$(this).closest(".dbs_messageList").toggleClass("-pushDisabled")}),$(t).off("mouseenter.messagelist"),$(t).off("mouseleave.messagelist"),$(t).on("mouseenter.messagelist",a),$(t).on("mouseleave.messagelist",e),setTimeout(function(){e()},200)},dbsfaces.messageList={excluir:function(e){var t=$(e).closest(".-message"),a=$(e).closest(".dbs_messageList").attr("id"),n=$(dbsfaces.util.jsid(a+":foo")),i=$(t).attr("index");$(n).val()!=i&&$(n).val(i),$(e).closest(".-container").css("opacity","0.1"),$(t).animate({border:0,margin:0,padding:0,height:0},250,function(){n.click()})}},dbs_modal=function(t){dbsfaces.modal.initialize($(t));var a=$(t+" > .-modal"),n=$(t+" > .-modal > .-container > table > thead > tr > th");$(t+" * ").on(dbsfaces.EVENT.ON_AJAX_SUCCESS,function(e){if(0==$(t).length){if(0==$("body").find(".dbs_modal:last").length){$(e.currentTarget).offsetParent();dbsfaces.ui.enableForegroundInputs($("body"))}e.stopImmediatePropagation()}}),dbsfaces.ui.disableBackgroundInputs($(t)),$(t).hasClass("-confirmation")&&setTimeout(function(){},0),dbsfaces.ui.focusOnFirstInput($(t+dbsfaces.modal.getBackgroundComponentSelector())),dbsfaces.modal.dragOff(a,n),n.on("mousedown.nnnmodal",function(e){var t={left:Number.parseFloat(a.css("left")),top:Number.parseFloat(a.css("top")),width:a.outerWidth(),height:a.outerHeight()};1===e.which&&(dbsfaces.modal.dragOff(a,n),n.on("mousemove.nnnmodal",{pX:e.clientX,pY:e.clientY,pPosOld:t},function(e){return a.css("margin",""),a.css("left",e.data.pPosOld.left+(e.clientX-e.data.pX)+"px"),a.css("top",e.data.pPosOld.top+(e.clientY-e.data.pY)+"px"),a.addClass("-moving"),!1}))}),$(window).on("dragstart",function(e){dbsfaces.modal.dragOff(a,n)}),$(window).on("mouseup.nnnmodal",function(e){dbsfaces.modal.dragOff(a,n)})},dbsfaces.modal={initialize:function(e){dbsfaces.modal.initializeData(e)},initializeData:function(e){var t={dom:{self:e,modal:e.children(".-modal"),caption:e.find(" > .-modal > .-container > table > thead > tr > th")}};e.data("data",t)},show:function(e){e.css("width",e.outerWidth()),e.css("height",e.outerHeight());var t=e.outerHeight()/2,a=e.outerWidth()/2;e.css("left","50%").css("top","50%").css("margin-left","-"+a+"px").css("margin-top","-"+t+"px").css("opacity","1")},dragOff:function(e,t){e.removeClass("-moving"),t.off("mousemove.nnnmodal")},getBackgroundComponent:function(e){return $(dbsfaces.util.jsid(e)+dbsfaces.modal.getBackgroundComponentSelector())},getBackgroundComponentSelector:function(){return" > .-modal > .-container > table > tbody > tr > td"}},dbs_pagedSearch=function(e){var n=dbsfaces.pagedSearch.initialize($(e));dbsfaces.pagedSearch.pvSynchronizeLists(n),n.dom.inputData.on("keydown",function(e){var t=$(dbsfaces.util.jsid(e.currentTarget.id)).parents(".dbs_pagedSearch");if("suggestion"!=t.attr("type")&&"select"!=t.attr("type"))return dbsfaces.pagedSearch.pvIsValidKey(e);if(39==e.which){var a=t.children(".-container").children(".-R2").children(".-visible_container").children(".dbs_pagedSearch_container").children();dbsfaces.pagedSearch.pvSelectSuggestion(t,a[0])}else 40==e.which&&"true"==t.attr("hasChildren")?"normal"!=t.attr("type")&&dbsfaces.pagedSearch.pvShowSuggestion(n):dbsfaces.pagedSearch.pvSetSuggestion(n.dom.self,"");return dbsfaces.pagedSearch.pvIsValidKey(e)}),n.dom.divResults.on("scroll",function(e){$(this).scrollTop()+$(this).height()==$(this).get(0).scrollHeight&&n.dom.btSearchMore.click()}),n.dom.visibleList.children().on("click",function(e){var t,a=$(e.currentTarget);0!=a.length&&(t=$(dbsfaces.util.jsid(e.currentTarget.id)).parents(".dbs_pagedSearch"),dbsfaces.pagedSearch.pvSelectSuggestion(t,a[0]))}),n.dom.inputData.on("focusout",function(e){var t=$(dbsfaces.util.jsid(e.currentTarget.id)).parents(".dbs_pagedSearch");"true"!=t.attr("openWhenSearch")&&"normal"!=t.attr("type")&&dbsfaces.pagedSearch.pvHideSuggestion(n)})},dbsfaces.pagedSearch={initialize:function(e){return dbsfaces.pagedSearch.initializeData(e)},initializeData:function(e){dbsfaces.util.jsid(e[0].id);var t={dom:{self:e,container:e.children(".-container"),searchBar:null,input:null,inputData:null,inputValor:null,inputValorData:null,btNewSearch:null,btSearchMore:null,divResults:null,visibleContainer:null,visibleList:null,invisibleContainer:null,invisibleList:null,inputIcon:null},indexPesquisa:0,searching:!1,interval:null};return t.dom.searchBar=t.dom.container.children(".-R1"),t.dom.input=t.dom.searchBar.children(".-input_search"),t.dom.inputData=t.dom.input.children(".-container").children(".-th_input-data"),t.dom.inputValor=t.dom.searchBar.children(".-input_valor"),t.dom.inputValorData=t.dom.inputValor.children(".-container").children(".-th_input-data"),t.dom.inputIcon=t.dom.searchBar.children(".-small"),t.dom.btNewSearch=t.dom.searchBar.children(".-bt_new_search"),t.dom.btSearchMore=t.dom.searchBar.children(".-bt_search_more"),t.dom.divResults=t.dom.container.children(".-R2"),t.dom.visibleContainer=t.dom.divResults.children(".-visible_container"),t.dom.visibleList=t.dom.visibleContainer.children(".dbs_pagedSearch_container"),t.dom.invisibleContainer=t.dom.divResults.children(".-invisible_container"),t.dom.invisibleList=t.dom.invisibleContainer.children(".-invisible_list"),e.data("data",t),t},newSearch:function(e){var t=dbsfaces.pagedSearch.pvGetComponetData(e);"begin"==e.status&&(t.indexPesquisa=0,t.dom.visibleList.empty(),t.dom.invisibleList.empty(),"suggestion"!=t.dom.self.attr("type")&&"select"!=t.dom.self.attr("type")||dbsfaces.pagedSearch.pvSetSuggestion(t.dom.self,"")),dbsfaces.pagedSearch.pvSetSearching(t,e)},setSearching:function(e){dbsfaces.pagedSearch.pvSetSearching(dbsfaces.pagedSearch.pvGetComponetData(e),e)},pvGetComponetData:function(e){if(xEle=$(e.source),0!=xEle.length)return xEle.closest(".dbs_pagedSearch").data("data")},pvSetSearching:function(e,t){"begin"==t.status?(dbsfaces.pagedSearch.pvShowLoading(e),e.searching=!0,dbsfaces.pagedSearch.pvActivateInterval(e)):"success"!=t.status&&"error"!=t.status||(e.searching=!1)},pvActivateInterval:function(e){null!=e.interval&&(clearInterval(e.interval),e.interval=null,e.indexPesquisa=0,e.dom.visibleList.empty(),e.dom.invisibleList.empty()),e.interval=setInterval(function(){dbsfaces.pagedSearch.pvUpdateList(e)},300)},pvUpdateList:function(t){dbsfaces.ajax.request(t.dom.input[0].id,null,t.dom.invisibleContainer[0].id,function(e){xEle=$(e.source),0!=xEle.length&&"success"==e.status&&dbsfaces.pagedSearch.pvSynchronizeLists(t)},null,null,0),t.searching||(clearInterval(t.interval),t.interval=null,dbsfaces.pagedSearch.pvHideLoading(t),t.dom.invisibleList.empty(),dbs_pagedSearch(dbsfaces.util.jsid(t.dom.self[0].id)))},pvSynchronizeLists:function(e){if(null!=e.dom){for(var t=e.dom.visibleList,a=$(dbsfaces.util.jsid(e.dom.invisibleList[0].id)+" .-item"),n=e.indexPesquisa;n<a.length;n++){var i=a[n];null!=i&&null==t[0].querySelector(dbsfaces.util.jsid(i.id))&&t.append(i),e.indexPesquisa++}""!=e.dom.inputData.val()&&dbsfaces.pagedSearch.pvCopyValueToSuggestion(e)}},pvCopyValueToSuggestion:function(e){var t=$(e.dom.visibleList.children()[0]).children(".-item_display_value").children(".-container").children(".-th_input-data"),a=e.dom.input.children(".-container").children(".-th_input-data")[0].value;null!=t[0]&&null!=t[0].value.toUpperCase().match("^"+a.toUpperCase())?dbsfaces.pagedSearch.pvSetSuggestion(e.dom.self,t[0].value):dbsfaces.pagedSearch.pvSetSuggestion(e.dom.self,"")},pvSetSuggestion:function(e,t){"suggestion"!=e.attr("type")&&"select"!=e.attr("type")||(e.children(".-container").children(".-R1").children(".-input_suggestion").children(".-container").children(".-th_input-data")[0].value=t)},pvSelectSuggestion:function(e,t){var a,n,i,s,o,l=e;l=e.children(".-container"),o=$(l).children(".-R1").children(".-input_valor"),a=$(t).children(".-item_key").children(".-container").children(".-th_input-data")[0].value,o.children(".-container").children(".-th_input-data")[0].value=a,s=l.children(".-R1").children(".-input_search").children(".-container").children(".-th_input-data"),n=$(t).children(".-item_display_value").children(".-container").children(".-th_input-data")[0].value,s[0].value=n,dbsfaces.ajax.request(s.attr("id"),o.attr("id"),null,null,null,null,0),"select"==e.attr("type")&&(i=(i=t.id.substring(0,t.id.length-10)).substring(i.length-1),l.children(".-R1").children(".-select_row").children(".-container").children(".-th_input-data")[0].value=i,l.children(".-R1").children(".-bt_select_item").click()),dbsfaces.pagedSearch.pvSetSuggestion(e,"")},pvIsValidKey:function(e){return!(9==e.which||12==e.which||13==e.which||16==e.which||17==e.which||18==e.which||27==e.which||34==e.which||35==e.which||36==e.which||36==e.which||37==e.which||38==e.which||39==e.which||40==e.which||91==e.which||33==e.which||112<=e.which&&e.which<=130||e.ctrlKey||e.altKey)},pvShowSuggestion:function(e){e.dom.divResults.removeClass("-hide"),e.dom.divResults.addClass("-show")},pvHideSuggestion:function(e){e.dom.divResults.removeClass("-show"),e.dom.divResults.addClass("-hide")},pvShowLoading:function(e){e.dom.inputIcon.removeClass("-i_find"),e.dom.inputIcon.addClass("-loading")},pvHideLoading:function(e){e.dom.inputIcon.removeClass("-loading"),e.dom.inputIcon.addClass("-i_find")},pvSelectClick:function(e){}},function(r){r.fn.svgHasClass=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(this.get(0).getAttribute("class"))},r.fn.svgRemoveClass=function(t){return this.each(function(){if(r(this).svgHasClass(t)){var e=this.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.setAttribute("class",e)}}),this},r.fn.svgAddClass=function(e){return this.each(function(){r(this).svgHasClass(e)||this.setAttribute("class",this.getAttribute("class")+" "+e)}),this},r.fn.svgAttr=function(e,t){return void 0===t?this.get(0).getAttributeNS(null,e):(null!=t&&this.each(function(){this.setAttributeNS(null,e,t)}),this)},r.fn.svgGetPathTotalSegs=function(){if(0!=this.length)return void 0===this?0:this.get(0).getPathSegAtLength(this.get(0).getTotalLength()+10)+1},r.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},r.fn.isParentFixed=function(){return 0!=this.closest("foreignObject").length||dbsfaces.ui.pvIsParentFixed(this)},r.fn.scrollParent=function(e){var t=this.css("position"),a="absolute"===t,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var e=r(this);return(!a||"static"!==e.css("position"))&&n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&i.length?i:r("body")},r.fn.focusNextInputField=function(){return this.each(function(){var e=r(this).parents("form:eq(0),body").find("button,input,textarea,select"),t=e.index(this);return-1<t&&t+1<e.length&&e.eq(t).focus(),!1})},r.fn.touchwipe=function(e){var c={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},onMove:function(e,t){},onStart:function(){},preventDefaultEvents:!0};return e&&r.extend(c,e),this.each(function(){var o,l,d=!1;function r(){this.removeEventListener("touchmove",t),o=null,d=!1}function t(e){var t=null;c.preventDefaultEvents&&e.preventDefault();var a=e.touches[0].pageX,n=e.touches[0].pageY,i=o-a,s=l-n;d&&(Math.abs(i)>=c.min_move_x?(r(),t=0<i?c.wipeLeft():c.wipeRight()):Math.abs(s)>=c.min_move_y&&(r(),t=0<s?c.wipeUp():c.wipeDown()),t&&e.preventDefault(),e.stopImmediatePropagation()),c.onMove(i,s)}"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",function(e){1==e.touches.length&&(o=e.touches[0].pageX,l=e.touches[0].pageY,d=!0,c.onStart(),this.addEventListener("touchmove",t,!1))},!1)}),this},r.fn.onView=function(){return dbsfaces.onView.initialize(this),this},r.fn.fontSizeFit=function(d){return this.each(function(){var e=r(this),t=e.css("visibility");e.css("visibility","hidden"),e.css("font-size","");var a=window.getComputedStyle(e[0],null),n=parseFloat(a.getPropertyValue("font-size")),i=e[0].getBoundingClientRect().height,s=e[0].getBoundingClientRect().width,o=d[0].getBoundingClientRect().height,l=d[0].getBoundingClientRect().width;n*=o<l?o/i:l/s,e.css("visibility",t),e.css("font-size",n),console.log(s+"\t"+s+"\t"+l),console.log(i+"\t"+i+"\t"+o),console.log(n+"\t")}),this},r.fn.getDim=function(){var e={width:0,height:0,top:0,bottom:0,left:0,right:0,x:0,y:0},t=this[0].getBoundingClientRect();return e.width=t.width,e.height=t.height,e.top=t.top-r(window).scrollTop(),e.bottom=t.bottom,e.left=t.left-r(window).scrollLeft(),e.right=t.right,e.x=t.x,e.y=t.y,e}}(jQuery),dbs_progress=function(t){dbsfaces.progress.initialize($(t)),$(window).resize(function(e){dbsfaces.progress.resize($(t).data("data"))})},dbsfaces.progress={initialize:function(e){var t=dbsfaces.progress.pvInitializeData(e);dbsfaces.progress.resize(t)},resize:function(e){e.dom.self.addClass("-hide"),dbsfaces.progress.pvSetValue(e,e.dom.self.attr("v")),dbsfaces.progress.pvInitializeLayout(e)},pvInitializeData:function(e){var t={dom:{self:e,container:e.children(".-container"),content:null,progress:null,label:null,labelValue:null,labelSufix:null,point:null,back:null},type:e.hasClass("-c")?"c":e.hasClass("-h")?"h":"v",ani:!!e.hasClass("-ani"),percFator:0,percI:0,percD:0,dimension:0,sw:0,totalLength:0};return e.data("data",t),t.dom.content=t.dom.container.children(".-content"),t.dom.progress=t.dom.content.children(".-progress"),t.dom.label=t.dom.progress.find(".-label").first(),t.dom.labelValue=t.dom.label.children(".-value"),t.dom.labelSufix=t.dom.label.children(".-sufix"),t.dom.point=t.dom.content.find("> g > .-point"),t.dom.back=t.dom.content.find("> g > .-back"),t},pvInitializeLayout:function(t){"c"==t.type?dbsfaces.progress.pvInitializeLayoutCircle(t):dbsfaces.progress.pvInitializeLayoutHorizontalVertical(t),t.dom.self.removeClass("-hide"),setTimeout(function(e){dbsfaces.progress.pvEncodeValue(t)},0)},pvInitializeLayoutHorizontalVertical:function(e){var t=tinycolor(e.dom.self.css("color"));e.dom.content.css("border-color",t.setAlpha(.2)).css("background-color",t.setAlpha(.05)),e.dom.progress.css("color",t.setAlpha(1).invertLightness());var a="linear-gradient(135deg,"+t.setAlpha(.7)+" 0%, "+t.setAlpha(1)+" 100%)";e.dom.progress.css("background",a)},pvInitializeLayoutCircle:function(e){var t=tinycolor(e.dom.self.css("color")),a=e.dom.content.find("> defs > linearGradient > stop");$(a[0]).svgAttr("stop-color",t.setAlpha(.7)),$(a[1]).svgAttr("stop-color",t.setAlpha(1)),dbsfaces.progress.pvInitializeLayoutCirclePath(e)},pvInitializeLayoutCirclePath:function(e){var t=parseFloat(e.dom.point.css("stroke-width"))-1,a=e.dimension/2,n=t/2,i="";e.sw=t,i+="M"+a+","+n,i+="A"+(a-n)+","+(a-n),i+=" 0 1 1 ",i+=a-1e-4+","+n,e.dom.point.svgAttr("d",i),e.dom.back.svgAttr("d",i),dbsfaces.progress.pvInitializeDash(e)},pvInitializeDash:function(e){var t=e.dom.point[0];void 0!==t.getTotalLength&&(e.totalLength=t.getTotalLength(),e.dom.point.css("stroke-dasharray",e.totalLength).css("stroke-dashoffset",e.totalLength))},pvEncodeValue:function(e){"c"==e.type?dbsfaces.progress.pvEncodeValueCircle(e):"h"==e.type?dbsfaces.progress.pvEncodeValueHorizontal(e):dbsfaces.progress.pvEncodeValueVertical(e),dbsfaces.progress.pvEncodeValueLabel(e)},pvEncodeValueLabel:function(e){var t;"c"==e.type?(t=(e.dimension-2*e.sw)/2.2,e.dom.label.svgAttr("x",e.dimension/2).svgAttr("y",(e.dimension+t/2)/2)):t=.35*e.dimension,e.dom.label.css("font-size",t),e.dom.labelValue.text(e.percI),e.dom.labelSufix.text(e.percD+"%")},pvEncodeValueHorizontal:function(e){e.dom.progress.css("width",e.dom.self.attr("v")+"%")},pvEncodeValueVertical:function(e){e.dom.progress.css("height",e.dom.self.attr("v")+"%")},pvEncodeValueCircle:function(e){var t=e.totalLength-e.totalLength*e.percFator;e.dom.point.css("stroke-dashoffset",t)},pvSetValue:function(e,t){t=dbsfaces.math.round(parseFloat(t),2),xInt=String(dbsfaces.math.trunc(t,0)),xDec=String(dbsfaces.math.round(t-xInt,4)).substring(1,4),e.dom.self.attr("v",t),e.percI=xInt,e.percD=xDec,e.percFator=t/100,e.dimension=Math.min(e.dom.self[0].getBoundingClientRect().height,e.dom.self[0].getBoundingClientRect().width),e.dom.self.val(e.percFator)}},dbs_push=function(e,t,a){var n=$(e);if(0!=n.length){var i=new EventSource(t);n.data("icon",n.children("span")),i.addEventListener("update",function(e){var t=dbsfaces_push.validIds(n,e.data);return 0<t.length&&dbsfaces.ajax.request(n[0].id,null,t,dbsfaces_push.status,dbsfaces_push.status,null,a),!1},!1),i.addEventListener("error",function(e){dbsfaces_push.state(n,this.readyState)},!1),i.addEventListener("open",function(e){dbsfaces_push.state(n,this.readyState)},!1),i.addEventListener("message",function(e){dbsfaces_push.state(n,this.readyState)},!1)}else console.log(e+" não existente.")},dbsfaces_push={state:function(e,t){var a=e.data("icon");0==t?dbsfaces_push.showConnecting(a):1==t?dbsfaces_push.showOpen(a):2==t&&dbsfaces_push.showClosed(a)},status:function(e){var t=$(e.source).data("icon");"success"==e.status?dbsfaces_push.showOpen(t):"statechange"==e.status?dbsfaces_push.showUpdate(t):(dbsfaces_push.showError(t),console.log(e.status))},showConnecting:function(e){dbsfaces_push.pvShowIcon(e,"-i_dot -yellow")},showOpen:function(e){dbsfaces_push.pvShowIcon(e,"-i_dot -green")},showClosed:function(e){dbsfaces_push.pvShowIcon(e,"-i_dot -white")},showUpdate:function(e){dbsfaces_push.pvShowIcon(e,"-i_dot -blue")},showError:function(e){dbsfaces_push.pvShowIcon(e,"-i_dot -red")},showClose:function(e){dbsfaces_push.pvShowIcon(e,"")},pvShowIcon:function(e,t){0<e.length&&e.attr("class",t)},validIds:function(e,t){$(".-pushDisabled").each(function(e){t=pDatas.replaceAll($(this).attr("id"),"").toLowerCase()});for(var a=e[0].id.toLowerCase(),n=t.split(/[\s,]+/),i="",s=0;s<n.length;s++){var o=n[s];o.toLowerCase()!=a&&0!=$(dbsfaces.util.jsid(o)).length&&(i+=n[s].replace(/^(:)/,"")+" ")}return i.trim()}},dbs_quickInfo=function(t){dbsfaces.quickInfo.initialize($(t)),$(t+".-oh > .-icon > .-content").on("mouseenter",function(e){dbsfaces.quickInfo.showQuickInfo($(t))}),$(t+".-oh > .-icon > .-content").on("mouseleave",function(e){dbsfaces.quickInfo.hideQuickInfo($(t))}),$(t+" > .-icon > .-content").on("mousedown",function(e){e.target==this&&($(t).hasClass("-selected")?dbsfaces.quickInfo.hideQuickInfo($(t)):dbsfaces.quickInfo.showQuickInfo($(t)))})},dbsfaces.quickInfo={initialize:function(e){dbsfaces.quickInfo.initializeData(e),dbsfaces.tooltip.initialize(e.data("content"))},initializeData:function(e){var t=e.find(".-icon > .-content");e.data("content",t);t.children(".-tooltip"),e.parent()},showQuickInfo:function(e){if(dbsfaces.tooltip.show(e.data("content"))){dbsfaces.tooltip.hide(e),dbsfaces.tooltip.disable(e);var t=e.data("content").data("tooltip");e.removeClass("-l1 -l2 -l3 -l4"),t.hasClass("-l1")?e.addClass("-l1"):t.hasClass("-l2")?e.addClass("-l2"):t.hasClass("-l3")?e.addClass("-l3"):t.hasClass("-l4")&&e.addClass("-l4"),e.addClass("-selected");var a=e.scrollParent(),n=window.getComputedStyle(a.get(0),null).getPropertyValue("overflow");a.attr("of",n).css("overflow","hidden")}},hideQuickInfo:function(e){e.removeClass("-selected"),dbsfaces.tooltip.hide(e.data("content")),dbsfaces.tooltip.enable(e);var t=e.closest("[of]"),a=t.attr("of");t.attr("of","").css("overflow",a)}},dbs_radio=function(e){$(e+"> .-th_input").on("mouseup touchend",function(e){var t=$(this).find("> .-input > input");dbsfaces.radio.setValue(t)})},dbsfaces.radio={setValue:function(e){if(null!=e&&void 0!==e&&0!=e.length){var t=e;t instanceof jQuery||(t=$(e)),$("[name='"+t.attr("name")+"']").each(function(){var e=$(this);e[0].checked=!1,e.attr("checked",!1),e.closest(".-th_input").attr("checked",!1)}),t[0].checked=!0,t.attr("checked",!0),t.closest(".-th_input").attr("checked",!0),t.trigger("change")}}},dbs_report=function(e){var t;t=$(e+"> .-header").outerHeight(),$(e+"> .-content").css("margin-bottom","-"+t+"px").css("padding-bottom",t+"px"),dbsfaces.ui.ajaxShowLoading(e+" .dbs_tabPage.-report")},dbsfaces.report={},dbs_reportForm=function(e){var t;t=$(e+"> .-header").outerHeight(),$(e+"> .-content").css("margin-bottom","-"+t+"px").css("padding-bottom",t+"px")},dbs_slider=function(t,e,a,n,i,s){dbsfaces.setLocale(s);var o=dbsfaces.slider.initialize($(t),e,a,n,i);$(window).resize(function(e){dbsfaces.slider.resize($(t).data("data"))}),o.dom.slider.on("mousedown touchstart",function(e){return dbsfaces.slider.pvIsReadOnly(o,e)||(dbsfaces.slider.pvJump(o,e),dbsfaces.slider.pvHandleMoveStart(o,e),$(document.activeElement).blur(),e.stopImmediatePropagation()),!1}),o.dom.slider.on("mouseup touchend",function(e){return dbsfaces.slider.pvIsReadOnly(o,e)||(dbsfaces.slider.pvHandleMoveStop(o,e),e.stopImmediatePropagation()),!1}),o.dom.slider.on("mouseleave",function(e){return dbsfaces.slider.pvHandleMoveStop(o,e),e.stopImmediatePropagation(),!1}),o.dom.slider.on("mousemove touchmove",function(e){return dbsfaces.slider.pvIsReadOnly(o,e)||null==o.startPos||("mousemove"==e.originalEvent.type&&0==e.which?dbsfaces.slider.pvHandleMoveStop(o,e):dbsfaces.slider.pvHandleMove(o,e),e.stopImmediatePropagation()),!1}),o.dom.self.on("mouseleave",function(e){return dbsfaces.slider.pvHandleMoveStop(o,e),e.stopImmediatePropagation(),!1}),o.dom.label.on("mousedown touchstart",function(e){return!dbsfaces.slider.pvIsReadOnly(o,e)&&(o.dom.self.hasClass("-ph")?void 0:(dbsfaces.slider.pvSetCurrentHandle(o,null),dbsfaces.slider.pvSetEditing(o,!0,o.dom.input),e.stopImmediatePropagation(),!1))}),o.dom.pointsLabel.on("mousedown touchstart",function(e){return dbsfaces.slider.pvIsReadOnly(o,e)||(dbsfaces.slider.pvJump(o,e),e.stopImmediatePropagation()),!1}),o.dom.pointsPoint.on("mousedown touchstart",function(e){return dbsfaces.slider.pvIsReadOnly(o,e)||(dbsfaces.slider.pvJump(o,e),e.stopImmediatePropagation()),!1}),null!=o.dom.inputBegin&&(o.dom.inputBegin.on("change",function(e){return!1}),o.dom.inputBegin.on("keydown",function(e){dbsfaces.slider.pvSetCurrentHandle(o,"b"),dbsfaces.slider.pvSetValue(o,this.value)}),o.dom.inputBegin.on("blur",function(e){var t=dbsfaces.number.parseFloat(o.dom.inputBegin[0].value),a=dbsfaces.number.parseFloat(o.dom.inputEnd[0].value);a<t&&(dbsfaces.slider.pvSetCurrentHandle(o,"b"),dbsfaces.slider.pvSetValue(o,a)),dbsfaces.slider.pvSetEditing(o,!1)}),o.dom.handleBeginLabel.on("mousedown touchstart",function(e){return dbsfaces.slider.pvSetCurrentHandle(o,"b"),dbsfaces.slider.pvSetEditing(o,!0,o.dom.inputBegin),e.stopImmediatePropagation(),!1})),null!=o.dom.inputEnd&&(o.dom.inputEnd.on("change",function(e){return!1}),o.dom.inputEnd.on("keydown",function(e){dbsfaces.slider.pvSetCurrentHandle(o,"e"),dbsfaces.slider.pvSetValue(o,this.value)}),o.dom.inputEnd.on("blur",function(e){var t=dbsfaces.number.parseFloat(o.dom.inputBegin[0].value);dbsfaces.number.parseFloat(o.dom.inputEnd[0].value)<t&&(dbsfaces.slider.pvSetCurrentHandle(o,"e"),dbsfaces.slider.pvSetValue(o,t)),dbsfaces.slider.pvSetEditing(o,!1)}),o.dom.handleEndLabel.on("mousedown touchstart",function(e){return dbsfaces.slider.pvSetCurrentHandle(o,"e"),dbsfaces.slider.pvSetEditing(o,!0,o.dom.inputEnd),e.stopImmediatePropagation(),!1})),o.dom.inputs.on("change",function(e){return e.stopImmediatePropagation(),!1}),null==o.dom.inputBegin&&null==o.dom.inputEnd&&(o.dom.input.on("change",function(e){return!1}),o.dom.input.on("keydown",function(e){dbsfaces.slider.pvSetCurrentHandle(o,null),dbsfaces.slider.pvSetValue(o,this.value)}),o.dom.input.on("blur",function(e){dbsfaces.slider.pvSetEditing(o,!1)}),o.dom.handleLabel.on("mousedown touchstart",function(e){return dbsfaces.slider.pvSetCurrentHandle(o,null),dbsfaces.slider.pvSetEditing(o,!0,o.dom.input),e.stopImmediatePropagation(),!1}))},dbsfaces.slider={initialize:function(e,t,a,n,i){var s=dbsfaces.slider.pvInitializeData(e,t,a,n,i);return dbsfaces.slider.pvInitializeCreatePoints(s),dbsfaces.slider.pvInitializeLayout(s),dbsfaces.slider.pvTriggerChange(s),s},pvInitializeData:function(e,t,a,n,i){var s={dom:{self:e,container:e.children(".-container"),content:null,label:null,obs:null,inputs:null,input:null,inputBegin:null,inputEnd:null,sub_container:null,slider:null,sliderValue:null,sliderValueBackground:null,handle:null,handleLabel:null,handleBegin:null,handleBeginLabel:null,handleEnd:null,handleEndLabel:null,points:null,pointsPoint:null,pointsLabel:null},type:e.attr("type"),orientation:e.hasClass("-h")?"h":"v",dp:parseInt(e.attr("dp")),invert:!!e.hasClass("-i"),valuesList:t,labelsList:a,value:null,valueBegin:null,valueEnd:null,lengthFator:null,lengthFatorBegin:null,lengthFatorEnd:null,lengthFatorZero:0,oldValue:null,oldValueBegin:null,oldValueEnd:null,oldLengthFator:null,previousValue:null,previousValueBegin:null,previousValueEnd:null,previousLengthFator:null,currentHandle:null,min:dbsfaces.number.parseFloat(n),max:dbsfaces.number.parseFloat(i),ani:!!e.hasClass("-ani"),segmentFator:null,length:null,lengthPos:null,startPos:null,timeout:null,valuesListNumeric:null,resizeTimeout:null,updateIntervalDimension:null,switched:!1,color:e.css("color"),gradientOrientation:e.hasClass("-h")?"to right":"to top",showPlaceHolder:e.hasClass("-ph"),showValues:e.hasClass("-sv"),error:null};if(e.data("data",s),s.dom.content=s.dom.container.children(".-content"),s.dom.label=s.dom.content.children(".-label"),s.dom.obs=s.dom.content.children(".-obs"),s.dom.sub_container=s.dom.content.children(".-sub_container"),s.dom.slider=s.dom.sub_container.children(".-slider"),s.dom.inputs=s.dom.sub_container.find(".-th_input-data"),"r"==s.type?(s.dom.inputBegin=s.dom.sub_container.find(".-begin .-th_input-data"),s.dom.inputEnd=s.dom.sub_container.find(".-end .-th_input-data"),s.dom.handleBegin=s.dom.sub_container.children(".-handle.-begin"),s.dom.handleBeginLabel=s.dom.handleBegin.children(".-label"),s.dom.handleEnd=s.dom.sub_container.children(".-handle.-end"),s.dom.handleEndLabel=s.dom.handleEnd.children(".-label"),dbsfaces.slider.pvSetCurrentHandle(s,"b"),dbsfaces.slider.pvSetInputValue(s,s.dom.inputBegin[0].value),dbsfaces.slider.pvSetCurrentHandle(s,"e"),dbsfaces.slider.pvSetInputValue(s,s.dom.inputEnd[0].value),s.dom.inputEnd.attr("minValue",s.min),s.dom.inputEnd.attr("maxValue",s.max),s.dom.inputBegin.attr("minValue",s.min),s.dom.inputBegin.attr("maxValue",s.max)):(s.dom.input=s.dom.sub_container.find(".-th_input-data"),s.dom.handle=s.dom.sub_container.children(".-handle"),s.dom.handleLabel=s.dom.handle.children(".-label"),dbsfaces.slider.pvSetCurrentHandle(s,null),dbsfaces.slider.pvSetInputValue(s,s.dom.input[0].value),s.dom.input.attr("minValue",s.min),s.dom.input.attr("maxValue",s.max)),s.dom.sliderValue=s.dom.slider.children(".-value"),s.dom.sliderValueBackground=s.dom.sliderValue.children(".-background"),"v"==s.type||"r"==s.type){s.valuesListNumeric=[];for(var o,l=s.min<0,d=!1,r=null,c=-1,u=0;u<s.valuesList.length;u++)o="number"==typeof t[u]?t[u]:dbsfaces.number.parseFloat(t[u]),s.valuesListNumeric.push(o),l||((0==o||null!=r&&0<o&&r<0)&&(l=!0,c=u,0!=o&&(d=!0)),r=o);d&&(s.valuesList.splice(c,0,"0"),s.labelsList.splice(c,0,"0"),s.valuesListNumeric.splice(c,0,0)),s.segmentFator=1/(t.length-1),l&&(s.lengthFatorZero=dbsfaces.slider.pvGetLengthFatorFromValue(s,"0")),0<s.valuesListNumeric.length&&(s.min=s.valuesListNumeric[0],s.max=s.valuesListNumeric[s.valuesListNumeric.length-1])}else s.segmentFator=1/t.length;return s},pvInitializeLayout:function(t){dbsfaces.slider.resize(t),clearTimeout(t.resizeTimeout),t.resizeTimeout=setTimeout(function(e){dbsfaces.slider.pvInitializeLayoutHorizontalVertical(t),dbsfaces.slider.pvInitializeLayoutSliderColor(t),dbsfaces.slider.resize(t),t.dom.self.removeClass("-hide")},550)},pvInitializeLayoutHorizontalVertical:function(e){if(tinycolor(e.color).isDark())var t=tinycolor("black"),a=tinycolor("black");else t=tinycolor("white"),a=tinycolor("white");var n;if(t.setAlpha(.1),a.setAlpha(.07),0==e.lengthFatorZero)n="linear-gradient("+e.gradientOrientation+","+a+" 0%, "+t+" 100%)";else{var i=100*e.lengthFatorZero;n="linear-gradient("+e.gradientOrientation+", rgba(255,0,0,.2) 0%, rgba(255,0,0,.1) "+i+"%, "+a+" "+i+"%, "+t+" 100%)"}e.dom.slider.css("background",n),e.dom.inputs.addClass("-th_bc")},pvInitializeLayoutSliderColor:function(e){e.dom.sliderValueBackground.css("background","");var t,a,n,i=tinycolor(e.color),s=tinycolor(e.color);e.lengthFator;if(i.isDark()?(t="rgba(130, 0, 0, 1) ",a="rgba(130, 0, 0, .95) "):(t="rgba(255, 0, 0, 1) ",a="rgba(255, 0, 0, .95) "),i.setAlpha(1),s.setAlpha(.95),0==e.lengthFatorZero)n="linear-gradient("+e.gradientOrientation+","+s+" 0%, "+i+" 100%)";else{var o=100*e.lengthFatorZero;n="linear-gradient("+e.gradientOrientation+","+t+" 0%, "+a+" "+o+"%, "+s+" "+o+"%, "+i+" 100%)"}e.dom.sliderValueBackground.css("background",n)},pvInitializeCreatePoints:function(t){t.dom.content.children(".-points").remove();var e=$(document.createElement("div")).addClass("-points");if("r"==t.type?e.insertBefore(t.dom.handleBegin):e.insertBefore(t.dom.handle),0<t.valuesList.length)for(var a="",n="",i="",s=0;s<t.valuesList.length;s++){var o;i=0==s?" -first":s==t.valuesList.length-1?" -last":"",o="v"==t.orientation?t.valuesList.length-s-1:s,a=t.valuesList[o],void 0!==(n=t.labelsList[o])&&""!=n||(n="v"==t.type||"r"==t.type?dbsfaces.format.number(a,t.dp):a),dbsfaces.slider.pvInitializeCreatePointElement(e,i);var l=$(document.createElement("div")).addClass("-label"+i).attr("v",a).attr("l",n);e.append(l)}else dbsfaces.slider.pvInitializeCreatePointElement(e,"");t.dom.points=t.dom.sub_container.children(".-points"),t.dom.pointsPoint=t.dom.points.children(".-point"),t.dom.pointsLabel=t.dom.points.children(".-label"),"v"!=t.type&&"r"!=t.type||t.dom.pointsLabel.on("mousedown touchstart",function(e){dbsfaces.slider.pvSetInputValue(t,$(this).attr("v")),dbsfaces.slider.pvSetValue(t,t.value),e.stopImmediatePropagation(),e.preventDefault()})},pvInitializeCreatePointElement:function(e,t){var a=$(document.createElement("div")).addClass("-point"+t);e.append(a)},pvInitializeLayoutPoints:function(e){for(var t,a=100*e.segmentFator,n=0;n<e.dom.pointsPoint.length;n++)t="calc("+a*n+"% - 1px)","h"==e.orientation?$(e.dom.pointsPoint[n]).css("left",t):$(e.dom.pointsPoint[n]).css("top",t);var i=0;"s"==e.type&&(i+=a/2);for(n=0;n<e.dom.pointsLabel.length;n++)$(e.dom.pointsLabel[n]).text($(e.dom.pointsLabel[n]).attr("l")),t=i+a*n,"h"==e.orientation?$(e.dom.pointsLabel[n]).css("left",t+"%"):$(e.dom.pointsLabel[n]).css("top",t+"%")},pvJump:function(e,t){dbsfaces.slider.pvUpdateDimensions(e);var a=0,n=dbsfaces.ui.pointerEventToXY(t);e.dom.self.addClass("-selected"),a="h"==e.orientation?(n.x-e.dom.sub_container[0].getBoundingClientRect().left)/e.length:1-(n.y-e.dom.sub_container[0].getBoundingClientRect().top)/e.length,"r"==e.type&&dbsfaces.slider.pvFindHandle(e,a),dbsfaces.slider.pvSetValuePerc(e,a),t.stopImmediatePropagation(),t.preventDefault()},pvHandleMoveStart:function(e,t){dbsfaces.slider.pvUpdateDimensions(e),e.dom.self.addClass("-selected");var a=dbsfaces.ui.pointerEventToXY(t);if("h"==e.orientation?e.startPos=a.x:e.startPos=a.y,"s"==e.type){var n=dbsfaces.math.trunc(e.valuesList.length*e.lengthFator,0)-1;e.lengthPos=e.length*(n/e.valuesList.length)}else e.lengthPos=e.length*e.lengthFator;t.stopImmediatePropagation(),t.preventDefault()},pvHandleMoveStop:function(e,t){e.startPos=null,e.dom.self.removeClass("-selected"),dbsfaces.slider.pvTriggerChange(e),t.stopImmediatePropagation(),t.preventDefault()},pvHandleMove:function(e,t){if(null!=e.startPos){var a,n=e.lengthPos,i=dbsfaces.ui.pointerEventToXY(t);"h"==e.orientation?n-=e.startPos-i.x:n-=i.y-e.startPos,n<0?n=0:n>e.length&&(n=e.length),a=n/e.length,dbsfaces.slider.pvSetValuePerc(e,a),t.stopImmediatePropagation(),t.preventDefault()}},pvSetEditing:function(e,t,a){t?(e.dom.self.addClass("-editing"),a.focus()):(e.dom.self.removeClass("-editing"),dbsfaces.slider.pvTriggerChange(e))},pvSetCurrentHandle:function(e,t){"b"==(e.currentHandle=t)?(e.dom.input=e.dom.inputBegin,e.dom.handle=e.dom.handleBegin,e.dom.handleLabel=e.dom.handleBeginLabel,e.dom.self.removeClass("-end").addClass("-begin"),e.value=e.valueBegin,e.lengthFator=e.lengthFatorBegin,e.oldValue=e.oldValueBegin):"e"==t&&(e.dom.input=e.dom.inputEnd,e.dom.handle=e.dom.handleEnd,e.dom.handleLabel=e.dom.handleEndLabel,e.dom.self.removeClass("-begin").addClass("-end"),e.value=e.valueEnd,e.lengthFator=e.lengthFatorEnd,e.oldValue=e.oldValueEnd)},pvIsReadOnly:function(e){return e.dom.self.hasClass("-readOnly")||e.dom.self.hasClass("-disabled")},pvFindHandle:function(e,t){Math.abs(t-e.lengthFatorBegin)<Math.abs(t-e.lengthFatorEnd)?"b"!=e.currentHandle&&dbsfaces.slider.pvSetCurrentHandle(e,"b"):"e"!=e.currentHandle&&dbsfaces.slider.pvSetCurrentHandle(e,"e")},pvSetValue:function(e,t){void 0!==t&&0!=t.length&&("v"!=e.type&&"r"!=e.type||(e.value=dbsfaces.number.parseFloat(t)),dbsfaces.slider.pvSetValuePerc(e,dbsfaces.slider.pvGetLengthFatorFromValue(e,t),!0))},pvGetLengthFatorFromValue:function(e,t){var a=dbsfaces.number.parseFloat(t),n=0;if("v"==e.type||"r"==e.type){var i=e.min,s=e.max;if(n=dbsfaces.math.round(a,e.dp),0<e.valuesListNumeric.length){e.error=null,n<e.valuesListNumeric[0]?(n=e.valuesListNumeric[0],e.error="Valor "+t+" não pode ser inferior a "+n):n>e.valuesListNumeric[e.valuesListNumeric.length-1]&&(n=e.valuesListNumeric[e.valuesListNumeric.length-1],e.error="Valor "+t+" não pode ser superior a "+n);for(var o=0;o<e.valuesListNumeric.length;o++)if(e.valuesListNumeric[o]>n){s=e.valuesListNumeric[o],i=e.valuesListNumeric[o-1];break}n=e.segmentFator*((n-i)/(s-i)),n+=e.segmentFator*(o-1)}else n=(n-i)/(s-i)}else{a=String(t).trim().toLowerCase();for(o=0;o<e.valuesList.length;o++)if(e.valuesList[o].toLowerCase()==a){n=(o+1)/e.valuesList.length;break}}return n},pvSetValuePerc:function(e,t,a){if(null!=e.dom.input){var n,i=null;if(1<(t=parseFloat(t))?t=1:t<0&&(t=0),"v"==e.type||"r"==e.type){var s,o,l=t;if(0<e.valuesListNumeric.length?(i=dbsfaces.math.trunc((e.valuesListNumeric.length-1)*t,0),l=t-e.segmentFator*i,l/=e.segmentFator,i==e.valuesListNumeric.length-1?s=o=dbsfaces.number.parseFloat(e.valuesListNumeric[i]):(o=dbsfaces.number.parseFloat(e.valuesListNumeric[i]),s=dbsfaces.number.parseFloat(e.valuesListNumeric[i+1]))):(o=e.min,s=e.max),n=(s-o)*l+o,n=dbsfaces.math.round(n,e.dp),void 0===a){var d=Math.sign(n)||1,r=dbsfaces.format.number(n,e.dp).replace(/[^\d]/g,""),c=dbsfaces.format.number(Math.abs(s)-Math.abs(o),e.dp).replace(/[^\d]/g,"").length-2;0<c&&(c=Math.pow(10,c),r=dbsfaces.number.parseFloat(r),n=dbsfaces.math.trunc(r/c,0)*c/Math.pow(10,e.dp)*d)}}else 0<t&&(t=(i=dbsfaces.math.trunc(e.valuesList.length*t+.99,0))/e.valuesList.length,n=e.valuesList[i-1]);if(e.lengthFator=t,dbsfaces.slider.pvSetInputValue(e,n),dbsfaces.slider.pvEncodeValue(e),e.switched){e.switched=!1;var u=e.currentHandle;"b"==e.currentHandle?dbsfaces.slider.pvSetCurrentHandle(e,"e"):dbsfaces.slider.pvSetCurrentHandle(e,"b"),dbsfaces.slider.pvEncodeValue(e),dbsfaces.slider.pvSetCurrentHandle(e,u)}}},pvSetInputValue:function(e,t){if(null!=e.dom.input&&void 0!==t){var a=t;"v"!=e.type&&"r"!=e.type||(a=dbsfaces.format.number(t,e.dp)),e.value=t,e.dom.self.val(t),"b"==e.currentHandle?(e.dom.inputBegin[0].value=a,e.dom.inputBegin.attr("value",a),e.valueBegin=e.value,e.lengthFatorBegin=e.lengthFator):"e"==e.currentHandle?(e.dom.inputEnd[0].value=a,e.dom.inputEnd.attr("value",a),e.valueEnd=e.value,e.lengthFatorEnd=e.lengthFator):(e.dom.input[0].value=a,e.dom.input.attr("value",a))}},pvTriggerChange:function(e){e.oldValue==e.value&&e.oldValueBegin==e.valueBegin&&e.oldValueEnd==e.valueEnd&&e.oldLengthFator==e.lengthFator||(e.previousValue=e.oldValue,e.previousValueBegin=e.oldValueBegin,e.previousValueEnd=e.oldValueEnd,e.previousLengthFator=e.oldLengthFator,e.oldValue=e.value,e.oldValueBegin=e.valueBegin,e.oldValueEnd=e.valueEnd,e.oldLengthFator=e.lengthFator,clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.dom.self.trigger("change",[{value:e.value,valueBegin:e.valueBegin,valueEnd:e.valueEnd,lengthFator:e.lengthFator,previousValue:e.previousValue}])},10))},pvEncodeValue:function(e){e.dom.sliderValue;var t=100*e.lengthFator;dbsfaces.slider.pvEncodeTextValue(e),"h"==e.orientation?dbsfaces.slider.pvEncodeValueHorizontal(e,t):dbsfaces.slider.pvEncodeValueVertical(e,t),dbsfaces.slider.pvHideLabels(e)},pvEncodeTextValue:function(e,t){var a;a=void 0===t?e.dom.input.attr("value"):t,"s"==e.type&&0==e.lengthFator?e.dom.handleLabel.text(""):e.dom.handleLabel.text(a),"v"!=e.type||e.showPlaceHolder||(e.dom.slider.attr("pr",e.dom.handleLabel.text()),e.dom.sliderValueBackground.attr("pr",e.dom.handleLabel.text()))},pvEncodeValueHorizontal:function(e,t){if("r"==e.type&&("e"==e.currentHandle&&t<parseFloat(e.dom.handleBegin[0].style.left)||"b"==e.currentHandle&&t>parseFloat(e.dom.handleEnd[0].style.left))){if(e.dom.self.hasClass("-editing"))return;dbsfaces.slider.pvHandleSwitch(e)}e.dom.handle.css("left",t+"%");var a=0;if("v"==e.type||"s"==e.type){a=e.dom.handleLabel[0].getBoundingClientRect().width/2,"s"==e.type&&(a+=e.dom.slider[0].getBoundingClientRect().width*e.segmentFator/2);var n=-a;if("v"==e.type){var i=e.dom.handle[0].getBoundingClientRect().left+a-(e.dom.slider[0].getBoundingClientRect().left+e.dom.slider[0].getBoundingClientRect().width),s=e.dom.handle[0].getBoundingClientRect().left-a-e.dom.slider[0].getBoundingClientRect().left;0<i?n-=i:s<0&&(n-=s)}e.dom.handleLabel.css("left",n)}else{if("b"==e.currentHandle)a=e.dom.handleLabel[0].getBoundingClientRect().width,(s=e.dom.handle[0].getBoundingClientRect().left-a-e.dom.slider[0].getBoundingClientRect().left)<0&&(a+=s),a=-a;else(a=0)<(i=e.dom.handle[0].getBoundingClientRect().left+e.dom.handleLabel[0].getBoundingClientRect().width-(e.dom.slider[0].getBoundingClientRect().left+e.dom.slider[0].getBoundingClientRect().width))&&(a-=i);e.dom.handleLabel.css("left",a)}if("r"==e.type){var o=parseFloat(e.dom.handleBegin[0].style.left),l=parseFloat(e.dom.handleEnd[0].style.left);e.dom.sliderValue.css("left",o+"%"),e.dom.sliderValue.css("width",l-o+"%"),e.dom.sliderValueBackground.css("left","-"+e.dom.sliderValue.css("left"))}else e.dom.sliderValue.css("width",t+"%")},pvEncodeValueVertical:function(e,t){var a,n;"r"==e.type&&("e"==e.currentHandle&&100-t>parseFloat(e.dom.handleBegin[0].style.top)||"b"==e.currentHandle&&100-t<parseFloat(e.dom.handleEnd[0].style.top))&&(e.dom.self.hasClass("-editing")||dbsfaces.slider.pvHandleSwitch(e)),e.dom.handle.css("top",100-t+"%"),a=e.dom.handleLabel[0].getBoundingClientRect().height/2,"s"==e.type&&(a-=e.dom.slider[0].getBoundingClientRect().height*e.segmentFator/2);var i=e.dom.handle[0].getBoundingClientRect().top+a-(e.dom.slider[0].getBoundingClientRect().top+e.dom.slider[0].getBoundingClientRect().height),s=e.dom.handle[0].getBoundingClientRect().top-a-e.dom.slider[0].getBoundingClientRect().top;if(n=-a,"v"!=e.type&&"r"!=e.type||(0<i?n=-a-i:s<0&&(n=-a-s)),e.dom.handleLabel.css("top",n),"r"==e.type){var o=parseFloat(e.dom.handleBegin[0].style.top),l=parseFloat(e.dom.handleEnd[0].style.top);e.dom.sliderValue.css("top",l+"%"),e.dom.sliderValue.css("height",o-l+"%"),e.dom.sliderValueBackground.css("top","-"+e.dom.sliderValue.css("top"))}else e.dom.sliderValue.css("height",t+"%")},pvUpdateDimensions:function(e){var t=dbsfaces.ui.getRect($(e.dom.sub_container));if("h"==e.orientation){if(e.length==t.width)return;e.length=t.width}else{if(e.length==t.height)return;e.length=t.height}var a=dbsfaces.ui.getRect($(e.dom.slider));"h"==e.orientation?(e.dom.sliderValueBackground.css("width",a.width),0==e.dom.label.length&&e.dom.obs.addClass("-relative")):e.dom.sliderValueBackground.css("height",a.height),dbsfaces.slider.pvInitializeLayoutPoints(e),dbsfaces.slider.pvHideLabels(e)},pvHandleSwitch:function(e){var t=e.dom.handleBegin;e.dom.handleBegin=e.dom.handleEnd,e.dom.handleEnd=t,t=e.dom.handleBeginLabel,e.dom.handleBeginLabel=e.dom.handleEndLabel,e.dom.handleEndLabel=t,t=e.dom.inputBegin,e.dom.inputBegin=e.dom.inputEnd,e.dom.inputEnd=t,t=e.valueBegin,e.valueBegin=e.valueEnd,e.valueEnd=t,t=e.lengthFatorBegin,e.lengthFatorBegin=e.lengthFatorEnd,e.lengthFatorEnd=t,t=e.oldValueBegin,e.oldValueBegin=e.oldValueEnd,e.oldValueEnd=t,e.dom.handleBegin.removeClass("-end").addClass("-begin"),e.dom.handleEnd.removeClass("-begin").addClass("-end"),e.switched=!0,"b"==e.currentHandle?dbsfaces.slider.pvSetCurrentHandle(e,"e"):dbsfaces.slider.pvSetCurrentHandle(e,"b")},pvHideLabels:function(e){if(e.showValues){var t,a,n=dbsfaces.ui.getRect(e.dom.handleLabel);a="h"==e.orientation?(t=n.left)+n.width:(t=n.top)+n.height,t*=.99,a*=1.01;for(var i=0;i<e.dom.pointsLabel.length;i++){var s,o,l,d=$(e.dom.pointsLabel[i]),r=dbsfaces.ui.getRect(d);"h"==e.orientation?(s=r.width,o=r.left):(s=r.height,o=r.top),l=o+s,dbsfaces.slider.pvHideLabel(e,d,!(a<o||l<t))}}},pvHideLabel:function(e,t,a){var n="";if(a&&(n=0),null!=e.currentHandle){var i=t.data("owner");if(void 0===i&&(i={b:!1,e:!1}),a)"b"==e.currentHandle?i.b=!0:i.e=!0;else if("b"==e.currentHandle?i.b=!1:i.e=!1,i.b||i.e)return;t.data("owner",i)}t.css("opacity",n)},resize:function(e){dbsfaces.slider.pvUpdateDimensions(e),"r"==e.type&&(dbsfaces.slider.pvSetCurrentHandle(e,"b"),dbsfaces.slider.pvSetValue(e,e.value),dbsfaces.slider.pvSetCurrentHandle(e,"e")),dbsfaces.slider.pvSetValue(e,e.value)},setValue:function(e,t){if(void 0!==e&&0!=e.length){var a=e.data("data");void 0!==t&&0!=t.length&&(dbsfaces.slider.pvSetValue(a,t),dbsfaces.slider.pvTriggerChange(a))}},setTextValue:function(e,t){var a=e.data("data");void 0!==t&&0!=t.length&&(dbsfaces.slider.pvSetValue(a,t),dbsfaces.slider.pvEncodeTextValue(a,t))},setLabel:function(e,t){var a=e.data("data");void 0!==t&&0!=t.length&&a.dom.label.text(t)}},$(document).ready(function(){$(".-t_slide > div").on(dbsfaces.EVENT.ON_TRANSITION_END,function(e){var t=$(this),a=t.parent();return 0<t.next().length&&(a.hasClass("-in")||a.hasClass("-t_slide-left")||a.hasClass("-t_slide-right")),!1})}),dbsfaces.t={},dbsfaces.t.slide={moveIn:function(e){dbsfaces.t.slide.pvMove(e,"-t_slide-in")},moveOutLeft:function(e){dbsfaces.t.slide.pvMove(e,"-t_slide-left")},moveOutRight:function(e){dbsfaces.t.slide.pvMove(e,"-t_slide-right")},pvMove:function(e,t){e.removeClass("-t_slide-left").removeClass("-t_slide-right").removeClass("-t_slide-in").addClass(t),e.trigger("change",t)}},dbs_tab=function(t){var i=dbsfaces.tab.initialize($(t));i.dom.caption.on("mousedown touchstart",function(e){var t=$(this);if(!(0<t.children(".-ajax").length))return dbsfaces.tab.selectTabPage(t.attr("tabpageid"),i),e.stopImmediatePropagation(),!1}),i.dom.indicators.on("mousemove touchmove",function(e){var t=dbsfaces.ui.pointerEventToXY(e),a=$(document.elementFromPoint(t.x,t.y)).attr("tabpageid");if(void 0!==a){if(0<i.dom.caption.filter("[tabpageid='"+a+"']").children(".-ajax").length)return;dbsfaces.tab.selectTabPage(a,i)}return e.stopImmediatePropagation(),!1}),i.dom.indicator.on("mousedown touchstart",function(e){var t=$(this);if(!(0<i.dom.caption.filter("[tabpageid='"+t.attr("tabpageid")+"']").children(".-ajax").length))return dbsfaces.tab.selectTabPage(t.attr("tabpageid"),i),e.stopImmediatePropagation(),!1}),i.dom.container.on("change",function(e){return!1}),i.dom.caption.on(dbsfaces.EVENT.ON_AJAX_SUCCESS,function(e){$(this).children(".dbs_tabCaption").removeClass("-ajax"),i.dom.tabPage=i.dom.tabPages.find("> .-container > .dbs_tabPage")}),i.dom.captions.on(dbsfaces.EVENT.ON_TRANSITION_END,function(e){var t=$(this);if($(e.target).is(t)){if(i.dom.captions.css("pointer-events",""),"acc"==i.type){if("flex-grow"!=e.originalEvent.propertyName&&"flex"!=e.originalEvent.propertyName)return!1;if(""!=i.dom.input.val()){var a=i.dom.input.val()+"_aba",n=$(dbsfaces.util.jsid(a));n.parent().prepend(n),n.css("min-height",n.height()),t.css("min-height",n.height())}else t.css("min-height",""),i.dom.captions_container.children().css("min-height","")}return i.dom.self.hasClass("-selected")?i.dom.self.trigger("opened.tab",i.dom.input.val()):i.dom.self.trigger("closed.tab"),e.stopImmediatePropagation(),!1}}),"acc"==i.type&&i.dom.tabPages.touchwipe({wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){dbsfaces.tab.selectTabPage(i.dom.input.val(),i)},onStart:function(){},onMove:function(e,t){},min_move_x:25,min_move_y:25,preventDefaultEvents:!0}),"scr"==i.type&&i.dom.tabPages.touchwipe({wipeLeft:function(){var e=$(dbsfaces.util.jsid(i.dom.input.val())).next(".dbs_tabPage");0<e.length&&dbsfaces.tab.selectTabPage(e[0].id,i)},wipeRight:function(){var e=$(dbsfaces.util.jsid(i.dom.input.val())).prev(".dbs_tabPage");0<e.length&&dbsfaces.tab.selectTabPage(e[0].id,i)},wipeUp:function(){},wipeDown:function(){},onStart:function(){},onMove:function(e,t){},min_move_x:25,min_move_y:25,preventDefaultEvents:!0}),$(window).resize(function(e){dbsfaces.tab.resize($(t).data("data"))})},dbsfaces.tab={initialize:function(e){var t=dbsfaces.tab.initializeData(e);return dbsfaces.tab.initializeLayout(t),"tab"!=t.type&&"scr"!=t.type||0<t.dom.tabPage.length&&(""==t.dom.input.val()?dbsfaces.tab.showTabPage(t.dom.tabPage[0].id,t):dbsfaces.tab.showTabPage(t.dom.input.val(),t)),t.dom.container.removeClass("-hide"),t},initializeData:function(e){var t={dom:{self:e,container:null,captions:null,captions_container:null,caption:null,indicators:null,indicators_container:null,indicator:null,tabPages:null,tabPage:null,input:null},type:e.attr("type"),showTabPageOnClick:e.attr("soc"),color:e.css("color"),colorInverted:tinycolor(e.css("color").toString()).invertLightness().setAlpha(1).toString(),resizeTimeout:null};return t.dom.container=e.children(".-container"),t.dom.captions=t.dom.container.children(".-captions"),t.dom.captions_container=t.dom.captions.children(".-container"),t.dom.caption=t.dom.captions_container.children(".-caption"),t.dom.indicators=t.dom.container.children(".-indicators"),t.dom.indicators_container=t.dom.indicators.children(".-container"),t.dom.indicator=t.dom.indicators_container.children(".-ind"),t.dom.tabPages=t.dom.container.children(".-tabPages"),t.dom.tabPage=t.dom.tabPages.find("> .-container > .dbs_tabPage"),t.dom.input=t.dom.tabPages.find("> .-container > input"),e.data("data",t),t},initializeLayout:function(e){0==e.dom.captions_container.children().length&&e.dom.captions.remove()},showTabPage:function(e,t){var a=$(dbsfaces.util.jsid(e));void 0===t&&(t=a.closest(".dbs_tab").data("data")),"acc"==t.type&&t.dom.captions.css("pointer-events","none");var n="acc"==t.type&&a.hasClass("-selected");t.dom.caption.removeClass("-selected"),t.dom.indicator.removeClass("-selected"),t.dom.caption.children().removeClass("-selected"),t.dom.tabPage.removeClass("-selected");var i=t.dom.caption.filter("[tabpageid='"+e+"']"),s=t.dom.indicator.filter("[tabpageid='"+e+"']");n?(t.dom.self.removeClass("-selected"),i.removeClass("-hide").removeClass("-selected"),i.children().removeClass("-hide").removeClass("-selected"),i.siblings().removeClass("-hide").removeClass("-selected"),i.siblings().children().removeClass("-hide").removeClass("-selected"),t.dom.input.val(null)):(t.dom.self.addClass("-selected"),i.removeClass("-hide").addClass("-selected"),s.removeClass("-hide").addClass("-selected"),i.children().removeClass("-hide").addClass("-selected"),a.removeClass("-hide").removeClass("-next").removeClass("-prev").addClass("-selected"),a.prevAll().removeClass("-next").addClass("-prev"),a.nextAll().removeClass("-prev").addClass("-next"),i.siblings().addClass("-hide"),i.siblings().children().addClass("-hide"),s.siblings().addClass("-hide"),s.siblings().children().addClass("-hide"),a.siblings().addClass("-hide"),t.dom.input.val(e)),dbsfaces.tab.resize(t),t.dom.self.trigger("change.tab",e.substring(e.lastIndexOf(":")+1)),a.trigger("select.tab",!n)},selectTabPage:function(e,t){t.showTabPageOnClick&&dbsfaces.tab.showTabPage(e)},resize:function(e){}},dbs_tabPage=function(e){var t=dbsfaces.tabPage.initialize($(e));dbsfaces.tabPage.setSelected(t),dbsfaces.ui.ajaxShowLoading($(e))},dbsfaces.tabPage={initialize:function(e){return dbsfaces.tabPage.initializeData(e)},initializeData:function(e){var t={dom:{self:e,parent:e.closest(".dbs_tab")}};return e.data("data",t),t},setSelected:function(n){setTimeout(function(e){var t=n.dom.parent.data("data"),a=t.dom.input.val().trim();n.dom.self[0].id.toUpperCase()==a.toUpperCase()&&dbsfaces.tab.showTabPage(a,t)},10)}},dbs_tooltip=function(t){dbsfaces.tooltip.initialize($(t)),$(t).mouseenter(function(e){dbsfaces.tooltip.showDelayed(t)}),$(t).mouseleave(function(e){dbsfaces.tooltip.hide(t)}),$(t+" input").focus(function(e){dbsfaces.tooltip.hide(t)}),$(t+" input").click(function(e){dbsfaces.tooltip.hide(t)})},dbsfaces.tooltip={wRightLeft:10,wTomBottom:5,initialize:function(e){dbsfaces.tooltip.initializeData(e),dbsfaces.tooltip.initializeLayout(e)},initializeData:function(e){var t=e.children(".-tooltip");0==t.length||(t.data("parent",e),t.data("delay",t.attr("delay")),t.data("container",t.children(".-container")),t.data("content",t.data("container").children(".-content")),t.data("timerhide",null),t.data("timershow",null),t.data("dl",Number(t.attr("dl"))),t.data("setPos",!t.isParentFixed()),t.attr("setPos",t.data("setPos"))),e.data("tooltip",t)},initializeLayout:function(e){if(null!=e.data("tooltip")){var t=e.data("tooltip").data("content"),a=tinycolor(e.css("color")).invertLightness().setAlpha(1);t.css("background-color",e.css("color")),t.css("color",a)}},showDelayed:function(t){if(null!=t){var a=t;a instanceof jQuery||(a=$(t));var n=a.data("tooltip");if(null!=n){var e=n.data("delay");clearTimeout(n.data("timershow")),n.data("timershow",setTimeout(function(){dbsfaces.tooltip.show(a);var e=dbsfaces.ui.getTimeFromTextLength(n.data("content").text());clearTimeout(n.data("timerhide")),n.data("timerhide",setTimeout(function(){dbsfaces.tooltip.hide(t)},e))},e))}}},disable:function(e){var t=e;t instanceof jQuery||(t=$(e));var a=t.data("tooltip");null!=a&&a.attr("disabled","disabled")},enable:function(e){var t=e;t instanceof jQuery||(t=$(e));var a=t.data("tooltip");null!=a&&a.attr("disabled",null)},hide:function(e){if(null!=e){var t=e;t instanceof jQuery||(t=$(e));var a=t.data("tooltip");null!=a&&(null!=a.data("timershow")&&(clearTimeout(a.data("timershow")),a.data("timershow",null)),null!=a.data("timerhide")&&(clearTimeout(a.data("timerhide")),a.data("timerhide",null)),a.removeClass("-show"))}},show:function(e){if(null!=e){var t=e;if(t instanceof jQuery||(t=$(e)),0==t.length)return!1;var a=t.data("tooltip");if(null!=a)return!a.attr("disabled")&&(dbsfaces.tooltip.pvSetBestLocation(a),a.addClass("-show"),!0)}},pvSetBestLocation:function(e){var t=e.data("dl"),a=Math.pow(2,t-1);e.removeClass("-l1 -l2 -l3 -l4");for(var n=1;n<=4&&0==(t=dbsfaces.tooltip.pvGetBestLocationCode(e,t));n++)1==n||3==n?a&dbsfaces.tooltip.wRightLeft?a=~a&dbsfaces.tooltip.wRightLeft:a&dbsfaces.tooltip.wTomBottom&&(a=~a&dbsfaces.tooltip.wTomBottom):2==n&&(a&dbsfaces.tooltip.wRightLeft?a=1:a&dbsfaces.tooltip.wTomBottom&&(a=2)),t=Math.log(a)/Math.log(2)+1;e.addClass(dbsfaces.tooltip.pvGetLocationClass(t))},pvGetBestLocationCode:function(e,t){dbsfaces.tooltip.pvPreShow(e,t);var a=e.data("container"),n=0,i=Math.pow(2,t-1);return 0<a.get(0).getBoundingClientRect().top&&(n+=1),a.get(0).getBoundingClientRect().left+a.outerWidth()<$(document).width()&&(n+=2),a.get(0).getBoundingClientRect().top+a.outerHeight()<$(document).height()&&(n+=4),0<a.get(0).getBoundingClientRect().left&&(n+=8),(n&i)!=i?0:i&dbsfaces.tooltip.wTomBottom&&(n&dbsfaces.tooltip.wRightLeft)!=dbsfaces.tooltip.wRightLeft?0:i&dbsfaces.tooltip.wRightLeft&&(n&dbsfaces.tooltip.wTomBottom)!=dbsfaces.tooltip.wTomBottom?0:Math.log(i)/Math.log(2)+1},pvPreShow:function(e,t){var a=e.data("parent"),n=a.get(0).getBoundingClientRect(),i=(e.get(0).getBoundingClientRect(),0),s=0,o=e.data("container"),l=e.data("content");e.data("setPos")&&e.css("left",n.left+n.width/2).css("top",n.top+n.height),1==t||3==t?(s-=o.outerWidth()/2,i=1==t?-(o.outerHeight()+a.outerHeight()+8):8):(i=-(a.outerHeight()+o.outerHeight())/2,s=8+a.outerWidth()/2,2==t||(s=-s-o.outerWidth())),dbsfaces.ui.cssAllBrowser(o,"transform-origin",parseInt(-s)+"px "+parseInt(-i)+"px"),dbsfaces.ui.cssTransform(o,"translate3d("+parseInt(s)+"px, "+parseInt(i)+"px, 0)"),dbsfaces.ui.cssAllBrowser(l,"transform-origin",parseInt(-s)+"px "+parseInt(-i)+"px")},pvGetLocationCode:function(e){return(e=e.trim().toLowerCase())==dbsfaces.tooltip.pvGetLocationClass(2)?2:e==dbsfaces.tooltip.pvGetLocationClass(3)?3:e==dbsfaces.tooltip.pvGetLocationClass(4)?4:1},pvGetLocationClass:function(e){return"-l"+Number(e)}},dbsinvest={pmt:function(e,t,a,n,i){var s,o;return n||(n=0),i||(i=0),0===(e/=100)?-(a+n)/t:(s=-e*a*((o=Math.pow(1+e,t))+n)/(o-1),1===i&&(s/=1+e),parseFloat(s.toFixed(2)))},fv:function(e,t,a,n,i){e/=100,n||(n=0),i||(i=0);var s,o=Math.pow(1+e,t);return s=e?a*(1+e*i)*(1-o)/e-n*o:-1*(n+a*t),parseFloat(s.toFixed(2))},calculaFluxo:function(e,t,a,n,i){for(var s,o=[],l=0;l<=t;l++)s=dbsinvest.fv(e,l,a,n,i),o.push({value:s,label:l});return o}},function(n){var t=function(){this.initialize.apply(this,arguments)};t.prototype={options:{parentDom:null,type:null,mask:null,maskEmptyChr:"",decimalPlaces:2,onFocusSelectAll:!1,separateThousand:!0,maxLength:null,minValue:null,maxValue:null},editKeys:{8:1,40:1,38:1,46:1,109:1,173:1,189:1,110:1,188:1,190:1},bypassKeys:{9:1,13:1,35:1,36:1,37:1,39:1,91:1},minusKeys:{109:1,173:1,189:1},decimalKeys:{110:1,188:1,190:1},regex:{number:"0-9-",fixed:"0-9A-Za-z"},initialize:function(e,t){this.options=n.extend({},this.options,this.options[t.type]||{},t),this.input=e,this.oldValue=null,this.cursorPosition=null,this.split=null,this.isAndroid=dbsfaces.util.isAndroid(),this.isMobile=dbsfaces.util.isMobile(),this.refresh=!1,this.isNumber()?this.initializeNumber():this.isFixed()&&this.initializeFixed(),this.pvRefresh();var a=this;this.input.on("keydown.dbsmask",function(e){a.onKeyDown(e)}),this.isAndroid&&this.input.on("input.dbsmask",function(e){a.refresh&&a.pvRefresh()}),this.input.on("paste.dbsmask",function(e){a.onPaste(e)}),this.input.on("drop.dbsmask",function(e){a.pvIgnoreEvent(e)}),this.input.on("blur.dbsmask",function(e){a.pvRefresh()}),this.input.on("focus.dbsmask",function(e){setTimeout(function(e){a.options.onFocusSelectAll?dbsfaces.ui.selectAll(a.input):a.isMobile&&a.pvSetCursorPosition(0)},1)})},isNumber:function(){return"number"==this.options.type},isFixed:function(){return"fixed"==this.options.type},initializeNumber:function(){var e=this.regex.number;this.options.minValue<0&&(e+="-"),this.regex=new RegExp("([^"+e+this.options.maskEmptyChr+"]+)","g"),this.options.decimalPlaces<0&&(this.options.decimalPlaces=0),this.isAndroid&&this.pvSetPhoneKeyboard()},initializeFixed:function(){""==this.options.maskEmptyChr&&(this.options.maskEmptyChr="_");var e=this.regex.fixed;this.regex=new RegExp("([^"+e+this.options.maskEmptyChr+"]+)","g"),this.options.decimalPlaces=0,new RegExp("([AX]+)","").test(this.options.mask)||this.pvSetPhoneKeyboard()},pvSetPhoneKeyboard:function(){this.input.attr("type","tel")},onKeyDown:function(e){this.pvEditValue(e)},onPaste:function(e){var t=(e.clipboardData||e.originalEvent.clipboardData||window.clipboardData).getData("text");this.pvIgnoreEvent(e),this.isFixed()&&!this.pvIsValidMaskValue(t)||(this.isMobile&&this.input.select(),this.pvUpdateSplit(),this.pvUpdateValue(t))},pvEditValue:function(e){var t=e.which||e.keyCode;if(!this.bypassKeys[t]&&!e.originalEvent.metaKey){this.pvIgnoreEvent(e);var a="";if(this.editKeys[t]||(a=this.pvGetCharFromKey(t)),null!=a){this.pvUpdateSplit();if(8==t||46==t)this.pvIsSelected()||(8==t?(this.pvEditValueDeleteBegin(),this.isNumber()||this.pvSetCursorPosition(this.split.begin.length)):46==t&&(this.pvEditValueDeleteEnd(),this.isNumber()?this.pvSetCursorPosition(this.split.end.length):this.pvSetCursorPosition(this.split.begin.length)));else if(this.isNumber()){if(!this.isMobile&&0<this.options.decimalPlaces&&0==this.input[0].selectionStart&&this.input[0].selectionEnd==this.input[0].value.length)return this.pvSetValue(a+dbsfaces.string.repeat("0",this.options.decimalPlaces)),void this.pvSetCursorPosition(this.options.decimalPlaces+1);this.pvEditValueNumber(t),this.pvSetCursorPosition(this.split.end.length)}else{if(38==t||40==t||this.minusKeys[t]||this.decimalKeys[t]||!this.pvIsValidMaskValue(a))return;this.pvEditValueFixed(t),this.pvIsSelected()?this.pvSetCursorPosition(this.split.begin.length+1):this.pvSetCursorPosition(this.input[0].value.length-this.split.end.length)}this.pvUpdateValue(a)}else this.isAndroid&&(this.refresh=!0)}},pvEditValueDeleteBegin:function(){for(var e=0;0<this.split.begin.length;){var t=this.split.begin.length-1;if(this.pvIsValidValue(this.split.begin.charAt(t))&&2==++e)break;this.split.begin=this.split.begin.substring(0,t)}},pvEditValueDeleteEnd:function(){for(var e=0;0<this.split.end.length&&(!this.pvIsValidValue(this.split.end.charAt(0))||2!=++e);)this.split.end=this.split.end.substring(1)},pvEditValueNumber:function(e){if(38==e||40==e){0==this.split.begin.length&&this.options.minValue<=0&&(this.split.begin=0,this.split.beginWithoutMask=0);var t=Math.sign(this.split.begin)||1;"-"!=this.split.beginWithoutMask&&(this.split.begin=dbsfaces.number.parseFloat(this.split.beginWithoutMask),40==e?this.split.begin--:this.split.begin++,-1==t&&0==this.split.begin&&0<this.split.endWithoutMask.length?this.split.begin="-":this.split.begin=this.split.begin.toString())}else this.minusKeys[e]&&(""==this.split.beginWithoutMask?this.split.begin="-":this.split.begin=-1*dbsfaces.number.parseFloat(this.split.beginWithoutMask),this.split.begin=this.split.begin.toString());if(0<this.options.decimalPlaces){if(this.decimalKeys[e])return this.pvSetCursorPosition(this.options.decimalPlaces),void this.pvUpdateSplit();this.pvIsDecimalPosition()&&this.pvEditValueDeleteEnd()}},pvEditValueFixed:function(e){this.pvEditValueDeleteEnd()},pvUpdateValue:function(e){this.pvSetValue(this.pvGetValidValue(this.split.begin+e+this.split.end))},pvGetCharFromKey:function(e){var t="";return this.minusKeys[e]?t="-":(96<=e&&e<=105&&(e-=48),t=String.fromCharCode(e)),this.pvIsValidValue(t)||(t=null),t},pvSetValue:function(e){var t=this.pvGetValidValue(e);"-"!=t&&(this.isNumber()?t=this.pvSetValueNumber(t):this.isFixed()&&(t=this.pvSetValueFixed(t)),(this.refresh||null!=t&&t!=this.oldValue)&&(this.refresh||this.pvSaveCursorPosition(),this.input.val(t),this.input.attr("value",t),this.oldValue=t,null!=this.options.parentDom&&this.options.parentDom.val(t),this.refresh||(this.pvRestoreCursorPosition(),this.input.trigger("change")),this.refresh=!1,this.pvUpdateSplit()))},pvSetValueNumber:function(e){var t;if(""==String(e))return"";if(e=dbsfaces.number.parseFloat(e),0<this.options.decimalPlaces&&(e/=Math.pow(10,this.options.decimalPlaces)),null!=this.options.maxValue&&e>this.options.maxValue&&(e=this.options.maxValue),null!=this.options.minValue&&e<this.options.minValue&&(e=this.options.minValue),t=dbsfaces.format.number(e,this.options.decimalPlaces,this.options.separateThousand),!(null!=this.options.maxLength&&t.length>this.options.maxLength)){if(!this.options.separateThousand&&""!=this.options.maskEmptyChr)t=dbsfaces.string.repeat(this.options.maskEmptyChr,this.options.maxLength-t.length)+t;return t}},pvSetValueFixed:function(e){return dbsfaces.format.mask(e,this.options.mask,this.options.maskEmptyChr)},pvSaveCursorPosition:function(){this.cursorPosition=this.pvGetCurrentPosition()},pvRestoreCursorPosition:function(){this.cursorPosition>this.input[0].value.length&&(this.cursorPosition=this.input[0].value.length),this.pvSetCursorPosition(this.cursorPosition)},pvSetCursorPosition:function(e){if(!(e<0||e>this.input[0].value.length)){var t=e;this.isNumber()?t=this.input[0].value.length-e:this.pvIsValidValue(this.input[0].value.charAt(t))||this.pvSetCursorPosition(t+1),this.input[0].selectionStart=t,this.input[0].selectionEnd=t}},pvGetCurrentPosition:function(){return this.isNumber()?this.input[0].value.length-this.input[0].selectionEnd:this.input[0].selectionStart},pvIsDecimalPosition:function(){if(0==this.options.decimalPlaces)return!1;var e=this.pvGetCurrentPosition();return 0<e&&e<=this.options.decimalPlaces},pvIsSelected:function(){return this.input[0].selectionStart!=this.input[0].selectionEnd},pvIgnoreEvent:function(e){e.preventDefault(),e.stopPropagation()},pvUpdateSplit:function(){this.split={begin:null,end:null,beginWithMask:null,endWithMask:null};var e=this.input.val();this.split.begin=e.substring(0,this.input[0].selectionStart),this.split.end=e.substring(this.input[0].selectionEnd),this.split.beginWithoutMask=this.pvGetValidValue(this.split.begin),this.split.endWithoutMask=this.pvGetValidValue(this.split.end)},pvIsValidValue:function(e){this.regex.lastIndex=0;var t=!this.regex.test(e);return this.regex.lastIndex=0,t},pvIsValidMaskValue:function(e){for(var t,a=this.input[0].selectionStart;a<this.input[0].value.length&&"9"!=(t=this.options.mask.charAt(a).toUpperCase())&&"A"!=t&&"X"!=t;)a++;var n="";return"9"!=t&&"X"!=t||(n="0-9"),"A"!=t&&"X"!=t||(n="A-Za-z"),""!=n&&!new RegExp("([^"+n+"]+)","").test(this.pvGetValidValue(e))},pvGetValidValue:function(e){this.regex.lastIndex=0;var t=e.replace(this.regex,"");return"-"==t&&this.options.minValue<=0&&(t="0"),this.regex.lastIndex=0,t},pvRefresh:function(){this.refresh=!0,this.pvSetValue(this.input[0].value)}},n.fn.dbsmask=function(e){return new t(n(this),e)}}(jQuery);